<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="900" viewBox="0 0 1400 900">
  <defs>
    <linearGradient id="blueGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="purpleGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9b59b6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8e44ad;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="greenGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#27ae60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#229954;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="orangeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e67e22;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d35400;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Title -->
  <text x="700" y="30" font-size="28" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    CMIPS System Architecture - Event-Driven with Kafka
  </text>
  
  <!-- FRONTEND LAYER -->
  <rect x="50" y="70" width="300" height="200" fill="url(#blueGradient)" rx="10" opacity="0.9"/>
  <text x="200" y="95" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
    Frontend Layer
  </text>
  
  <rect x="70" y="110" width="260" height="50" fill="white" rx="5"/>
  <text x="200" y="135" font-size="13" text-anchor="middle" fill="#2c3e50">
    React Dashboard (Port 3000)
  </text>
  
  <rect x="70" y="170" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="132" y="193" font-size="12" text-anchor="middle" fill="#2c3e50">
    Keycloak Admin
  </text>
  
  <rect x="205" y="170" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="267" y="193" font-size="12" text-anchor="middle" fill="#2c3e50">
    WorkView
  </text>
  
  <rect x="70" y="220" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="132" y="243" font-size="12" text-anchor="middle" fill="#2c3e50">
    Notifications
  </text>
  
  <rect x="205" y="220" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="267" y="243" font-size="12" text-anchor="middle" fill="#2c3e50">
    Timesheets
  </text>
  
  <!-- BACKEND LAYER -->
  <rect x="450" y="70" width="300" height="200" fill="url(#purpleGradient)" rx="10" opacity="0.9"/>
  <text x="600" y="95" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
    Backend Layer
  </text>
  
  <rect x="470" y="110" width="260" height="50" fill="white" rx="5"/>
  <text x="600" y="135" font-size="13" text-anchor="middle" fill="#2c3e50">
    Spring Boot REST API (Port 8081)
  </text>
  
  <rect x="470" y="170" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="532" y="193" font-size="12" text-anchor="middle" fill="#2c3e50">
    Auth/User Controllers
  </text>
  
  <rect x="605" y="170" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="667" y="193" font-size="12" text-anchor="middle" fill="#2c3e50">
    Keycloak Admin API
  </text>
  
  <rect x="470" y="220" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="532" y="243" font-size="12" text-anchor="middle" fill="#2c3e50">
    Task/Notification API
  </text>
  
  <rect x="605" y="220" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="667" y="243" font-size="12" text-anchor="middle" fill="#2c3e50">
    Kafka Consumers
  </text>
  
  <!-- KAFKA LAYER -->
  <rect x="850" y="70" width="300" height="200" fill="url(#orangeGradient)" rx="10" opacity="0.9"/>
  <text x="1000" y="95" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
    Event Streaming (Kafka)
  </text>
  
  <rect x="870" y="110" width="260" height="50" fill="white" rx="5"/>
  <text x="1000" y="135" font-size="13" text-anchor="middle" fill="#2c3e50">
    Kafka + Zookeeper (Port 9092)
  </text>
  
  <rect x="870" y="170" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="932" y="193" font-size="12" text-anchor="middle" fill="#2c3e50">
    case-events Topic
  </text>
  
  <rect x="1005" y="170" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="1067" y="193" font-size="12" text-anchor="middle" fill="#2c3e50">
    timesheet-events Topic
  </text>
  
  <rect x="870" y="220" width="260" height="40" fill="#ecf0f1" rx="5"/>
  <text x="1000" y="243" font-size="12" text-anchor="middle" fill="#2c3e50">
    Event Consumer â†’ Creates Tasks &amp; Notifications
  </text>
  
  <!-- KEYCLOAK LAYER -->
  <rect x="50" y="330" width="300" height="200" fill="url(#greenGradient)" rx="10" opacity="0.9"/>
  <text x="200" y="355" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
    Identity &amp; Access (Keycloak)
  </text>
  
  <rect x="70" y="370" width="260" height="50" fill="white" rx="5"/>
  <text x="200" y="395" font-size="13" text-anchor="middle" fill="#2c3e50">
    Keycloak Server (Port 8180)
  </text>
  
  <rect x="70" y="430" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="132" y="453" font-size="12" text-anchor="middle" fill="#2c3e50">
    User Management
  </text>
  
  <rect x="205" y="430" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="267" y="453" font-size="12" text-anchor="middle" fill="#2c3e50">
    Role Management
  </text>
  
  <rect x="70" y="480" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="132" y="503" font-size="12" text-anchor="middle" fill="#2c3e50">
    Policies
  </text>
  
  <rect x="205" y="480" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="267" y="503" font-size="12" text-anchor="middle" fill="#2c3e50">
    Permissions
  </text>
  
  <!-- DATABASE LAYER -->
  <rect x="450" y="330" width="300" height="200" fill="#34495e" rx="10" opacity="0.9"/>
  <text x="600" y="355" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
    Database Layer
  </text>
  
  <rect x="470" y="370" width="260" height="50" fill="white" rx="5"/>
  <text x="600" y="395" font-size="13" text-anchor="middle" fill="#2c3e50">
    PostgreSQL (Port 5432)
  </text>
  
  <rect x="470" y="430" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="532" y="453" font-size="12" text-anchor="middle" fill="#2c3e50">
    Users Table
  </text>
  
  <rect x="605" y="430" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="667" y="453" font-size="12" text-anchor="middle" fill="#2c3e50">
    Tasks Table
  </text>
  
  <rect x="470" y="480" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="532" y="503" font-size="12" text-anchor="middle" fill="#2c3e50">
    Notifications Table
  </text>
  
  <rect x="605" y="480" width="125" height="40" fill="#ecf0f1" rx="5"/>
  <text x="667" y="503" font-size="12" text-anchor="middle" fill="#2c3e50">
    Timesheets Table
  </text>
  
  <!-- CONNECTIONS -->
  <!-- Frontend to Backend -->
  <path d="M 350 170 Q 400 170, 470 190" stroke="#3498db" stroke-width="3" fill="none" marker-end="url(#arrowBlue)"/>
  
  <!-- Backend to Keycloak -->
  <path d="M 600 270 Q 300 270, 200 330" stroke="#9b59b6" stroke-width="3" fill="none" marker-end="url(#arrowPurple)"/>
  
  <!-- Backend to Kafka -->
  <path d="M 750 270 L 850 270" stroke="#e67e22" stroke-width="3" fill="none" marker-end="url(#arrowOrange)"/>
  
  <!-- Kafka to Backend -->
  <path d="M 850 270 L 750 270" stroke="#e67e22" stroke-width="2" fill="none" stroke-dasharray="5,5" marker-end="url(#arrowOrange)"/>
  
  <!-- Backend to Database -->
  <path d="M 600 270 L 600 330" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrowGray)"/>
  
  <!-- Keycloak to Database -->
  <path d="M 200 530 L 400 530 Q 500 530, 600 430" stroke="#27ae60" stroke-width="3" fill="none" marker-end="url(#arrowGreen)" opacity="0.5"/>
  
  <!-- Arrow Markers -->
  <defs>
    <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#3498db"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#9b59b6"/>
    </marker>
    <marker id="arrowOrange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#e67e22"/>
    </marker>
    <marker id="arrowGray" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#34495e"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#27ae60"/>
    </marker>
  </defs>
  
  <!-- LEGEND -->
  <rect x="850" y="330" width="300" height="200" fill="#f8f9fa" stroke="#bdc3c7" stroke-width="2" rx="10"/>
  <text x="1000" y="360" font-size="16" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Architecture Legend
  </text>
  
  <circle cx="880" cy="385" r="8" fill="url(#blueGradient)"/>
  <text x="900" y="390" font-size="12" fill="#2c3e50">Frontend Requests</text>
  
  <circle cx="880" cy="415" r="8" fill="url(#purpleGradient)"/>
  <text x="900" y="420" font-size="12" fill="#2c3e50">Authentication/Authorization</text>
  
  <circle cx="880" cy="445" r="8" fill="url(#orangeGradient)"/>
  <text x="900" y="450" font-size="12" fill="#2c3e50">Event Streaming</text>
  
  <circle cx="880" cy="475" r="8" fill="#34495e"/>
  <text x="900" y="480" font-size="12" fill="#2c3e50">Database Operations</text>
  
  <circle cx="880" cy="505" r="8" fill="url(#greenGradient)"/>
  <text x="900" y="510" font-size="12" fill="#2c3e50">Identity Management</text>
  
  <!-- FOOTER -->
  <text x="700" y="600" font-size="14" text-anchor="middle" fill="#7f8c8d">
    CMIPS - Case Management, Information and Payrolling System
  </text>
  <text x="700" y="620" font-size="12" text-anchor="middle" fill="#95a5a6">
    Event-Driven Architecture with Keycloak Auth &amp; Kafka Streams
  </text>
</svg>

