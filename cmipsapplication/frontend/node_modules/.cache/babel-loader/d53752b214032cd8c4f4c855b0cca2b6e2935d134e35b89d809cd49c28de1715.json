{"ast":null,"code":"import _objectSpread from\"/Users/sajeev/Documents/cmips-security/cmipsapplication/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{useAuth}from'../contexts/AuthContext';import'./AdminDashboard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE_URL='http://localhost:8081/api/admin/keycloak';/**\n * Keycloak Admin Dashboard\n * User-friendly interface for managing Keycloak without accessing the admin console\n */const KeycloakAdminDashboard=()=>{const{user,refreshTokenIfNeeded,loading:authLoading}=useAuth();const[activeTab,setActiveTab]=useState('users');const[users,setUsers]=useState([]);const[roles,setRoles]=useState([]);const[resources,setResources]=useState([]);const[policies,setPolicies]=useState([]);const[permissions,setPermissions]=useState([]);const[loading,setLoading]=useState(false);const[message,setMessage]=useState({type:'',text:''});// User form state\nconst[userForm,setUserForm]=useState({username:'',email:'',password:'',firstName:'',lastName:'',role:''});// Policy form state\nconst[policyForm,setPolicyForm]=useState({name:'',description:'',roleName:'PROVIDER'});// Permission form state\nconst[permissionForm,setPermissionForm]=useState({name:'',description:'',resourceId:'',scopeIds:[],policyIds:[]});// State for editing resource attributes\nconst[editingResource,setEditingResource]=useState(null);const[attributeForm,setAttributeForm]=useState({key:'',value:''});const[editingAttribute,setEditingAttribute]=useState(null);// { resourceId, oldKey, key, value }\nconst[attributeEditForm,setAttributeEditForm]=useState({key:'',value:''});// Role form state\nconst[roleForm,setRoleForm]=useState({name:'',description:''});const getAuthHeaders=async()=>{// Admin endpoints now require user authentication with ADMIN role\nconst token=await refreshTokenIfNeeded();return{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'};};const showMessage=(type,text)=>{setMessage({type,text});setTimeout(()=>setMessage({type:'',text:''}),5000);};const handleApiError=(error,defaultMessage)=>{var _error$response,_error$response2,_error$response2$data;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){showMessage('error','Session expired. Please login again.');// Don't show the default message for 401 errors\nreturn;}showMessage('error',defaultMessage+': '+(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message));};// ============================== USER MANAGEMENT ==============================\nconst fetchUsers=async()=>{setLoading(true);try{const response=await axios.get(\"\".concat(API_BASE_URL,\"/users\"),{headers:await getAuthHeaders()});setUsers(response.data);}catch(error){handleApiError(error,'Failed to fetch users');}finally{setLoading(false);}};const createUser=async e=>{e.preventDefault();// Validate that a role is selected\nif(!userForm.role){showMessage('error','Please select a role for the user');return;}setLoading(true);try{const response=await axios.post(\"\".concat(API_BASE_URL,\"/users\"),userForm,{headers:await getAuthHeaders()});showMessage('success',response.data.message||'User created successfully');setUserForm({username:'',email:'',password:'',firstName:'',lastName:'',role:''});fetchUsers();}catch(error){var _error$response3,_error$response3$data;showMessage('error','Failed to create user: '+(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||error.message));}finally{setLoading(false);}};const deleteUser=async(userId,username)=>{if(!window.confirm(\"Are you sure you want to delete user: \".concat(username,\"?\"))){return;}setLoading(true);try{await axios.delete(\"\".concat(API_BASE_URL,\"/users/\").concat(userId),{headers:await getAuthHeaders()});showMessage('success','User deleted successfully');fetchUsers();}catch(error){var _error$response4,_error$response4$data;showMessage('error','Failed to delete user: '+(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||error.message));}finally{setLoading(false);}};// ============================== ROLE MANAGEMENT ==============================\nconst fetchRoles=async()=>{setLoading(true);try{const response=await axios.get(\"\".concat(API_BASE_URL,\"/roles\"),{headers:await getAuthHeaders()});setRoles(response.data);}catch(error){handleApiError(error,'Failed to fetch roles');}finally{setLoading(false);}};// ============================== RESOURCE ATTRIBUTE MANAGEMENT ==============================\nconst addResourceAttribute=async(resourceId,resourceName)=>{if(!attributeForm.key||!attributeForm.value){showMessage('error','Both key and value are required');return;}try{setLoading(true);const response=await axios.post(\"\".concat(API_BASE_URL,\"/resources/\").concat(resourceId,\"/attributes\"),{key:attributeForm.key,value:attributeForm.value},{headers:await getAuthHeaders()});showMessage('success',\"Attribute added to \".concat(resourceName));setAttributeForm({key:'',value:''});setEditingResource(null);fetchResources();// Refresh resources\n}catch(error){var _error$response5,_error$response5$data;console.error('Error adding attribute:',error);showMessage('error',((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message)||'Failed to add attribute');}finally{setLoading(false);}};const deleteResourceAttribute=async(resourceId,resourceName,attributeKey)=>{if(!window.confirm(\"Are you sure you want to delete attribute \\\"\".concat(attributeKey,\"\\\" from \").concat(resourceName,\"?\"))){return;}try{setLoading(true);await axios.delete(\"\".concat(API_BASE_URL,\"/resources/\").concat(resourceId,\"/attributes/\").concat(attributeKey),{headers:await getAuthHeaders()});showMessage('success',\"Attribute \\\"\".concat(attributeKey,\"\\\" deleted from \").concat(resourceName));fetchResources();// Refresh resources\n}catch(error){var _error$response6,_error$response6$data;console.error('Error deleting attribute:',error);showMessage('error',((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.message)||'Failed to delete attribute');}finally{setLoading(false);}};const startEditAttribute=(resourceId,key,value)=>{setEditingAttribute({resourceId,oldKey:key});setAttributeEditForm({key,value});};const cancelEditAttribute=()=>{setEditingAttribute(null);setAttributeEditForm({key:'',value:''});};const updateResourceAttribute=async(resourceId,resourceName)=>{if(!attributeEditForm.key||!attributeEditForm.value){showMessage('error','Both key and value are required');return;}try{setLoading(true);// Get current resource to access all attributes\nconst currentResource=resources.find(r=>r._id===resourceId);if(!currentResource){showMessage('error','Resource not found');return;}// Create updated attributes map\nconst updatedAttributes=_objectSpread({},currentResource.attributes);console.log('ðŸ” Current attributes before update:',currentResource.attributes);console.log('ðŸ” Editing attribute:',editingAttribute);console.log('ðŸ” Edit form data:',attributeEditForm);// If key changed, remove old key\nif(editingAttribute.oldKey!==attributeEditForm.key){delete updatedAttributes[editingAttribute.oldKey];}// Add/update the attribute - handle Keycloak's array format\n// Keycloak stores attributes as arrays, so we need to convert comma-separated values to array\nconst valueArray=attributeEditForm.value.split(',').map(v=>v.trim()).filter(v=>v.length>0);updatedAttributes[attributeEditForm.key]=valueArray;console.log('ðŸ” Updated attributes to send:',updatedAttributes);// Send PUT request with all attributes\nawait axios.put(\"\".concat(API_BASE_URL,\"/resources/\").concat(resourceId,\"/attributes\"),updatedAttributes,{headers:await getAuthHeaders()});showMessage('success',\"Attribute updated in \".concat(resourceName));setEditingAttribute(null);setAttributeEditForm({key:'',value:''});fetchResources();// Refresh resources\n}catch(error){var _error$response7,_error$response7$data;console.error('Error updating attribute:',error);showMessage('error',((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.message)||'Failed to update attribute');}finally{setLoading(false);}};// ============================== ROLE MANAGEMENT ==============================\nconst createRole=async e=>{e.preventDefault();setLoading(true);try{const response=await axios.post(\"\".concat(API_BASE_URL,\"/roles\"),roleForm,{headers:await getAuthHeaders()});showMessage('success',response.data.message||'Role created successfully');setRoleForm({name:'',description:''});fetchRoles();}catch(error){var _error$response8,_error$response8$data;showMessage('error','Failed to create role: '+(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.message)||error.message));}finally{setLoading(false);}};const deleteRole=async(roleId,roleName)=>{if(!window.confirm(\"Are you sure you want to delete role \\\"\".concat(roleName,\"\\\"? This action cannot be undone.\"))){return;}try{setLoading(true);await axios.delete(\"\".concat(API_BASE_URL,\"/roles/\").concat(roleId),{headers:await getAuthHeaders()});showMessage('success',\"Role \\\"\".concat(roleName,\"\\\" deleted successfully\"));fetchRoles();}catch(error){var _error$response9,_error$response9$data;showMessage('error','Failed to delete role: '+(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.message)||error.message));}finally{setLoading(false);}};// Process attributes to handle Keycloak's format where same key can have multiple values\nconst processResourceAttributes=attributes=>{if(!attributes)return{};const processed={};// Handle different attribute formats from Keycloak\nif(Array.isArray(attributes)){// If attributes is an array of objects with key/value pairs\nattributes.forEach(attr=>{if(attr.key&&attr.value){if(!processed[attr.key]){processed[attr.key]=[];}processed[attr.key].push(attr.value);}});}else if(typeof attributes==='object'){// If attributes is already a map\nObject.entries(attributes).forEach(_ref=>{let[key,value]=_ref;if(Array.isArray(value)){processed[key]=value;}else{processed[key]=[value];}});}return processed;};// ============================== AUTHORIZATION MANAGEMENT ==============================\nconst fetchResources=async()=>{setLoading(true);try{var _response$data$;const response=await axios.get(\"\".concat(API_BASE_URL,\"/resources\"),{headers:await getAuthHeaders()});console.log('ðŸ” Raw resources data:',response.data);console.log('ðŸ” First resource attributes:',(_response$data$=response.data[0])===null||_response$data$===void 0?void 0:_response$data$.attributes);// Process attributes for each resource\nconst processedResources=response.data.map(resource=>_objectSpread(_objectSpread({},resource),{},{attributes:processResourceAttributes(resource.attributes)}));console.log('ðŸ” Processed resources:',processedResources);setResources(processedResources);}catch(error){handleApiError(error,'Failed to fetch resources');}finally{setLoading(false);}};const fetchPolicies=async()=>{setLoading(true);try{const response=await axios.get(\"\".concat(API_BASE_URL,\"/policies\"),{headers:await getAuthHeaders()});setPolicies(response.data);}catch(error){handleApiError(error,'Failed to fetch policies');}finally{setLoading(false);}};const createPolicy=async e=>{e.preventDefault();setLoading(true);try{const response=await axios.post(\"\".concat(API_BASE_URL,\"/policies\"),policyForm,{headers:await getAuthHeaders()});showMessage('success',response.data.message||'Policy created successfully');setPolicyForm({name:'',description:'',roleName:'PROVIDER'});fetchPolicies();}catch(error){var _error$response0,_error$response0$data;showMessage('error','Failed to create policy: '+(((_error$response0=error.response)===null||_error$response0===void 0?void 0:(_error$response0$data=_error$response0.data)===null||_error$response0$data===void 0?void 0:_error$response0$data.message)||error.message));}finally{setLoading(false);}};const fetchPermissions=async()=>{setLoading(true);try{const response=await axios.get(\"\".concat(API_BASE_URL,\"/permissions\"),{headers:await getAuthHeaders()});setPermissions(response.data);}catch(error){handleApiError(error,'Failed to fetch permissions');}finally{setLoading(false);}};const createPermission=async e=>{e.preventDefault();setLoading(true);try{const response=await axios.post(\"\".concat(API_BASE_URL,\"/permissions\"),permissionForm,{headers:await getAuthHeaders()});showMessage('success',response.data.message||'Permission created successfully');setPermissionForm({name:'',description:'',resourceId:'',scopeIds:[],policyIds:[]});fetchPermissions();}catch(error){var _error$response1,_error$response1$data;showMessage('error','Failed to create permission: '+(((_error$response1=error.response)===null||_error$response1===void 0?void 0:(_error$response1$data=_error$response1.data)===null||_error$response1$data===void 0?void 0:_error$response1$data.message)||error.message));}finally{setLoading(false);}};// Load data based on active tab\nuseEffect(()=>{switch(activeTab){case'users':fetchUsers();fetchRoles();break;case'roles':fetchRoles();break;case'policies':fetchPolicies();fetchRoles();break;case'permissions':fetchPermissions();fetchResources();fetchPolicies();break;case'resources':fetchResources();break;default:break;}},[activeTab]);// ============================== RENDER ==============================\n// Show loading state while auth is initializing\nif(authLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"admin-container\",children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'50px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]})});}// Check if user has ADMIN role\nif(!user||!user.roles||!user.roles.includes('ADMIN')){var _user$roles;return/*#__PURE__*/_jsx(\"div\",{className:\"admin-container\",children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'50px'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDD12 Access Denied\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#e74c3c',fontSize:'1.2rem',marginBottom:'20px'},children:\"Administrator role required to access this page.\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"You need the \",/*#__PURE__*/_jsx(\"strong\",{children:\"ADMIN\"}),\" role to access the Keycloak Administration interface.\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'30px'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Current user:\"}),\" \",(user===null||user===void 0?void 0:user.username)||'Not logged in']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Current roles:\"}),\" \",(user===null||user===void 0?void 0:(_user$roles=user.roles)===null||_user$roles===void 0?void 0:_user$roles.join(', '))||'None']})]})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"admin-title\",children:\"\\uD83D\\uDD10 Keycloak Administration\"}),/*#__PURE__*/_jsx(\"p\",{className:\"admin-subtitle\",children:\"Manage users, roles, policies, and permissions without accessing Keycloak console\"}),message.text&&/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(message.type),children:message.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:activeTab==='users'?'tab active':'tab',onClick:()=>setActiveTab('users'),children:\"\\uD83D\\uDC65 Users\"}),/*#__PURE__*/_jsx(\"button\",{className:activeTab==='roles'?'tab active':'tab',onClick:()=>setActiveTab('roles'),children:\"\\uD83D\\uDC64 Roles\"}),/*#__PURE__*/_jsx(\"button\",{className:activeTab==='policies'?'tab active':'tab',onClick:()=>setActiveTab('policies'),children:\"\\uD83D\\uDCCB Policies\"}),/*#__PURE__*/_jsx(\"button\",{className:activeTab==='permissions'?'tab active':'tab',onClick:()=>setActiveTab('permissions'),children:\"\\uD83D\\uDD11 Permissions\"}),/*#__PURE__*/_jsx(\"button\",{className:activeTab==='resources'?'tab active':'tab',onClick:()=>setActiveTab('resources'),children:\"\\uD83D\\uDCE6 Resources\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[activeTab==='users'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create New User\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:createUser,className:\"admin-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userForm.username,onChange:e=>setUserForm(_objectSpread(_objectSpread({},userForm),{},{username:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:userForm.email,onChange:e=>setUserForm(_objectSpread(_objectSpread({},userForm),{},{email:e.target.value})),required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userForm.firstName,onChange:e=>setUserForm(_objectSpread(_objectSpread({},userForm),{},{firstName:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userForm.lastName,onChange:e=>setUserForm(_objectSpread(_objectSpread({},userForm),{},{lastName:e.target.value}))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:userForm.password,onChange:e=>setUserForm(_objectSpread(_objectSpread({},userForm),{},{password:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{value:userForm.role,onChange:e=>setUserForm(_objectSpread(_objectSpread({},userForm),{},{role:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a role\"}),roles.filter(role=>!role.name.startsWith('default-')&&!role.name.includes('uma_')&&!role.name.includes('offline_')).map(role=>/*#__PURE__*/_jsxs(\"option\",{value:role.name,children:[role.name,\" \",role.description?\"- \".concat(role.description):'']},role.id))]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:loading,children:loading?'Creating...':'Create User'})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Existing Users\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading users...\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"data-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Last Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Enabled\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.firstName||'-'}),/*#__PURE__*/_jsx(\"td\",{children:user.lastName||'-'}),/*#__PURE__*/_jsx(\"td\",{children:user.enabled?'âœ… Yes':'âŒ No'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteUser(user.id,user.username),className:\"btn-danger-small\",children:\"Delete\"})})]},user.id))})]})]}),activeTab==='roles'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create New Role\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:createRole,className:\"admin-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Role Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:roleForm.name,onChange:e=>setRoleForm(_objectSpread(_objectSpread({},roleForm),{},{name:e.target.value})),placeholder:\"e.g., MANAGER, SUPERVISOR\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:roleForm.description,onChange:e=>setRoleForm(_objectSpread(_objectSpread({},roleForm),{},{description:e.target.value})),placeholder:\"e.g., Manager role with full access\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:loading,children:loading?'Creating...':'Create Role'})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Existing Roles\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading roles...\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"data-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:roles.filter(role=>!role.name.startsWith('default-')&&!role.name.includes('uma_')&&!role.name.includes('offline_')).map(role=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:role.name})}),/*#__PURE__*/_jsx(\"td\",{children:role.description||'-'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteRole(role.id,role.name),className:\"btn-danger-small\",title:\"Delete role\",children:\"\\uD83D\\uDDD1\\uFE0F Delete\"})})]},role.id))})]})]}),activeTab==='policies'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create New Policy\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:createPolicy,className:\"admin-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Policy Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:policyForm.name,onChange:e=>setPolicyForm(_objectSpread(_objectSpread({},policyForm),{},{name:e.target.value})),placeholder:\"e.g., Recipient Read Policy\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:policyForm.description,onChange:e=>setPolicyForm(_objectSpread(_objectSpread({},policyForm),{},{description:e.target.value})),placeholder:\"e.g., Allows recipients to read timesheets\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Role *\"}),/*#__PURE__*/_jsx(\"select\",{value:policyForm.roleName,onChange:e=>setPolicyForm(_objectSpread(_objectSpread({},policyForm),{},{roleName:e.target.value})),children:roles.filter(r=>!r.name.startsWith('default-')).map(role=>/*#__PURE__*/_jsx(\"option\",{value:role.name,children:role.name},role.id))})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:loading,children:loading?'Creating...':'Create Policy'})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Existing Policies\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading policies...\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"data-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Logic\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:policies.map(policy=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:policy.name}),/*#__PURE__*/_jsx(\"td\",{children:policy.type}),/*#__PURE__*/_jsx(\"td\",{children:policy.description||'-'}),/*#__PURE__*/_jsx(\"td\",{children:policy.logic})]},policy.id))})]})]}),activeTab==='permissions'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create New Permission\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:createPermission,className:\"admin-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Permission Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:permissionForm.name,onChange:e=>setPermissionForm(_objectSpread(_objectSpread({},permissionForm),{},{name:e.target.value})),placeholder:\"e.g., Recipient Read Timesheets\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:permissionForm.description,onChange:e=>setPermissionForm(_objectSpread(_objectSpread({},permissionForm),{},{description:e.target.value})),placeholder:\"e.g., Allows recipients to read timesheet data\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Resource *\"}),/*#__PURE__*/_jsxs(\"select\",{value:permissionForm.resourceId,onChange:e=>setPermissionForm(_objectSpread(_objectSpread({},permissionForm),{},{resourceId:e.target.value})),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a resource\"}),resources.map(resource=>/*#__PURE__*/_jsx(\"option\",{value:resource._id,children:resource.name},resource._id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Scopes * (comma-separated scope IDs)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:permissionForm.scopeIds.join(','),onChange:e=>setPermissionForm(_objectSpread(_objectSpread({},permissionForm),{},{scopeIds:e.target.value.split(',').map(s=>s.trim()).filter(s=>s)})),placeholder:\"e.g., scope-id-1, scope-id-2\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Policies * (comma-separated policy IDs)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:permissionForm.policyIds.join(','),onChange:e=>setPermissionForm(_objectSpread(_objectSpread({},permissionForm),{},{policyIds:e.target.value.split(',').map(s=>s.trim()).filter(s=>s)})),placeholder:\"e.g., policy-id-1, policy-id-2\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:loading,children:loading?'Creating...':'Create Permission'})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Existing Permissions\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading permissions...\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"data-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Decision Strategy\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:permissions.map(permission=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:permission.name}),/*#__PURE__*/_jsx(\"td\",{children:permission.type}),/*#__PURE__*/_jsx(\"td\",{children:permission.description||'-'}),/*#__PURE__*/_jsx(\"td\",{children:permission.decisionStrategy})]},permission.id))})]})]}),activeTab==='resources'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Resources & Attributes\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading resources...\"}):/*#__PURE__*/_jsx(\"div\",{children:resources.map(resource=>{var _resource$uris;return/*#__PURE__*/_jsxs(\"div\",{className:\"resource-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:resource.name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Type:\"}),\" \",resource.type||'-']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"URIs:\"}),\" \",((_resource$uris=resource.uris)===null||_resource$uris===void 0?void 0:_resource$uris.join(', '))||'-']}),resource.scopes&&resource.scopes.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Scopes:\"}),/*#__PURE__*/_jsx(\"ul\",{children:resource.scopes.map(scope=>/*#__PURE__*/_jsxs(\"li\",{children:[scope.name,\" (ID: \",scope.id,\")\"]},scope.id))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Attributes:\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingResource(resource._id);setAttributeForm({key:'',value:''});},className:\"btn-primary-small\",style:{fontSize:'12px',padding:'5px 10px'},children:\"\\u2795 Add Attribute\"})]}),editingResource===resource._id&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',padding:'15px',backgroundColor:'#f0f8ff',border:'1px solid #ccc',borderRadius:'5px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{marginTop:0},children:\"Add New Attribute\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',alignItems:'flex-end'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontWeight:'bold'},children:\"Attribute Key *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:attributeForm.key,onChange:e=>setAttributeForm(_objectSpread(_objectSpread({},attributeForm),{},{key:e.target.value})),placeholder:\"e.g., recipient_read_fields\",style:{width:'100%',padding:'8px',border:'1px solid #ccc',borderRadius:'4px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontWeight:'bold'},children:\"Attribute Value *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:attributeForm.value,onChange:e=>setAttributeForm(_objectSpread(_objectSpread({},attributeForm),{},{value:e.target.value})),placeholder:\"e.g., id,date,hours\",style:{width:'100%',padding:'8px',border:'1px solid #ccc',borderRadius:'4px'}})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addResourceAttribute(resource._id,resource.name),className:\"btn-primary\",disabled:loading||!attributeForm.key||!attributeForm.value,style:{padding:'8px 15px'},children:\"Add\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingResource(null);setAttributeForm({key:'',value:''});},className:\"btn-secondary\",style:{padding:'8px 15px'},children:\"Cancel\"})]}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'12px',color:'#666',marginTop:'10px',marginBottom:0},children:[\"\\uD83D\\uDCA1 Tip: For field-level authorization, use format: \",/*#__PURE__*/_jsx(\"code\",{children:\"role_scope_fields\"}),\" (e.g., recipient_read_fields)\"]})]}),resource.attributes&&Object.keys(resource.attributes).length>0?/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',marginTop:'10px',borderCollapse:'collapse',fontSize:'14px'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:'#f5f5f5'},children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'10px',textAlign:'left',borderBottom:'2px solid #ddd',width:'30%'},children:\"Key\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'10px',textAlign:'left',borderBottom:'2px solid #ddd',width:'55%'},children:\"Value\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'10px',textAlign:'center',borderBottom:'2px solid #ddd',width:'15%'},children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Object.entries(resource.attributes).map(_ref2=>{let[key,value]=_ref2;const isEditing=(editingAttribute===null||editingAttribute===void 0?void 0:editingAttribute.resourceId)===resource._id&&(editingAttribute===null||editingAttribute===void 0?void 0:editingAttribute.oldKey)===key;return/*#__PURE__*/_jsx(\"tr\",{style:{borderBottom:'1px solid #eee'},children:isEditing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'10px'},children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:attributeEditForm.key,onChange:e=>setAttributeEditForm(_objectSpread(_objectSpread({},attributeEditForm),{},{key:e.target.value})),placeholder:\"Attribute key\",style:{width:'100%',padding:'5px'}})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'10px'},children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:attributeEditForm.value,onChange:e=>setAttributeEditForm(_objectSpread(_objectSpread({},attributeEditForm),{},{value:e.target.value})),placeholder:\"Attribute value\",style:{width:'100%',padding:'5px'}})}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'10px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateResourceAttribute(resource._id,resource.name),className:\"btn-primary-small\",style:{marginRight:'8px',fontSize:'12px',padding:'6px 12px',backgroundColor:'#28a745',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},title:\"Save changes\",children:\"\\u2705 Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelEditAttribute,className:\"btn-secondary-small\",style:{fontSize:'12px',padding:'6px 12px',backgroundColor:'#6c757d',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},title:\"Cancel editing\",children:\"\\u274C Cancel\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'10px'},children:/*#__PURE__*/_jsx(\"strong\",{children:key})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'10px',fontFamily:'monospace',color:'#0066cc'},children:Array.isArray(value)?value.join(', '):value}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'10px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEditAttribute(resource._id,key,Array.isArray(value)?value.join(', '):value),className:\"btn-secondary-small\",style:{marginRight:'8px',fontSize:'12px',padding:'6px 12px',backgroundColor:'#6c757d',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},title:\"Edit attribute\",children:\"\\u270F\\uFE0F Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteResourceAttribute(resource._id,resource.name,key),className:\"btn-danger-small\",style:{fontSize:'12px',padding:'6px 12px',backgroundColor:'#dc3545',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},title:\"Delete attribute\",children:\"\\uD83D\\uDDD1\\uFE0F Delete\"})]})]})},key);})})]}):/*#__PURE__*/_jsx(\"p\",{style:{color:'#666',fontStyle:'italic',marginTop:'10px',padding:'10px',backgroundColor:'#f9f9f9',borderRadius:'4px'},children:\"No attributes defined. Click \\\"Add Attribute\\\" to add field-level authorization rules.\"})]})]},resource._id);})})]})]})]});};export default KeycloakAdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE_URL","KeycloakAdminDashboard","user","refreshTokenIfNeeded","loading","authLoading","activeTab","setActiveTab","users","setUsers","roles","setRoles","resources","setResources","policies","setPolicies","permissions","setPermissions","setLoading","message","setMessage","type","text","userForm","setUserForm","username","email","password","firstName","lastName","role","policyForm","setPolicyForm","name","description","roleName","permissionForm","setPermissionForm","resourceId","scopeIds","policyIds","editingResource","setEditingResource","attributeForm","setAttributeForm","key","value","editingAttribute","setEditingAttribute","attributeEditForm","setAttributeEditForm","roleForm","setRoleForm","getAuthHeaders","token","concat","showMessage","setTimeout","handleApiError","error","defaultMessage","_error$response","_error$response2","_error$response2$data","response","status","data","fetchUsers","get","headers","createUser","e","preventDefault","post","_error$response3","_error$response3$data","deleteUser","userId","window","confirm","delete","_error$response4","_error$response4$data","fetchRoles","addResourceAttribute","resourceName","fetchResources","_error$response5","_error$response5$data","console","deleteResourceAttribute","attributeKey","_error$response6","_error$response6$data","startEditAttribute","oldKey","cancelEditAttribute","updateResourceAttribute","currentResource","find","r","_id","updatedAttributes","_objectSpread","attributes","log","valueArray","split","map","v","trim","filter","length","put","_error$response7","_error$response7$data","createRole","_error$response8","_error$response8$data","deleteRole","roleId","_error$response9","_error$response9$data","processResourceAttributes","processed","Array","isArray","forEach","attr","push","Object","entries","_ref","_response$data$","processedResources","resource","fetchPolicies","createPolicy","_error$response0","_error$response0$data","fetchPermissions","createPermission","_error$response1","_error$response1$data","className","children","style","textAlign","padding","includes","_user$roles","color","fontSize","marginBottom","marginTop","join","onClick","onSubmit","onChange","target","required","startsWith","id","disabled","enabled","placeholder","title","policy","logic","s","permission","decisionStrategy","_resource$uris","uris","scopes","scope","display","justifyContent","alignItems","backgroundColor","border","borderRadius","gap","flex","fontWeight","width","keys","borderCollapse","borderBottom","_ref2","isEditing","marginRight","cursor","fontFamily","fontStyle"],"sources":["/Users/sajeev/Documents/cmips-security/cmipsapplication/frontend/src/components/KeycloakAdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useAuth } from '../contexts/AuthContext';\nimport './AdminDashboard.css';\n\nconst API_BASE_URL = 'http://localhost:8081/api/admin/keycloak';\n\n/**\n * Keycloak Admin Dashboard\n * User-friendly interface for managing Keycloak without accessing the admin console\n */\nconst KeycloakAdminDashboard = () => {\n  const { user, refreshTokenIfNeeded, loading: authLoading } = useAuth();\n  const [activeTab, setActiveTab] = useState('users');\n  const [users, setUsers] = useState([]);\n  const [roles, setRoles] = useState([]);\n  const [resources, setResources] = useState([]);\n  const [policies, setPolicies] = useState([]);\n  const [permissions, setPermissions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState({ type: '', text: '' });\n\n  // User form state\n  const [userForm, setUserForm] = useState({\n    username: '',\n    email: '',\n    password: '',\n    firstName: '',\n    lastName: '',\n    role: ''\n  });\n\n  // Policy form state\n  const [policyForm, setPolicyForm] = useState({\n    name: '',\n    description: '',\n    roleName: 'PROVIDER'\n  });\n\n  // Permission form state\n  const [permissionForm, setPermissionForm] = useState({\n    name: '',\n    description: '',\n    resourceId: '',\n    scopeIds: [],\n    policyIds: []\n  });\n\n  // State for editing resource attributes\n  const [editingResource, setEditingResource] = useState(null);\n  const [attributeForm, setAttributeForm] = useState({\n    key: '',\n    value: ''\n  });\n  const [editingAttribute, setEditingAttribute] = useState(null); // { resourceId, oldKey, key, value }\n  const [attributeEditForm, setAttributeEditForm] = useState({\n    key: '',\n    value: ''\n  });\n\n  // Role form state\n  const [roleForm, setRoleForm] = useState({\n    name: '',\n    description: ''\n  });\n\n  const getAuthHeaders = async () => {\n    // Admin endpoints now require user authentication with ADMIN role\n    const token = await refreshTokenIfNeeded();\n    return {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    };\n  };\n\n  const showMessage = (type, text) => {\n    setMessage({ type, text });\n    setTimeout(() => setMessage({ type: '', text: '' }), 5000);\n  };\n\n  const handleApiError = (error, defaultMessage) => {\n    if (error.response?.status === 401) {\n      showMessage('error', 'Session expired. Please login again.');\n      // Don't show the default message for 401 errors\n      return;\n    }\n    showMessage('error', defaultMessage + ': ' + (error.response?.data?.message || error.message));\n  };\n\n  // ============================== USER MANAGEMENT ==============================\n\n  const fetchUsers = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/users`, {\n        headers: await getAuthHeaders()\n      });\n      setUsers(response.data);\n    } catch (error) {\n      handleApiError(error, 'Failed to fetch users');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const createUser = async (e) => {\n    e.preventDefault();\n    \n    // Validate that a role is selected\n    if (!userForm.role) {\n      showMessage('error', 'Please select a role for the user');\n      return;\n    }\n    \n    setLoading(true);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/users`, userForm, {\n        headers: await getAuthHeaders()\n      });\n      showMessage('success', response.data.message || 'User created successfully');\n      setUserForm({\n        username: '',\n        email: '',\n        password: '',\n        firstName: '',\n        lastName: '',\n        role: ''\n      });\n      fetchUsers();\n    } catch (error) {\n      showMessage('error', 'Failed to create user: ' + (error.response?.data?.message || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteUser = async (userId, username) => {\n    if (!window.confirm(`Are you sure you want to delete user: ${username}?`)) {\n      return;\n    }\n    \n    setLoading(true);\n    try {\n      await axios.delete(`${API_BASE_URL}/users/${userId}`, {\n        headers: await getAuthHeaders()\n      });\n      showMessage('success', 'User deleted successfully');\n      fetchUsers();\n    } catch (error) {\n      showMessage('error', 'Failed to delete user: ' + (error.response?.data?.message || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ============================== ROLE MANAGEMENT ==============================\n\n  const fetchRoles = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/roles`, {\n        headers: await getAuthHeaders()\n      });\n      setRoles(response.data);\n    } catch (error) {\n      handleApiError(error, 'Failed to fetch roles');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ============================== RESOURCE ATTRIBUTE MANAGEMENT ==============================\n\n  const addResourceAttribute = async (resourceId, resourceName) => {\n    if (!attributeForm.key || !attributeForm.value) {\n      showMessage('error', 'Both key and value are required');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const response = await axios.post(\n        `${API_BASE_URL}/resources/${resourceId}/attributes`,\n        {\n          key: attributeForm.key,\n          value: attributeForm.value\n        },\n        { headers: await getAuthHeaders() }\n      );\n\n      showMessage('success', `Attribute added to ${resourceName}`);\n      setAttributeForm({ key: '', value: '' });\n      setEditingResource(null);\n      fetchResources(); // Refresh resources\n    } catch (error) {\n      console.error('Error adding attribute:', error);\n      showMessage('error', error.response?.data?.message || 'Failed to add attribute');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteResourceAttribute = async (resourceId, resourceName, attributeKey) => {\n    if (!window.confirm(`Are you sure you want to delete attribute \"${attributeKey}\" from ${resourceName}?`)) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n      await axios.delete(\n        `${API_BASE_URL}/resources/${resourceId}/attributes/${attributeKey}`,\n        { headers: await getAuthHeaders() }\n      );\n\n      showMessage('success', `Attribute \"${attributeKey}\" deleted from ${resourceName}`);\n      fetchResources(); // Refresh resources\n    } catch (error) {\n      console.error('Error deleting attribute:', error);\n      showMessage('error', error.response?.data?.message || 'Failed to delete attribute');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const startEditAttribute = (resourceId, key, value) => {\n    setEditingAttribute({ resourceId, oldKey: key });\n    setAttributeEditForm({ key, value });\n  };\n\n  const cancelEditAttribute = () => {\n    setEditingAttribute(null);\n    setAttributeEditForm({ key: '', value: '' });\n  };\n\n  const updateResourceAttribute = async (resourceId, resourceName) => {\n    if (!attributeEditForm.key || !attributeEditForm.value) {\n      showMessage('error', 'Both key and value are required');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      \n      // Get current resource to access all attributes\n      const currentResource = resources.find(r => r._id === resourceId);\n      if (!currentResource) {\n        showMessage('error', 'Resource not found');\n        return;\n      }\n      \n      // Create updated attributes map\n      const updatedAttributes = { ...currentResource.attributes };\n      \n      console.log('ðŸ” Current attributes before update:', currentResource.attributes);\n      console.log('ðŸ” Editing attribute:', editingAttribute);\n      console.log('ðŸ” Edit form data:', attributeEditForm);\n      \n      // If key changed, remove old key\n      if (editingAttribute.oldKey !== attributeEditForm.key) {\n        delete updatedAttributes[editingAttribute.oldKey];\n      }\n      \n      // Add/update the attribute - handle Keycloak's array format\n      // Keycloak stores attributes as arrays, so we need to convert comma-separated values to array\n      const valueArray = attributeEditForm.value.split(',').map(v => v.trim()).filter(v => v.length > 0);\n      updatedAttributes[attributeEditForm.key] = valueArray;\n      \n      console.log('ðŸ” Updated attributes to send:', updatedAttributes);\n      \n      // Send PUT request with all attributes\n      await axios.put(\n        `${API_BASE_URL}/resources/${resourceId}/attributes`,\n        updatedAttributes,\n        { headers: await getAuthHeaders() }\n      );\n\n      showMessage('success', `Attribute updated in ${resourceName}`);\n      setEditingAttribute(null);\n      setAttributeEditForm({ key: '', value: '' });\n      fetchResources(); // Refresh resources\n    } catch (error) {\n      console.error('Error updating attribute:', error);\n      showMessage('error', error.response?.data?.message || 'Failed to update attribute');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ============================== ROLE MANAGEMENT ==============================\n\n  const createRole = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/roles`, roleForm, {\n        headers: await getAuthHeaders()\n      });\n      showMessage('success', response.data.message || 'Role created successfully');\n      setRoleForm({\n        name: '',\n        description: ''\n      });\n      fetchRoles();\n    } catch (error) {\n      showMessage('error', 'Failed to create role: ' + (error.response?.data?.message || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteRole = async (roleId, roleName) => {\n    if (!window.confirm(`Are you sure you want to delete role \"${roleName}\"? This action cannot be undone.`)) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n      await axios.delete(`${API_BASE_URL}/roles/${roleId}`, {\n        headers: await getAuthHeaders()\n      });\n\n      showMessage('success', `Role \"${roleName}\" deleted successfully`);\n      fetchRoles();\n    } catch (error) {\n      showMessage('error', 'Failed to delete role: ' + (error.response?.data?.message || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Process attributes to handle Keycloak's format where same key can have multiple values\n  const processResourceAttributes = (attributes) => {\n    if (!attributes) return {};\n    \n    const processed = {};\n    \n    // Handle different attribute formats from Keycloak\n    if (Array.isArray(attributes)) {\n      // If attributes is an array of objects with key/value pairs\n      attributes.forEach(attr => {\n        if (attr.key && attr.value) {\n          if (!processed[attr.key]) {\n            processed[attr.key] = [];\n          }\n          processed[attr.key].push(attr.value);\n        }\n      });\n    } else if (typeof attributes === 'object') {\n      // If attributes is already a map\n      Object.entries(attributes).forEach(([key, value]) => {\n        if (Array.isArray(value)) {\n          processed[key] = value;\n        } else {\n          processed[key] = [value];\n        }\n      });\n    }\n    \n    return processed;\n  };\n\n  // ============================== AUTHORIZATION MANAGEMENT ==============================\n\n  const fetchResources = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/resources`, {\n        headers: await getAuthHeaders()\n      });\n      console.log('ðŸ” Raw resources data:', response.data);\n      console.log('ðŸ” First resource attributes:', response.data[0]?.attributes);\n      \n      // Process attributes for each resource\n      const processedResources = response.data.map(resource => ({\n        ...resource,\n        attributes: processResourceAttributes(resource.attributes)\n      }));\n      \n      console.log('ðŸ” Processed resources:', processedResources);\n      setResources(processedResources);\n    } catch (error) {\n      handleApiError(error, 'Failed to fetch resources');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchPolicies = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/policies`, {\n        headers: await getAuthHeaders()\n      });\n      setPolicies(response.data);\n    } catch (error) {\n      handleApiError(error, 'Failed to fetch policies');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const createPolicy = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/policies`, policyForm, {\n        headers: await getAuthHeaders()\n      });\n      showMessage('success', response.data.message || 'Policy created successfully');\n      setPolicyForm({\n        name: '',\n        description: '',\n        roleName: 'PROVIDER'\n      });\n      fetchPolicies();\n    } catch (error) {\n      showMessage('error', 'Failed to create policy: ' + (error.response?.data?.message || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchPermissions = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/permissions`, {\n        headers: await getAuthHeaders()\n      });\n      setPermissions(response.data);\n    } catch (error) {\n      handleApiError(error, 'Failed to fetch permissions');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const createPermission = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/permissions`, permissionForm, {\n        headers: await getAuthHeaders()\n      });\n      showMessage('success', response.data.message || 'Permission created successfully');\n      setPermissionForm({\n        name: '',\n        description: '',\n        resourceId: '',\n        scopeIds: [],\n        policyIds: []\n      });\n      fetchPermissions();\n    } catch (error) {\n      showMessage('error', 'Failed to create permission: ' + (error.response?.data?.message || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Load data based on active tab\n  useEffect(() => {\n    switch (activeTab) {\n      case 'users':\n        fetchUsers();\n        fetchRoles();\n        break;\n      case 'roles':\n        fetchRoles();\n        break;\n      case 'policies':\n        fetchPolicies();\n        fetchRoles();\n        break;\n      case 'permissions':\n        fetchPermissions();\n        fetchResources();\n        fetchPolicies();\n        break;\n      case 'resources':\n        fetchResources();\n        break;\n      default:\n        break;\n    }\n  }, [activeTab]);\n\n  // ============================== RENDER ==============================\n\n  // Show loading state while auth is initializing\n  if (authLoading) {\n    return (\n      <div className=\"admin-container\">\n        <div style={{ textAlign: 'center', padding: '50px' }}>\n          <div className=\"spinner\"></div>\n          <p>Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Check if user has ADMIN role\n  if (!user || !user.roles || !user.roles.includes('ADMIN')) {\n    return (\n      <div className=\"admin-container\">\n        <div style={{ textAlign: 'center', padding: '50px' }}>\n          <h1>ðŸ”’ Access Denied</h1>\n          <p style={{ color: '#e74c3c', fontSize: '1.2rem', marginBottom: '20px' }}>\n            Administrator role required to access this page.\n          </p>\n          <p>\n            You need the <strong>ADMIN</strong> role to access the Keycloak Administration interface.\n          </p>\n          <div style={{ marginTop: '30px' }}>\n            <p><strong>Current user:</strong> {user?.username || 'Not logged in'}</p>\n            <p><strong>Current roles:</strong> {user?.roles?.join(', ') || 'None'}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"admin-container\">\n      <h1 className=\"admin-title\">ðŸ” Keycloak Administration</h1>\n      <p className=\"admin-subtitle\">Manage users, roles, policies, and permissions without accessing Keycloak console</p>\n\n      {message.text && (\n        <div className={`message ${message.type}`}>\n          {message.text}\n        </div>\n      )}\n\n      <div className=\"tabs\">\n        <button\n          className={activeTab === 'users' ? 'tab active' : 'tab'}\n          onClick={() => setActiveTab('users')}\n        >\n          ðŸ‘¥ Users\n        </button>\n        <button\n          className={activeTab === 'roles' ? 'tab active' : 'tab'}\n          onClick={() => setActiveTab('roles')}\n        >\n          ðŸ‘¤ Roles\n        </button>\n        <button\n          className={activeTab === 'policies' ? 'tab active' : 'tab'}\n          onClick={() => setActiveTab('policies')}\n        >\n          ðŸ“‹ Policies\n        </button>\n        <button\n          className={activeTab === 'permissions' ? 'tab active' : 'tab'}\n          onClick={() => setActiveTab('permissions')}\n        >\n          ðŸ”‘ Permissions\n        </button>\n        <button\n          className={activeTab === 'resources' ? 'tab active' : 'tab'}\n          onClick={() => setActiveTab('resources')}\n        >\n          ðŸ“¦ Resources\n        </button>\n      </div>\n\n      <div className=\"tab-content\">\n        {/* ============================== USERS TAB ============================== */}\n        {activeTab === 'users' && (\n          <div>\n            <h2>Create New User</h2>\n            <form onSubmit={createUser} className=\"admin-form\">\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>Username *</label>\n                  <input\n                    type=\"text\"\n                    value={userForm.username}\n                    onChange={(e) => setUserForm({ ...userForm, username: e.target.value })}\n                    required\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label>Email *</label>\n                  <input\n                    type=\"email\"\n                    value={userForm.email}\n                    onChange={(e) => setUserForm({ ...userForm, email: e.target.value })}\n                    required\n                  />\n                </div>\n              </div>\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>First Name</label>\n                  <input\n                    type=\"text\"\n                    value={userForm.firstName}\n                    onChange={(e) => setUserForm({ ...userForm, firstName: e.target.value })}\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label>Last Name</label>\n                  <input\n                    type=\"text\"\n                    value={userForm.lastName}\n                    onChange={(e) => setUserForm({ ...userForm, lastName: e.target.value })}\n                  />\n                </div>\n              </div>\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>Password *</label>\n                  <input\n                    type=\"password\"\n                    value={userForm.password}\n                    onChange={(e) => setUserForm({ ...userForm, password: e.target.value })}\n                    required\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label>Role</label>\n                  <select\n                    value={userForm.role}\n                    onChange={(e) => setUserForm({ ...userForm, role: e.target.value })}\n                  >\n                    <option value=\"\">Select a role</option>\n                    {roles.filter(role => !role.name.startsWith('default-') && !role.name.includes('uma_') && !role.name.includes('offline_')).map((role) => (\n                      <option key={role.id} value={role.name}>\n                        {role.name} {role.description ? `- ${role.description}` : ''}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n              <button type=\"submit\" className=\"btn-primary\" disabled={loading}>\n                {loading ? 'Creating...' : 'Create User'}\n              </button>\n            </form>\n\n            <h2>Existing Users</h2>\n            {loading ? (\n              <p>Loading users...</p>\n            ) : (\n              <table className=\"data-table\">\n                <thead>\n                  <tr>\n                    <th>Username</th>\n                    <th>Email</th>\n                    <th>First Name</th>\n                    <th>Last Name</th>\n                    <th>Enabled</th>\n                    <th>Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {users.map((user) => (\n                    <tr key={user.id}>\n                      <td>{user.username}</td>\n                      <td>{user.email}</td>\n                      <td>{user.firstName || '-'}</td>\n                      <td>{user.lastName || '-'}</td>\n                      <td>{user.enabled ? 'âœ… Yes' : 'âŒ No'}</td>\n                      <td>\n                        <button\n                          onClick={() => deleteUser(user.id, user.username)}\n                          className=\"btn-danger-small\"\n                        >\n                          Delete\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            )}\n          </div>\n        )}\n\n        {/* ============================== ROLES TAB ============================== */}\n        {activeTab === 'roles' && (\n          <div>\n            <h2>Create New Role</h2>\n            <form onSubmit={createRole} className=\"admin-form\">\n              <div className=\"form-group\">\n                <label>Role Name *</label>\n                <input\n                  type=\"text\"\n                  value={roleForm.name}\n                  onChange={(e) => setRoleForm({ ...roleForm, name: e.target.value })}\n                  placeholder=\"e.g., MANAGER, SUPERVISOR\"\n                  required\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>Description</label>\n                <input\n                  type=\"text\"\n                  value={roleForm.description}\n                  onChange={(e) => setRoleForm({ ...roleForm, description: e.target.value })}\n                  placeholder=\"e.g., Manager role with full access\"\n                />\n              </div>\n              <button type=\"submit\" className=\"btn-primary\" disabled={loading}>\n                {loading ? 'Creating...' : 'Create Role'}\n              </button>\n            </form>\n\n            <h2>Existing Roles</h2>\n            {loading ? (\n              <p>Loading roles...</p>\n            ) : (\n              <table className=\"data-table\">\n                <thead>\n                  <tr>\n                    <th>Name</th>\n                    <th>Description</th>\n                    <th>Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {roles.filter(role => !role.name.startsWith('default-') && !role.name.includes('uma_') && !role.name.includes('offline_')).map((role) => (\n                    <tr key={role.id}>\n                      <td><strong>{role.name}</strong></td>\n                      <td>{role.description || '-'}</td>\n                      <td>\n                        <button\n                          onClick={() => deleteRole(role.id, role.name)}\n                          className=\"btn-danger-small\"\n                          title=\"Delete role\"\n                        >\n                          ðŸ—‘ï¸ Delete\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            )}\n          </div>\n        )}\n\n        {/* ============================== POLICIES TAB ============================== */}\n        {activeTab === 'policies' && (\n          <div>\n            <h2>Create New Policy</h2>\n            <form onSubmit={createPolicy} className=\"admin-form\">\n              <div className=\"form-group\">\n                <label>Policy Name *</label>\n                <input\n                  type=\"text\"\n                  value={policyForm.name}\n                  onChange={(e) => setPolicyForm({ ...policyForm, name: e.target.value })}\n                  placeholder=\"e.g., Recipient Read Policy\"\n                  required\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>Description</label>\n                <input\n                  type=\"text\"\n                  value={policyForm.description}\n                  onChange={(e) => setPolicyForm({ ...policyForm, description: e.target.value })}\n                  placeholder=\"e.g., Allows recipients to read timesheets\"\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>Role *</label>\n                <select\n                  value={policyForm.roleName}\n                  onChange={(e) => setPolicyForm({ ...policyForm, roleName: e.target.value })}\n                >\n                  {roles.filter(r => !r.name.startsWith('default-')).map((role) => (\n                    <option key={role.id} value={role.name}>\n                      {role.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              <button type=\"submit\" className=\"btn-primary\" disabled={loading}>\n                {loading ? 'Creating...' : 'Create Policy'}\n              </button>\n            </form>\n\n            <h2>Existing Policies</h2>\n            {loading ? (\n              <p>Loading policies...</p>\n            ) : (\n              <table className=\"data-table\">\n                <thead>\n                  <tr>\n                    <th>Name</th>\n                    <th>Type</th>\n                    <th>Description</th>\n                    <th>Logic</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {policies.map((policy) => (\n                    <tr key={policy.id}>\n                      <td>{policy.name}</td>\n                      <td>{policy.type}</td>\n                      <td>{policy.description || '-'}</td>\n                      <td>{policy.logic}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            )}\n          </div>\n        )}\n\n        {/* ============================== PERMISSIONS TAB ============================== */}\n        {activeTab === 'permissions' && (\n          <div>\n            <h2>Create New Permission</h2>\n            <form onSubmit={createPermission} className=\"admin-form\">\n              <div className=\"form-group\">\n                <label>Permission Name *</label>\n                <input\n                  type=\"text\"\n                  value={permissionForm.name}\n                  onChange={(e) => setPermissionForm({ ...permissionForm, name: e.target.value })}\n                  placeholder=\"e.g., Recipient Read Timesheets\"\n                  required\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>Description</label>\n                <input\n                  type=\"text\"\n                  value={permissionForm.description}\n                  onChange={(e) => setPermissionForm({ ...permissionForm, description: e.target.value })}\n                  placeholder=\"e.g., Allows recipients to read timesheet data\"\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>Resource *</label>\n                <select\n                  value={permissionForm.resourceId}\n                  onChange={(e) => setPermissionForm({ ...permissionForm, resourceId: e.target.value })}\n                  required\n                >\n                  <option value=\"\">Select a resource</option>\n                  {resources.map((resource) => (\n                    <option key={resource._id} value={resource._id}>\n                      {resource.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              <div className=\"form-group\">\n                <label>Scopes * (comma-separated scope IDs)</label>\n                <input\n                  type=\"text\"\n                  value={permissionForm.scopeIds.join(',')}\n                  onChange={(e) => setPermissionForm({ \n                    ...permissionForm, \n                    scopeIds: e.target.value.split(',').map(s => s.trim()).filter(s => s) \n                  })}\n                  placeholder=\"e.g., scope-id-1, scope-id-2\"\n                  required\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>Policies * (comma-separated policy IDs)</label>\n                <input\n                  type=\"text\"\n                  value={permissionForm.policyIds.join(',')}\n                  onChange={(e) => setPermissionForm({ \n                    ...permissionForm, \n                    policyIds: e.target.value.split(',').map(s => s.trim()).filter(s => s) \n                  })}\n                  placeholder=\"e.g., policy-id-1, policy-id-2\"\n                  required\n                />\n              </div>\n              <button type=\"submit\" className=\"btn-primary\" disabled={loading}>\n                {loading ? 'Creating...' : 'Create Permission'}\n              </button>\n            </form>\n\n            <h2>Existing Permissions</h2>\n            {loading ? (\n              <p>Loading permissions...</p>\n            ) : (\n              <table className=\"data-table\">\n                <thead>\n                  <tr>\n                    <th>Name</th>\n                    <th>Type</th>\n                    <th>Description</th>\n                    <th>Decision Strategy</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {permissions.map((permission) => (\n                    <tr key={permission.id}>\n                      <td>{permission.name}</td>\n                      <td>{permission.type}</td>\n                      <td>{permission.description || '-'}</td>\n                      <td>{permission.decisionStrategy}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            )}\n          </div>\n        )}\n\n        {/* ============================== RESOURCES TAB ============================== */}\n        {activeTab === 'resources' && (\n          <div>\n            <h2>Resources & Attributes</h2>\n            {loading ? (\n              <p>Loading resources...</p>\n            ) : (\n              <div>\n                {resources.map((resource) => (\n                  <div key={resource._id} className=\"resource-card\">\n                    <h3>{resource.name}</h3>\n                    <p><strong>Type:</strong> {resource.type || '-'}</p>\n                    <p><strong>URIs:</strong> {resource.uris?.join(', ') || '-'}</p>\n                    \n                    {resource.scopes && resource.scopes.length > 0 && (\n                      <div style={{ marginTop: '10px' }}>\n                        <strong>Scopes:</strong>\n                        <ul>\n                          {resource.scopes.map((scope) => (\n                            <li key={scope.id}>{scope.name} (ID: {scope.id})</li>\n                          ))}\n                        </ul>\n                      </div>\n                    )}\n\n                    <div style={{ marginTop: '15px' }}>\n                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                        <strong>Attributes:</strong>\n                        <button\n                          onClick={() => {\n                            setEditingResource(resource._id);\n                            setAttributeForm({ key: '', value: '' });\n                          }}\n                          className=\"btn-primary-small\"\n                          style={{ fontSize: '12px', padding: '5px 10px' }}\n                        >\n                          âž• Add Attribute\n                        </button>\n                      </div>\n\n                      {editingResource === resource._id && (\n                        <div style={{ \n                          marginTop: '10px', \n                          padding: '15px', \n                          backgroundColor: '#f0f8ff',\n                          border: '1px solid #ccc',\n                          borderRadius: '5px'\n                        }}>\n                          <h4 style={{ marginTop: 0 }}>Add New Attribute</h4>\n                          <div style={{ display: 'flex', gap: '10px', alignItems: 'flex-end' }}>\n                            <div style={{ flex: 1 }}>\n                              <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>\n                                Attribute Key *\n                              </label>\n                              <input\n                                type=\"text\"\n                                value={attributeForm.key}\n                                onChange={(e) => setAttributeForm({ ...attributeForm, key: e.target.value })}\n                                placeholder=\"e.g., recipient_read_fields\"\n                                style={{ width: '100%', padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\n                              />\n                            </div>\n                            <div style={{ flex: 1 }}>\n                              <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>\n                                Attribute Value *\n                              </label>\n                              <input\n                                type=\"text\"\n                                value={attributeForm.value}\n                                onChange={(e) => setAttributeForm({ ...attributeForm, value: e.target.value })}\n                                placeholder=\"e.g., id,date,hours\"\n                                style={{ width: '100%', padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\n                              />\n                            </div>\n                            <button\n                              onClick={() => addResourceAttribute(resource._id, resource.name)}\n                              className=\"btn-primary\"\n                              disabled={loading || !attributeForm.key || !attributeForm.value}\n                              style={{ padding: '8px 15px' }}\n                            >\n                              Add\n                            </button>\n                            <button\n                              onClick={() => {\n                                setEditingResource(null);\n                                setAttributeForm({ key: '', value: '' });\n                              }}\n                              className=\"btn-secondary\"\n                              style={{ padding: '8px 15px' }}\n                            >\n                              Cancel\n                            </button>\n                          </div>\n                          <p style={{ fontSize: '12px', color: '#666', marginTop: '10px', marginBottom: 0 }}>\n                            ðŸ’¡ Tip: For field-level authorization, use format: <code>role_scope_fields</code> (e.g., recipient_read_fields)\n                          </p>\n                        </div>\n                      )}\n\n                      {resource.attributes && Object.keys(resource.attributes).length > 0 ? (\n                        <table style={{ \n                          width: '100%', \n                          marginTop: '10px', \n                          borderCollapse: 'collapse',\n                          fontSize: '14px'\n                        }}>\n                          <thead>\n                            <tr style={{ backgroundColor: '#f5f5f5' }}>\n                              <th style={{ \n                                padding: '10px', \n                                textAlign: 'left', \n                                borderBottom: '2px solid #ddd',\n                                width: '30%'\n                              }}>Key</th>\n                              <th style={{ \n                                padding: '10px', \n                                textAlign: 'left', \n                                borderBottom: '2px solid #ddd',\n                                width: '55%'\n                              }}>Value</th>\n                              <th style={{ \n                                padding: '10px', \n                                textAlign: 'center', \n                                borderBottom: '2px solid #ddd',\n                                width: '15%'\n                              }}>Actions</th>\n                            </tr>\n                          </thead>\n                          <tbody>\n                            {Object.entries(resource.attributes).map(([key, value]) => {\n                              const isEditing = editingAttribute?.resourceId === resource._id && editingAttribute?.oldKey === key;\n                              \n                              return (\n                                <tr key={key} style={{ borderBottom: '1px solid #eee' }}>\n                                  {isEditing ? (\n                                    <>\n                                      <td style={{ padding: '10px' }}>\n                                        <input\n                                          type=\"text\"\n                                          value={attributeEditForm.key}\n                                          onChange={(e) => setAttributeEditForm({ ...attributeEditForm, key: e.target.value })}\n                                          placeholder=\"Attribute key\"\n                                          style={{ width: '100%', padding: '5px' }}\n                                        />\n                                      </td>\n                                      <td style={{ padding: '10px' }}>\n                                        <input\n                                          type=\"text\"\n                                          value={attributeEditForm.value}\n                                          onChange={(e) => setAttributeEditForm({ ...attributeEditForm, value: e.target.value })}\n                                          placeholder=\"Attribute value\"\n                                          style={{ width: '100%', padding: '5px' }}\n                                        />\n                                      </td>\n                                      <td style={{ padding: '10px', textAlign: 'center' }}>\n                                        <button\n                                          onClick={() => updateResourceAttribute(resource._id, resource.name)}\n                                          className=\"btn-primary-small\"\n                                          style={{ \n                                            marginRight: '8px', \n                                            fontSize: '12px', \n                                            padding: '6px 12px',\n                                            backgroundColor: '#28a745',\n                                            color: 'white',\n                                            border: 'none',\n                                            borderRadius: '4px',\n                                            cursor: 'pointer'\n                                          }}\n                                          title=\"Save changes\"\n                                        >\n                                          âœ… Save\n                                        </button>\n                                        <button\n                                          onClick={cancelEditAttribute}\n                                          className=\"btn-secondary-small\"\n                                          style={{ \n                                            fontSize: '12px', \n                                            padding: '6px 12px',\n                                            backgroundColor: '#6c757d',\n                                            color: 'white',\n                                            border: 'none',\n                                            borderRadius: '4px',\n                                            cursor: 'pointer'\n                                          }}\n                                          title=\"Cancel editing\"\n                                        >\n                                          âŒ Cancel\n                                        </button>\n                                      </td>\n                                    </>\n                                  ) : (\n                                    <>\n                                      <td style={{ padding: '10px' }}>\n                                        <strong>{key}</strong>\n                                      </td>\n                                      <td style={{ padding: '10px', fontFamily: 'monospace', color: '#0066cc' }}>\n                                        {Array.isArray(value) ? value.join(', ') : value}\n                                      </td>\n                                      <td style={{ padding: '10px', textAlign: 'center' }}>\n                                        <button\n                                          onClick={() => startEditAttribute(resource._id, key, Array.isArray(value) ? value.join(', ') : value)}\n                                          className=\"btn-secondary-small\"\n                                          style={{ \n                                            marginRight: '8px', \n                                            fontSize: '12px', \n                                            padding: '6px 12px',\n                                            backgroundColor: '#6c757d',\n                                            color: 'white',\n                                            border: 'none',\n                                            borderRadius: '4px',\n                                            cursor: 'pointer'\n                                          }}\n                                          title=\"Edit attribute\"\n                                        >\n                                          âœï¸ Edit\n                                        </button>\n                                        <button\n                                          onClick={() => deleteResourceAttribute(resource._id, resource.name, key)}\n                                          className=\"btn-danger-small\"\n                                          style={{ \n                                            fontSize: '12px', \n                                            padding: '6px 12px',\n                                            backgroundColor: '#dc3545',\n                                            color: 'white',\n                                            border: 'none',\n                                            borderRadius: '4px',\n                                            cursor: 'pointer'\n                                          }}\n                                          title=\"Delete attribute\"\n                                        >\n                                          ðŸ—‘ï¸ Delete\n                                        </button>\n                                      </td>\n                                    </>\n                                  )}\n                                </tr>\n                              );\n                            })}\n                          </tbody>\n                        </table>\n                      ) : (\n                        <p style={{ \n                          color: '#666', \n                          fontStyle: 'italic', \n                          marginTop: '10px',\n                          padding: '10px',\n                          backgroundColor: '#f9f9f9',\n                          borderRadius: '4px'\n                        }}>\n                          No attributes defined. Click \"Add Attribute\" to add field-level authorization rules.\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default KeycloakAdminDashboard;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}