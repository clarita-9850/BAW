{"ast":null,"code":"import _objectSpread from\"/Users/sajeev/Documents/cmips-security/cmipsapplication/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useCallback,useEffect,useMemo,useState}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{apiClient as api,API_ENDPOINTS}from'../config/api';import NotificationCenter from'./NotificationCenter';import'./WorkQueuePage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WorkQueuePage=()=>{const{user,loading:authLoading,logout}=useAuth();const navigate=useNavigate();const[viewMode,setViewMode]=useState('queues');const[queues,setQueues]=useState([]);const[queueCounts,setQueueCounts]=useState({});const[selectedQueueId,setSelectedQueueId]=useState(null);const[selectedQueue,setSelectedQueue]=useState(null);const[queueTasks,setQueueTasks]=useState([]);const[queueSubscriptions,setQueueSubscriptions]=useState([]);const[userSubscriptions,setUserSubscriptions]=useState([]);const[loadingState,setLoadingState]=useState({queues:false,tasks:false,inbox:false});const[queueTab,setQueueTab]=useState('tasks');const[inboxTasks,setInboxTasks]=useState([]);const[reservedTasks,setReservedTasks]=useState([]);const[taskCounts,setTaskCounts]=useState({open:0,reserved:0,inProgress:0,deferred:0,closed:0});const[selectedTask,setSelectedTask]=useState(null);const[selectedTaskHistory,setSelectedTaskHistory]=useState([]);const[historyLoading,setHistoryLoading]=useState(false);const[actionLoading,setActionLoading]=useState(false);const hasSupervisorAccess=useMemo(()=>{var _user$roles,_user$roles2;return(user===null||user===void 0?void 0:(_user$roles=user.roles)===null||_user$roles===void 0?void 0:_user$roles.includes('SUPERVISOR'))||(user===null||user===void 0?void 0:(_user$roles2=user.roles)===null||_user$roles2===void 0?void 0:_user$roles2.includes('ADMIN'));},[user]);const hasAdminAccess=useMemo(()=>{var _user$roles3;return user===null||user===void 0?void 0:(_user$roles3=user.roles)===null||_user$roles3===void 0?void 0:_user$roles3.includes('ADMIN');},[user]);const isSubscribedToQueue=useMemo(()=>{return userSubscriptions.some(subscription=>subscription.queueId===selectedQueueId);},[userSubscriptions,selectedQueueId]);const fetchQueues=useCallback(async()=>{if(!user||!hasSupervisorAccess)return;setLoadingState(prev=>_objectSpread(_objectSpread({},prev),{},{queues:true}));try{var _queuesRes$data;const[queuesRes,countsRes,userSubsRes]=await Promise.all([api.get(API_ENDPOINTS.workQueues.list),api.get(API_ENDPOINTS.workQueues.counts),api.get(API_ENDPOINTS.workQueues.userSubscriptions(user.username))]);setQueues(queuesRes.data||[]);setQueueCounts(countsRes.data||{});setUserSubscriptions(userSubsRes.data||[]);if(!selectedQueueId&&(_queuesRes$data=queuesRes.data)!==null&&_queuesRes$data!==void 0&&_queuesRes$data.length){setSelectedQueueId(queuesRes.data[0].id);}}catch(error){console.error('Error fetching work queues',error);}finally{setLoadingState(prev=>_objectSpread(_objectSpread({},prev),{},{queues:false}));}},[user,selectedQueueId,hasSupervisorAccess]);const fetchQueueDetail=useCallback(async queueId=>{setLoadingState(prev=>_objectSpread(_objectSpread({},prev),{},{tasks:true}));try{const[detailRes,tasksRes,subsRes]=await Promise.all([api.get(API_ENDPOINTS.workQueues.detail(queueId)),api.get(API_ENDPOINTS.workQueues.tasks(queueId)),api.get(API_ENDPOINTS.workQueues.subscriptions(queueId))]);setSelectedQueue(detailRes.data);setQueueTasks(tasksRes.data||[]);setQueueSubscriptions(subsRes.data||[]);}catch(error){console.error('Error fetching queue details',error);}finally{setLoadingState(prev=>_objectSpread(_objectSpread({},prev),{},{tasks:false}));}},[]);const fetchUserWorkspace=useCallback(async()=>{if(!user||!hasSupervisorAccess)return;setLoadingState(prev=>_objectSpread(_objectSpread({},prev),{},{inbox:true}));try{var _countsRes$data$open,_countsRes$data,_countsRes$data$reser,_countsRes$data2,_countsRes$data$inPro,_countsRes$data3,_countsRes$data$defer,_countsRes$data4,_countsRes$data$close,_countsRes$data5;const[inboxRes,reservedRes,countsRes]=await Promise.all([api.get(API_ENDPOINTS.tasks.inbox(user.username)),api.get(API_ENDPOINTS.tasks.reserved(user.username)),api.get(API_ENDPOINTS.tasks.counts(user.username))]);setInboxTasks(inboxRes.data||[]);setReservedTasks(reservedRes.data||[]);setTaskCounts({open:(_countsRes$data$open=(_countsRes$data=countsRes.data)===null||_countsRes$data===void 0?void 0:_countsRes$data.open)!==null&&_countsRes$data$open!==void 0?_countsRes$data$open:0,reserved:(_countsRes$data$reser=(_countsRes$data2=countsRes.data)===null||_countsRes$data2===void 0?void 0:_countsRes$data2.reserved)!==null&&_countsRes$data$reser!==void 0?_countsRes$data$reser:0,inProgress:(_countsRes$data$inPro=(_countsRes$data3=countsRes.data)===null||_countsRes$data3===void 0?void 0:_countsRes$data3.inProgress)!==null&&_countsRes$data$inPro!==void 0?_countsRes$data$inPro:0,deferred:(_countsRes$data$defer=(_countsRes$data4=countsRes.data)===null||_countsRes$data4===void 0?void 0:_countsRes$data4.deferred)!==null&&_countsRes$data$defer!==void 0?_countsRes$data$defer:0,closed:(_countsRes$data$close=(_countsRes$data5=countsRes.data)===null||_countsRes$data5===void 0?void 0:_countsRes$data5.closed)!==null&&_countsRes$data$close!==void 0?_countsRes$data$close:0});}catch(error){console.error('Error fetching user workspace tasks',error);}finally{setLoadingState(prev=>_objectSpread(_objectSpread({},prev),{},{inbox:false}));}},[user,hasSupervisorAccess]);useEffect(()=>{if(authLoading){return;}if(!user){navigate('/login');return;}if(!hasSupervisorAccess){navigate('/');return;}fetchQueues();fetchUserWorkspace();},[authLoading,user,navigate,fetchQueues,fetchUserWorkspace,hasSupervisorAccess]);useEffect(()=>{if(selectedQueueId){setQueueTab('tasks');fetchQueueDetail(selectedQueueId);}},[selectedQueueId,fetchQueueDetail]);const handleReserveNext=async count=>{if(!selectedQueueId||!user||!hasSupervisorAccess)return;setActionLoading(true);try{await api.post(API_ENDPOINTS.workQueues.reserve(selectedQueueId),{username:user.username,count});await Promise.all([fetchQueueDetail(selectedQueueId),fetchUserWorkspace()]);}catch(error){console.error('Error reserving next tasks',error);alert('Failed to reserve tasks. Please try again.');}finally{setActionLoading(false);}};const handleReserveTask=async taskId=>{if(!user||!hasSupervisorAccess)return;setActionLoading(true);try{await api.post(API_ENDPOINTS.tasks.reserve(taskId),{username:user.username});await Promise.all([fetchQueueDetail(selectedQueueId),fetchUserWorkspace()]);}catch(error){var _error$response,_error$response$data;console.error('Error reserving task',error);alert(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to reserve task');}finally{setActionLoading(false);}};const handleUnreserveTask=async taskId=>{if(!user||!hasSupervisorAccess)return;setActionLoading(true);try{await api.post(API_ENDPOINTS.tasks.unreserve(taskId),{username:user.username});await Promise.all([fetchQueueDetail(selectedQueueId),fetchUserWorkspace()]);}catch(error){var _error$response2,_error$response2$data;console.error('Error unreserving task',error);alert(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to unreserve task');}finally{setActionLoading(false);}};const handleSubscribe=async()=>{if(!selectedQueueId||!user||!hasAdminAccess)return;setActionLoading(true);try{await api.post(API_ENDPOINTS.workQueues.subscribe(selectedQueueId),{userId:user.username});await Promise.all([fetchQueueDetail(selectedQueueId),fetchQueues()]);}catch(error){var _error$response3,_error$response3$data;console.error('Error subscribing to queue',error);alert(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Failed to subscribe');}finally{setActionLoading(false);}};const handleUnsubscribe=async()=>{if(!selectedQueueId||!user||!hasAdminAccess)return;setActionLoading(true);try{await api.delete(API_ENDPOINTS.workQueues.unsubscribe(selectedQueueId,user.username));await Promise.all([fetchQueueDetail(selectedQueueId),fetchQueues()]);}catch(error){var _error$response4,_error$response4$data;console.error('Error unsubscribing from queue',error);alert(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Failed to unsubscribe');}finally{setActionLoading(false);}};const openTaskDetail=async task=>{setSelectedTask(task);setSelectedTaskHistory([]);if(!task)return;setHistoryLoading(true);try{const res=await api.get(API_ENDPOINTS.tasks.history(task.id));setSelectedTaskHistory(res.data||[]);}catch(error){console.error('Error fetching task history',error);}finally{setHistoryLoading(false);}};const handleLogout=()=>{logout();navigate('/login');};const renderQueueList=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"queue-table-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"queue-table-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Work Queues\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline\",onClick:fetchQueues,children:\"Refresh\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"queue-table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table queue-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Action\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Administrator\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User Subscription\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tasks\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[queues.map(queue=>{var _queueCounts$queue$na;return/*#__PURE__*/_jsxs(\"tr\",{className:queue.id===selectedQueueId?'selected':'',children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>setSelectedQueueId(queue.id),children:\"View\"})}),/*#__PURE__*/_jsx(\"td\",{children:formatQueueName(queue.name)}),/*#__PURE__*/_jsx(\"td\",{children:queue.administratorUserId||'—'}),/*#__PURE__*/_jsx(\"td\",{children:queue.allowSubscription?'Yes':'No'}),/*#__PURE__*/_jsx(\"td\",{children:(_queueCounts$queue$na=queueCounts[queue.name])!==null&&_queueCounts$queue$na!==void 0?_queueCounts$queue$na:0})]},queue.id);}),queues.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",className:\"text-center py-4 text-muted\",children:\"No work queues configured.\"})})]})]})})]});const renderQueueDetail=()=>{var _selectedQueue$sensit;if(!selectedQueue){return/*#__PURE__*/_jsx(\"div\",{className:\"queue-detail-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Select a work queue to see details.\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"queue-detail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"queue-detail-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:formatQueueName(selectedQueue.name)}),/*#__PURE__*/_jsx(\"p\",{className:\"queue-description\",children:selectedQueue.description||'No description available.'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"queue-header-actions\",children:hasAdminAccess?isSubscribedToQueue?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline\",onClick:handleUnsubscribe,disabled:actionLoading,children:\"Unsubscribe\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleSubscribe,disabled:actionLoading||!selectedQueue.allowSubscription,children:\"Subscribe\"}):/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-secondary\",children:\"Managed by Queue Admin\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"queue-metadata\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Administrator\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedQueue.administratorUserId||'—'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Sensitivity\"}),/*#__PURE__*/_jsx(\"span\",{children:(_selectedQueue$sensit=selectedQueue.sensitivityLevel)!==null&&_selectedQueue$sensit!==void 0?_selectedQueue$sensit:'—'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Subscriptions Allowed\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedQueue.allowSubscription?'Yes':'No'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"My Subscription\"}),/*#__PURE__*/_jsx(\"span\",{children:isSubscribedToQueue?'Active':'Not subscribed'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"queue-toolbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>handleReserveNext(1),disabled:!isSubscribedToQueue||actionLoading,children:\"Reserve Next Task\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>handleReserveNext(5),disabled:!isSubscribedToQueue||actionLoading,children:\"Reserve Next 5 Tasks\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>handleReserveNext(20),disabled:!isSubscribedToQueue||actionLoading,children:\"Reserve Next 20 Tasks\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-right\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Total Tasks: \",queueTasks.length]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"queue-content-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"queue-tab \".concat(queueTab==='tasks'?'active':''),onClick:()=>setQueueTab('tasks'),children:\"Work Queue Tasks\"}),/*#__PURE__*/_jsx(\"button\",{className:\"queue-tab \".concat(queueTab==='subscriptions'?'active':''),onClick:()=>setQueueTab('subscriptions'),children:\"Queue Subscriptions\"}),/*#__PURE__*/_jsx(\"button\",{className:\"queue-tab \".concat(queueTab==='comments'?'active':''),onClick:()=>setQueueTab('comments'),children:\"Comments\"})]}),queueTab==='tasks'&&renderQueueTaskTable(),queueTab==='subscriptions'&&renderQueueSubscriptionTable(),queueTab==='comments'&&renderQueueComments()]});};const renderQueueTaskTable=()=>/*#__PURE__*/_jsx(\"div\",{className:\"queue-tasks-table\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Action\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Task ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subject\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Priority\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reserved By\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Deadline\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[queueTasks.map(task=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:task.reservedBy?/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-secondary\",children:\"Reserved\"}):/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>handleReserveTask(task.id),disabled:!isSubscribedToQueue||actionLoading,children:\"Reserve\\u2026\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>openTaskDetail(task),children:task.id})}),/*#__PURE__*/_jsx(\"td\",{children:task.title}),/*#__PURE__*/_jsx(\"td\",{children:task.priority}),/*#__PURE__*/_jsx(\"td\",{children:task.status}),/*#__PURE__*/_jsx(\"td\",{children:task.reservedBy||'—'}),/*#__PURE__*/_jsx(\"td\",{children:task.dueDate?formatDate(task.dueDate):'—'})]},task.id)),queueTasks.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"text-center py-4 text-muted\",children:\"No tasks available in this queue.\"})})]})]})});const renderQueueSubscriptionTable=()=>/*#__PURE__*/_jsx(\"div\",{className:\"queue-subscriptions-table\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subscribed At\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Unsubscribed At\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[queueSubscriptions.map(sub=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:sub.userId}),/*#__PURE__*/_jsx(\"td\",{children:sub.active?'Active':'Inactive'}),/*#__PURE__*/_jsx(\"td\",{children:sub.subscribedAt?formatDateTime(sub.subscribedAt):'—'}),/*#__PURE__*/_jsx(\"td\",{children:sub.unsubscribedAt?formatDateTime(sub.unsubscribedAt):'—'})]},sub.id)),queueSubscriptions.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",className:\"text-center py-4 text-muted\",children:\"No subscriptions for this queue.\"})})]})]})});const renderQueueComments=()=>/*#__PURE__*/_jsx(\"div\",{className:\"queue-comments\",children:/*#__PURE__*/_jsx(\"p\",{children:(selectedQueue===null||selectedQueue===void 0?void 0:selectedQueue.comments)||'No comments documented for this queue.'})});const renderInbox=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"queue-inbox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"queue-inbox-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Inbox\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline\",onClick:fetchUserWorkspace,children:\"Refresh\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inbox-counts\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"count-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"count-value\",children:taskCounts.open}),/*#__PURE__*/_jsx(\"span\",{className:\"count-label\",children:\"Open\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"count-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"count-value\",children:taskCounts.reserved}),/*#__PURE__*/_jsx(\"span\",{className:\"count-label\",children:\"Reserved\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"count-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"count-value\",children:taskCounts.inProgress}),/*#__PURE__*/_jsx(\"span\",{className:\"count-label\",children:\"In Progress\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"count-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"count-value\",children:taskCounts.deferred}),/*#__PURE__*/_jsx(\"span\",{className:\"count-label\",children:\"Deferred\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"count-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"count-value\",children:taskCounts.closed}),/*#__PURE__*/_jsx(\"span\",{className:\"count-label\",children:\"Closed\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"queue-inbox-table\",children:/*#__PURE__*/_jsx(TaskTable,{tasks:inboxTasks,onOpenTask:openTaskDetail})})]});const renderReserved=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"queue-inbox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"queue-inbox-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reserved Tasks\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline\",onClick:fetchUserWorkspace,children:\"Refresh\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"queue-inbox-table\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Action\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Task ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subject\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Priority\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Queue\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Due\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[reservedTasks.map(task=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>handleUnreserveTask(task.id),disabled:actionLoading,children:\"Unreserve\\u2026\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>openTaskDetail(task),children:task.id})}),/*#__PURE__*/_jsx(\"td\",{children:task.title}),/*#__PURE__*/_jsx(\"td\",{children:task.priority}),/*#__PURE__*/_jsx(\"td\",{children:task.status}),/*#__PURE__*/_jsx(\"td\",{children:formatQueueName(task.workQueue)}),/*#__PURE__*/_jsx(\"td\",{children:task.dueDate?formatDate(task.dueDate):'—'})]},task.id)),reservedTasks.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"text-center py-4 text-muted\",children:\"You do not have any reserved tasks.\"})})]})]})})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"workqueue-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ca-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ca-logo\",children:\"CA\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-ca-primary-900\",children:\"CMIPS Work Queue Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-ca-primary-600\",children:\"Manage tasks, subscriptions, and inbox\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(NotificationCenter,{userId:user===null||user===void 0?void 0:user.username}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-ca-primary-700\",children:[\"Welcome, \",/*#__PURE__*/_jsx(\"strong\",{children:user===null||user===void 0?void 0:user.username})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"btn btn-outline\",children:\"Logout\"})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"workqueue-container\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"workqueue-sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shortcuts\"}),/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-link \".concat(viewMode==='queues'?'active':''),onClick:()=>setViewMode('queues'),children:\"Work Queues\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-link \".concat(viewMode==='inbox'?'active':''),onClick:()=>setViewMode('inbox'),children:\"Inbox\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-link \".concat(viewMode==='reserved'?'active':''),onClick:()=>setViewMode('reserved'),children:\"Reserved Tasks\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"My Subscriptions\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[userSubscriptions.map(subscription=>{var _queues$find;return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-link \".concat(subscription.queueId===selectedQueueId?'active':''),onClick:()=>{setSelectedQueueId(subscription.queueId);setViewMode('queues');},children:formatQueueName(((_queues$find=queues.find(q=>q.id===subscription.queueId))===null||_queues$find===void 0?void 0:_queues$find.name)||subscription.queueId)})},subscription.id);}),userSubscriptions.length===0&&/*#__PURE__*/_jsx(\"li\",{className:\"text-muted small\",children:\"No subscriptions yet.\"})]})]})]}),/*#__PURE__*/_jsx(\"main\",{className:\"workqueue-main\",children:loadingState.queues&&queues.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"loading-state\",children:\"Loading queues...\"}):viewMode==='inbox'?renderInbox():viewMode==='reserved'?renderReserved():/*#__PURE__*/_jsxs(\"div\",{className:\"queue-content\",children:[renderQueueList(),loadingState.tasks&&!queueTasks.length?/*#__PURE__*/_jsx(\"div\",{className:\"loading-state\",children:\"Loading queue details...\"}):renderQueueDetail()]})})]}),selectedTask&&/*#__PURE__*/_jsx(TaskDrawer,{task:selectedTask,history:selectedTaskHistory,onClose:()=>setSelectedTask(null),loading:historyLoading})]});};const TaskTable=_ref=>{let{tasks,onOpenTask}=_ref;return/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Task ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subject\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Priority\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Queue\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Due\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[tasks.map(task=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>onOpenTask(task),children:task.id})}),/*#__PURE__*/_jsx(\"td\",{children:task.title}),/*#__PURE__*/_jsx(\"td\",{children:task.priority}),/*#__PURE__*/_jsx(\"td\",{children:task.status}),/*#__PURE__*/_jsx(\"td\",{children:formatQueueName(task.workQueue)}),/*#__PURE__*/_jsx(\"td\",{children:task.dueDate?formatDate(task.dueDate):'—'})]},task.id)),tasks.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",className:\"text-center py-4 text-muted\",children:\"No tasks to display.\"})})]})]});};const TaskDrawer=_ref2=>{let{task,history,onClose,loading}=_ref2;return/*#__PURE__*/_jsx(\"div\",{className:\"task-drawer-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"task-drawer\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"task-drawer-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:task.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"task-drawer-subtitle\",children:[\"Task ID: \",task.id]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:onClose,children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"task-drawer-body\",children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-grid\",children:[/*#__PURE__*/_jsx(DetailItem,{label:\"Status\",value:task.status}),/*#__PURE__*/_jsx(DetailItem,{label:\"Priority\",value:task.priority}),/*#__PURE__*/_jsx(DetailItem,{label:\"Assigned To\",value:task.assignedTo}),/*#__PURE__*/_jsx(DetailItem,{label:\"Reserved By\",value:task.reservedBy||'—'}),/*#__PURE__*/_jsx(DetailItem,{label:\"Work Queue\",value:formatQueueName(task.workQueue)}),/*#__PURE__*/_jsx(DetailItem,{label:\"Due Date\",value:task.dueDate?formatDateTime(task.dueDate):'—'}),/*#__PURE__*/_jsx(DetailItem,{label:\"Last Action\",value:task.lastActionAt?formatDateTime(task.lastActionAt):'—'})]})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{children:task.description||'No description provided.'})]}),task.actionLink&&/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Primary Action\"}),/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-primary\",href:task.actionLink,target:\"_blank\",rel:\"noreferrer\",children:\"Open Related Entity\"})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Timeline\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading history\\u2026\"}):history.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No history recorded.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"history-list\",children:history.map(event=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"history-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"history-event\",children:event.eventType}),/*#__PURE__*/_jsx(\"span\",{className:\"history-time\",children:formatDateTime(event.eventTime)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"history-details\",children:[/*#__PURE__*/_jsx(DetailItem,{label:\"From\",value:event.fromUser||'—'}),/*#__PURE__*/_jsx(DetailItem,{label:\"To\",value:event.toUser||'—'})]}),event.comments&&/*#__PURE__*/_jsx(\"p\",{className:\"history-comment\",children:event.comments})]},event.id))})]})]})]})});};const DetailItem=_ref3=>{let{label,value}=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:label}),/*#__PURE__*/_jsx(\"span\",{children:value})]});};const formatDate=value=>{try{return new Date(value).toLocaleDateString();}catch(_unused){return value;}};const formatDateTime=value=>{try{return new Date(value).toLocaleString();}catch(_unused2){return value;}};const formatQueueName=value=>{if(!value)return'—';return value.replace(/_/g,' ').replace(/\\b\\w/g,c=>c.toUpperCase());};export default WorkQueuePage;","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useState","useNavigate","useAuth","apiClient","api","API_ENDPOINTS","NotificationCenter","jsx","_jsx","jsxs","_jsxs","WorkQueuePage","user","loading","authLoading","logout","navigate","viewMode","setViewMode","queues","setQueues","queueCounts","setQueueCounts","selectedQueueId","setSelectedQueueId","selectedQueue","setSelectedQueue","queueTasks","setQueueTasks","queueSubscriptions","setQueueSubscriptions","userSubscriptions","setUserSubscriptions","loadingState","setLoadingState","tasks","inbox","queueTab","setQueueTab","inboxTasks","setInboxTasks","reservedTasks","setReservedTasks","taskCounts","setTaskCounts","open","reserved","inProgress","deferred","closed","selectedTask","setSelectedTask","selectedTaskHistory","setSelectedTaskHistory","historyLoading","setHistoryLoading","actionLoading","setActionLoading","hasSupervisorAccess","_user$roles","_user$roles2","roles","includes","hasAdminAccess","_user$roles3","isSubscribedToQueue","some","subscription","queueId","fetchQueues","prev","_objectSpread","_queuesRes$data","queuesRes","countsRes","userSubsRes","Promise","all","get","workQueues","list","counts","username","data","length","id","error","console","fetchQueueDetail","detailRes","tasksRes","subsRes","detail","subscriptions","fetchUserWorkspace","_countsRes$data$open","_countsRes$data","_countsRes$data$reser","_countsRes$data2","_countsRes$data$inPro","_countsRes$data3","_countsRes$data$defer","_countsRes$data4","_countsRes$data$close","_countsRes$data5","inboxRes","reservedRes","handleReserveNext","count","post","reserve","alert","handleReserveTask","taskId","_error$response","_error$response$data","response","message","handleUnreserveTask","unreserve","_error$response2","_error$response2$data","handleSubscribe","subscribe","userId","_error$response3","_error$response3$data","handleUnsubscribe","delete","unsubscribe","_error$response4","_error$response4$data","openTaskDetail","task","res","history","handleLogout","renderQueueList","className","children","onClick","map","queue","_queueCounts$queue$na","formatQueueName","name","administratorUserId","allowSubscription","colSpan","renderQueueDetail","_selectedQueue$sensit","description","disabled","sensitivityLevel","concat","renderQueueTaskTable","renderQueueSubscriptionTable","renderQueueComments","reservedBy","title","priority","status","dueDate","formatDate","sub","active","subscribedAt","formatDateTime","unsubscribedAt","comments","renderInbox","TaskTable","onOpenTask","renderReserved","workQueue","_queues$find","find","q","TaskDrawer","onClose","_ref","_ref2","e","stopPropagation","DetailItem","label","value","assignedTo","lastActionAt","actionLink","href","target","rel","event","eventType","eventTime","fromUser","toUser","_ref3","Date","toLocaleDateString","_unused","toLocaleString","_unused2","replace","c","toUpperCase"],"sources":["/Users/sajeev/Documents/cmips-security/cmipsapplication/frontend/src/components/WorkQueuePage.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { apiClient as api, API_ENDPOINTS } from '../config/api';\nimport NotificationCenter from './NotificationCenter';\nimport './WorkQueuePage.css';\n\nconst WorkQueuePage = () => {\n  const { user, loading: authLoading, logout } = useAuth();\n  const navigate = useNavigate();\n\n  const [viewMode, setViewMode] = useState('queues');\n  const [queues, setQueues] = useState([]);\n  const [queueCounts, setQueueCounts] = useState({});\n  const [selectedQueueId, setSelectedQueueId] = useState(null);\n  const [selectedQueue, setSelectedQueue] = useState(null);\n  const [queueTasks, setQueueTasks] = useState([]);\n  const [queueSubscriptions, setQueueSubscriptions] = useState([]);\n  const [userSubscriptions, setUserSubscriptions] = useState([]);\n  const [loadingState, setLoadingState] = useState({ queues: false, tasks: false, inbox: false });\n  const [queueTab, setQueueTab] = useState('tasks');\n  const [inboxTasks, setInboxTasks] = useState([]);\n  const [reservedTasks, setReservedTasks] = useState([]);\n  const [taskCounts, setTaskCounts] = useState({ open: 0, reserved: 0, inProgress: 0, deferred: 0, closed: 0 });\n  const [selectedTask, setSelectedTask] = useState(null);\n  const [selectedTaskHistory, setSelectedTaskHistory] = useState([]);\n  const [historyLoading, setHistoryLoading] = useState(false);\n  const [actionLoading, setActionLoading] = useState(false);\n\n  const hasSupervisorAccess = useMemo(() => {\n    return user?.roles?.includes('SUPERVISOR') || user?.roles?.includes('ADMIN');\n  }, [user]);\n\n  const hasAdminAccess = useMemo(() => user?.roles?.includes('ADMIN'), [user]);\n\n  const isSubscribedToQueue = useMemo(() => {\n    return userSubscriptions.some((subscription) => subscription.queueId === selectedQueueId);\n  }, [userSubscriptions, selectedQueueId]);\n\n  const fetchQueues = useCallback(async () => {\n    if (!user || !hasSupervisorAccess) return;\n    setLoadingState((prev) => ({ ...prev, queues: true }));\n    try {\n      const [queuesRes, countsRes, userSubsRes] = await Promise.all([\n        api.get(API_ENDPOINTS.workQueues.list),\n        api.get(API_ENDPOINTS.workQueues.counts),\n        api.get(API_ENDPOINTS.workQueues.userSubscriptions(user.username)),\n      ]);\n      setQueues(queuesRes.data || []);\n      setQueueCounts(countsRes.data || {});\n      setUserSubscriptions(userSubsRes.data || []);\n      if (!selectedQueueId && queuesRes.data?.length) {\n        setSelectedQueueId(queuesRes.data[0].id);\n      }\n    } catch (error) {\n      console.error('Error fetching work queues', error);\n    } finally {\n      setLoadingState((prev) => ({ ...prev, queues: false }));\n    }\n  }, [user, selectedQueueId, hasSupervisorAccess]);\n\n  const fetchQueueDetail = useCallback(async (queueId) => {\n    setLoadingState((prev) => ({ ...prev, tasks: true }));\n    try {\n      const [detailRes, tasksRes, subsRes] = await Promise.all([\n        api.get(API_ENDPOINTS.workQueues.detail(queueId)),\n        api.get(API_ENDPOINTS.workQueues.tasks(queueId)),\n        api.get(API_ENDPOINTS.workQueues.subscriptions(queueId)),\n      ]);\n      setSelectedQueue(detailRes.data);\n      setQueueTasks(tasksRes.data || []);\n      setQueueSubscriptions(subsRes.data || []);\n    } catch (error) {\n      console.error('Error fetching queue details', error);\n    } finally {\n      setLoadingState((prev) => ({ ...prev, tasks: false }));\n    }\n  }, []);\n\n  const fetchUserWorkspace = useCallback(async () => {\n    if (!user || !hasSupervisorAccess) return;\n    setLoadingState((prev) => ({ ...prev, inbox: true }));\n    try {\n      const [inboxRes, reservedRes, countsRes] = await Promise.all([\n        api.get(API_ENDPOINTS.tasks.inbox(user.username)),\n        api.get(API_ENDPOINTS.tasks.reserved(user.username)),\n        api.get(API_ENDPOINTS.tasks.counts(user.username)),\n      ]);\n      setInboxTasks(inboxRes.data || []);\n      setReservedTasks(reservedRes.data || []);\n      setTaskCounts({\n        open: countsRes.data?.open ?? 0,\n        reserved: countsRes.data?.reserved ?? 0,\n        inProgress: countsRes.data?.inProgress ?? 0,\n        deferred: countsRes.data?.deferred ?? 0,\n        closed: countsRes.data?.closed ?? 0,\n      });\n    } catch (error) {\n      console.error('Error fetching user workspace tasks', error);\n    } finally {\n      setLoadingState((prev) => ({ ...prev, inbox: false }));\n    }\n  }, [user, hasSupervisorAccess]);\n\n  useEffect(() => {\n    if (authLoading) {\n      return;\n    }\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n    if (!hasSupervisorAccess) {\n      navigate('/');\n      return;\n    }\n    fetchQueues();\n    fetchUserWorkspace();\n  }, [authLoading, user, navigate, fetchQueues, fetchUserWorkspace, hasSupervisorAccess]);\n\n  useEffect(() => {\n    if (selectedQueueId) {\n      setQueueTab('tasks');\n      fetchQueueDetail(selectedQueueId);\n    }\n  }, [selectedQueueId, fetchQueueDetail]);\n\n  const handleReserveNext = async (count) => {\n    if (!selectedQueueId || !user || !hasSupervisorAccess) return;\n    setActionLoading(true);\n    try {\n      await api.post(API_ENDPOINTS.workQueues.reserve(selectedQueueId), {\n        username: user.username,\n        count,\n      });\n      await Promise.all([fetchQueueDetail(selectedQueueId), fetchUserWorkspace()]);\n    } catch (error) {\n      console.error('Error reserving next tasks', error);\n      alert('Failed to reserve tasks. Please try again.');\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleReserveTask = async (taskId) => {\n    if (!user || !hasSupervisorAccess) return;\n    setActionLoading(true);\n    try {\n      await api.post(API_ENDPOINTS.tasks.reserve(taskId), { username: user.username });\n      await Promise.all([fetchQueueDetail(selectedQueueId), fetchUserWorkspace()]);\n    } catch (error) {\n      console.error('Error reserving task', error);\n      alert(error.response?.data?.message || 'Failed to reserve task');\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleUnreserveTask = async (taskId) => {\n    if (!user || !hasSupervisorAccess) return;\n    setActionLoading(true);\n    try {\n      await api.post(API_ENDPOINTS.tasks.unreserve(taskId), { username: user.username });\n      await Promise.all([fetchQueueDetail(selectedQueueId), fetchUserWorkspace()]);\n    } catch (error) {\n      console.error('Error unreserving task', error);\n      alert(error.response?.data?.message || 'Failed to unreserve task');\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleSubscribe = async () => {\n    if (!selectedQueueId || !user || !hasAdminAccess) return;\n    setActionLoading(true);\n    try {\n      await api.post(API_ENDPOINTS.workQueues.subscribe(selectedQueueId), { userId: user.username });\n      await Promise.all([fetchQueueDetail(selectedQueueId), fetchQueues()]);\n    } catch (error) {\n      console.error('Error subscribing to queue', error);\n      alert(error.response?.data?.message || 'Failed to subscribe');\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleUnsubscribe = async () => {\n    if (!selectedQueueId || !user || !hasAdminAccess) return;\n    setActionLoading(true);\n    try {\n      await api.delete(API_ENDPOINTS.workQueues.unsubscribe(selectedQueueId, user.username));\n      await Promise.all([fetchQueueDetail(selectedQueueId), fetchQueues()]);\n    } catch (error) {\n      console.error('Error unsubscribing from queue', error);\n      alert(error.response?.data?.message || 'Failed to unsubscribe');\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const openTaskDetail = async (task) => {\n    setSelectedTask(task);\n    setSelectedTaskHistory([]);\n    if (!task) return;\n    setHistoryLoading(true);\n    try {\n      const res = await api.get(API_ENDPOINTS.tasks.history(task.id));\n      setSelectedTaskHistory(res.data || []);\n    } catch (error) {\n      console.error('Error fetching task history', error);\n    } finally {\n      setHistoryLoading(false);\n    }\n  };\n\n  const handleLogout = () => {\n    logout();\n    navigate('/login');\n  };\n\n  const renderQueueList = () => (\n    <div className=\"queue-table-card\">\n      <div className=\"queue-table-header\">\n        <h2>Work Queues</h2>\n        <button className=\"btn btn-outline\" onClick={fetchQueues}>Refresh</button>\n      </div>\n      <div className=\"queue-table-wrapper\">\n        <table className=\"table queue-table\">\n          <thead>\n            <tr>\n              <th>Action</th>\n              <th>Name</th>\n              <th>Administrator</th>\n              <th>User Subscription</th>\n              <th>Tasks</th>\n            </tr>\n          </thead>\n          <tbody>\n            {queues.map((queue) => (\n              <tr key={queue.id} className={queue.id === selectedQueueId ? 'selected' : ''}>\n                <td>\n                  <button className=\"link-btn\" onClick={() => setSelectedQueueId(queue.id)}>View</button>\n                </td>\n                <td>{formatQueueName(queue.name)}</td>\n                <td>{queue.administratorUserId || '—'}</td>\n                <td>{queue.allowSubscription ? 'Yes' : 'No'}</td>\n                <td>{queueCounts[queue.name] ?? 0}</td>\n              </tr>\n            ))}\n            {queues.length === 0 && (\n              <tr>\n                <td colSpan=\"5\" className=\"text-center py-4 text-muted\">No work queues configured.</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n\n  const renderQueueDetail = () => {\n    if (!selectedQueue) {\n      return (\n        <div className=\"queue-detail-empty\">\n          <p>Select a work queue to see details.</p>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"queue-detail\">\n        <div className=\"queue-detail-header\">\n          <div>\n            <h2>{formatQueueName(selectedQueue.name)}</h2>\n            <p className=\"queue-description\">{selectedQueue.description || 'No description available.'}</p>\n          </div>\n          <div className=\"queue-header-actions\">\n            {hasAdminAccess ? (\n              isSubscribedToQueue ? (\n                <button className=\"btn btn-outline\" onClick={handleUnsubscribe} disabled={actionLoading}>\n                  Unsubscribe\n                </button>\n              ) : (\n                <button className=\"btn btn-primary\" onClick={handleSubscribe} disabled={actionLoading || !selectedQueue.allowSubscription}>\n                  Subscribe\n                </button>\n              )\n            ) : (\n              <span className=\"badge badge-secondary\">Managed by Queue Admin</span>\n            )}\n          </div>\n        </div>\n\n        <div className=\"queue-metadata\">\n          <div>\n            <label>Administrator</label>\n            <span>{selectedQueue.administratorUserId || '—'}</span>\n          </div>\n          <div>\n            <label>Sensitivity</label>\n            <span>{selectedQueue.sensitivityLevel ?? '—'}</span>\n          </div>\n          <div>\n            <label>Subscriptions Allowed</label>\n            <span>{selectedQueue.allowSubscription ? 'Yes' : 'No'}</span>\n          </div>\n          <div>\n            <label>My Subscription</label>\n            <span>{isSubscribedToQueue ? 'Active' : 'Not subscribed'}</span>\n          </div>\n        </div>\n\n        <div className=\"queue-toolbar\">\n          <div className=\"toolbar-left\">\n            <button className=\"btn btn-primary\" onClick={() => handleReserveNext(1)} disabled={!isSubscribedToQueue || actionLoading}>\n              Reserve Next Task\n            </button>\n            <button className=\"btn btn-primary\" onClick={() => handleReserveNext(5)} disabled={!isSubscribedToQueue || actionLoading}>\n              Reserve Next 5 Tasks\n            </button>\n            <button className=\"btn btn-primary\" onClick={() => handleReserveNext(20)} disabled={!isSubscribedToQueue || actionLoading}>\n              Reserve Next 20 Tasks\n            </button>\n          </div>\n          <div className=\"toolbar-right\">\n            <span>Total Tasks: {queueTasks.length}</span>\n          </div>\n        </div>\n\n        <div className=\"queue-content-tabs\">\n          <button\n            className={`queue-tab ${queueTab === 'tasks' ? 'active' : ''}`}\n            onClick={() => setQueueTab('tasks')}\n          >\n            Work Queue Tasks\n          </button>\n          <button\n            className={`queue-tab ${queueTab === 'subscriptions' ? 'active' : ''}`}\n            onClick={() => setQueueTab('subscriptions')}\n          >\n            Queue Subscriptions\n          </button>\n          <button\n            className={`queue-tab ${queueTab === 'comments' ? 'active' : ''}`}\n            onClick={() => setQueueTab('comments')}\n          >\n            Comments\n          </button>\n        </div>\n\n        {queueTab === 'tasks' && renderQueueTaskTable()}\n        {queueTab === 'subscriptions' && renderQueueSubscriptionTable()}\n        {queueTab === 'comments' && renderQueueComments()}\n      </div>\n    );\n  };\n\n  const renderQueueTaskTable = () => (\n    <div className=\"queue-tasks-table\">\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>Action</th>\n            <th>Task ID</th>\n            <th>Subject</th>\n            <th>Priority</th>\n            <th>Status</th>\n            <th>Reserved By</th>\n            <th>Deadline</th>\n          </tr>\n        </thead>\n        <tbody>\n          {queueTasks.map((task) => (\n            <tr key={task.id}>\n              <td>\n                {task.reservedBy ? (\n                  <span className=\"badge badge-secondary\">Reserved</span>\n                ) : (\n                  <button\n                    className=\"link-btn\"\n                    onClick={() => handleReserveTask(task.id)}\n                    disabled={!isSubscribedToQueue || actionLoading}\n                  >\n                    Reserve…\n                  </button>\n                )}\n              </td>\n              <td>\n                <button className=\"link-btn\" onClick={() => openTaskDetail(task)}>\n                  {task.id}\n                </button>\n              </td>\n              <td>{task.title}</td>\n              <td>{task.priority}</td>\n              <td>{task.status}</td>\n              <td>{task.reservedBy || '—'}</td>\n              <td>{task.dueDate ? formatDate(task.dueDate) : '—'}</td>\n            </tr>\n          ))}\n          {queueTasks.length === 0 && (\n            <tr>\n              <td colSpan=\"7\" className=\"text-center py-4 text-muted\">\n                No tasks available in this queue.\n              </td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n\n  const renderQueueSubscriptionTable = () => (\n    <div className=\"queue-subscriptions-table\">\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>User</th>\n            <th>Status</th>\n            <th>Subscribed At</th>\n            <th>Unsubscribed At</th>\n          </tr>\n        </thead>\n        <tbody>\n          {queueSubscriptions.map((sub) => (\n            <tr key={sub.id}>\n              <td>{sub.userId}</td>\n              <td>{sub.active ? 'Active' : 'Inactive'}</td>\n              <td>{sub.subscribedAt ? formatDateTime(sub.subscribedAt) : '—'}</td>\n              <td>{sub.unsubscribedAt ? formatDateTime(sub.unsubscribedAt) : '—'}</td>\n            </tr>\n          ))}\n          {queueSubscriptions.length === 0 && (\n            <tr>\n              <td colSpan=\"4\" className=\"text-center py-4 text-muted\">\n                No subscriptions for this queue.\n              </td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n\n  const renderQueueComments = () => (\n    <div className=\"queue-comments\">\n      <p>{selectedQueue?.comments || 'No comments documented for this queue.'}</p>\n    </div>\n  );\n\n  const renderInbox = () => (\n    <div className=\"queue-inbox\">\n      <div className=\"queue-inbox-header\">\n        <h2>My Inbox</h2>\n        <button className=\"btn btn-outline\" onClick={fetchUserWorkspace}>Refresh</button>\n      </div>\n      <div className=\"inbox-counts\">\n        <div className=\"count-card\">\n          <span className=\"count-value\">{taskCounts.open}</span>\n          <span className=\"count-label\">Open</span>\n        </div>\n        <div className=\"count-card\">\n          <span className=\"count-value\">{taskCounts.reserved}</span>\n          <span className=\"count-label\">Reserved</span>\n        </div>\n        <div className=\"count-card\">\n          <span className=\"count-value\">{taskCounts.inProgress}</span>\n          <span className=\"count-label\">In Progress</span>\n        </div>\n        <div className=\"count-card\">\n          <span className=\"count-value\">{taskCounts.deferred}</span>\n          <span className=\"count-label\">Deferred</span>\n        </div>\n        <div className=\"count-card\">\n          <span className=\"count-value\">{taskCounts.closed}</span>\n          <span className=\"count-label\">Closed</span>\n        </div>\n      </div>\n      <div className=\"queue-inbox-table\">\n        <TaskTable tasks={inboxTasks} onOpenTask={openTaskDetail} />\n      </div>\n    </div>\n  );\n\n  const renderReserved = () => (\n    <div className=\"queue-inbox\">\n      <div className=\"queue-inbox-header\">\n        <h2>Reserved Tasks</h2>\n        <button className=\"btn btn-outline\" onClick={fetchUserWorkspace}>Refresh</button>\n      </div>\n      <div className=\"queue-inbox-table\">\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>Action</th>\n              <th>Task ID</th>\n              <th>Subject</th>\n              <th>Priority</th>\n              <th>Status</th>\n              <th>Queue</th>\n              <th>Due</th>\n            </tr>\n          </thead>\n          <tbody>\n            {reservedTasks.map((task) => (\n              <tr key={task.id}>\n                <td>\n                  <button className=\"link-btn\" onClick={() => handleUnreserveTask(task.id)} disabled={actionLoading}>\n                    Unreserve…\n                  </button>\n                </td>\n                <td>\n                  <button className=\"link-btn\" onClick={() => openTaskDetail(task)}>\n                    {task.id}\n                  </button>\n                </td>\n                <td>{task.title}</td>\n                <td>{task.priority}</td>\n                <td>{task.status}</td>\n                <td>{formatQueueName(task.workQueue)}</td>\n                <td>{task.dueDate ? formatDate(task.dueDate) : '—'}</td>\n              </tr>\n            ))}\n            {reservedTasks.length === 0 && (\n              <tr>\n                <td colSpan=\"7\" className=\"text-center py-4 text-muted\">\n                  You do not have any reserved tasks.\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"workqueue-page\">\n      <div className=\"ca-header\">\n        <div className=\"container\">\n          <div className=\"flex justify-between items-center py-4\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"ca-logo\">CA</div>\n              <div>\n                <h1 className=\"text-xl font-bold text-ca-primary-900\">CMIPS Work Queue Management</h1>\n                <p className=\"text-sm text-ca-primary-600\">Manage tasks, subscriptions, and inbox</p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <NotificationCenter userId={user?.username} />\n              <span className=\"text-sm text-ca-primary-700\">\n                Welcome, <strong>{user?.username}</strong>\n              </span>\n              <button onClick={handleLogout} className=\"btn btn-outline\">\n                Logout\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"workqueue-container\">\n        <aside className=\"workqueue-sidebar\">\n          <div className=\"sidebar-section\">\n            <h3>Shortcuts</h3>\n            <nav>\n              <button className={`sidebar-link ${viewMode === 'queues' ? 'active' : ''}`} onClick={() => setViewMode('queues')}>\n                Work Queues\n              </button>\n              <button className={`sidebar-link ${viewMode === 'inbox' ? 'active' : ''}`} onClick={() => setViewMode('inbox')}>\n                Inbox\n              </button>\n              <button className={`sidebar-link ${viewMode === 'reserved' ? 'active' : ''}`} onClick={() => setViewMode('reserved')}>\n                Reserved Tasks\n              </button>\n            </nav>\n          </div>\n          <div className=\"sidebar-section\">\n            <h3>My Subscriptions</h3>\n            <ul>\n              {userSubscriptions.map((subscription) => (\n                <li key={subscription.id}>\n                  <button\n                    className={`sidebar-link ${subscription.queueId === selectedQueueId ? 'active' : ''}`}\n                    onClick={() => {\n                      setSelectedQueueId(subscription.queueId);\n                      setViewMode('queues');\n                    }}\n                  >\n                    {formatQueueName(queues.find((q) => q.id === subscription.queueId)?.name || subscription.queueId)}\n                  </button>\n                </li>\n              ))}\n              {userSubscriptions.length === 0 && (\n                <li className=\"text-muted small\">No subscriptions yet.</li>\n              )}\n            </ul>\n          </div>\n        </aside>\n\n        <main className=\"workqueue-main\">\n          {loadingState.queues && queues.length === 0 ? (\n            <div className=\"loading-state\">Loading queues...</div>\n          ) : viewMode === 'inbox' ? (\n            renderInbox()\n          ) : viewMode === 'reserved' ? (\n            renderReserved()\n          ) : (\n            <div className=\"queue-content\">\n              {renderQueueList()}\n              {loadingState.tasks && !queueTasks.length ? (\n                <div className=\"loading-state\">Loading queue details...</div>\n              ) : (\n                renderQueueDetail()\n              )}\n            </div>\n          )}\n        </main>\n      </div>\n\n      {selectedTask && (\n        <TaskDrawer\n          task={selectedTask}\n          history={selectedTaskHistory}\n          onClose={() => setSelectedTask(null)}\n          loading={historyLoading}\n        />\n      )}\n    </div>\n  );\n};\n\nconst TaskTable = ({ tasks, onOpenTask }) => (\n  <table className=\"table\">\n    <thead>\n      <tr>\n        <th>Task ID</th>\n        <th>Subject</th>\n        <th>Priority</th>\n        <th>Status</th>\n        <th>Queue</th>\n        <th>Due</th>\n      </tr>\n    </thead>\n    <tbody>\n      {tasks.map((task) => (\n        <tr key={task.id}>\n          <td>\n            <button className=\"link-btn\" onClick={() => onOpenTask(task)}>\n              {task.id}\n            </button>\n          </td>\n          <td>{task.title}</td>\n          <td>{task.priority}</td>\n          <td>{task.status}</td>\n          <td>{formatQueueName(task.workQueue)}</td>\n          <td>{task.dueDate ? formatDate(task.dueDate) : '—'}</td>\n        </tr>\n      ))}\n      {tasks.length === 0 && (\n        <tr>\n          <td colSpan=\"6\" className=\"text-center py-4 text-muted\">\n            No tasks to display.\n          </td>\n        </tr>\n      )}\n    </tbody>\n  </table>\n);\n\nconst TaskDrawer = ({ task, history, onClose, loading }) => (\n  <div className=\"task-drawer-overlay\" onClick={onClose}>\n    <div className=\"task-drawer\" onClick={(e) => e.stopPropagation()}>\n      <div className=\"task-drawer-header\">\n        <div>\n          <h2>{task.title}</h2>\n          <p className=\"task-drawer-subtitle\">Task ID: {task.id}</p>\n        </div>\n        <button className=\"close-btn\" onClick={onClose}>✕</button>\n      </div>\n      <div className=\"task-drawer-body\">\n        <section>\n          <h3>Details</h3>\n          <div className=\"detail-grid\">\n            <DetailItem label=\"Status\" value={task.status} />\n            <DetailItem label=\"Priority\" value={task.priority} />\n            <DetailItem label=\"Assigned To\" value={task.assignedTo} />\n            <DetailItem label=\"Reserved By\" value={task.reservedBy || '—'} />\n            <DetailItem label=\"Work Queue\" value={formatQueueName(task.workQueue)} />\n            <DetailItem label=\"Due Date\" value={task.dueDate ? formatDateTime(task.dueDate) : '—'} />\n            <DetailItem label=\"Last Action\" value={task.lastActionAt ? formatDateTime(task.lastActionAt) : '—'} />\n          </div>\n        </section>\n        <section>\n          <h3>Description</h3>\n          <p>{task.description || 'No description provided.'}</p>\n        </section>\n        {task.actionLink && (\n          <section>\n            <h3>Primary Action</h3>\n            <a className=\"btn btn-primary\" href={task.actionLink} target=\"_blank\" rel=\"noreferrer\">\n              Open Related Entity\n            </a>\n          </section>\n        )}\n        <section>\n          <h3>Timeline</h3>\n          {loading ? (\n            <p>Loading history…</p>\n          ) : history.length === 0 ? (\n            <p className=\"text-muted\">No history recorded.</p>\n          ) : (\n            <ul className=\"history-list\">\n              {history.map((event) => (\n                <li key={event.id}>\n                  <div className=\"history-item\">\n                    <span className=\"history-event\">{event.eventType}</span>\n                    <span className=\"history-time\">{formatDateTime(event.eventTime)}</span>\n                  </div>\n                  <div className=\"history-details\">\n                    <DetailItem label=\"From\" value={event.fromUser || '—'} />\n                    <DetailItem label=\"To\" value={event.toUser || '—'} />\n                  </div>\n                  {event.comments && <p className=\"history-comment\">{event.comments}</p>}\n                </li>\n              ))}\n            </ul>\n          )}\n        </section>\n      </div>\n    </div>\n  </div>\n);\n\nconst DetailItem = ({ label, value }) => (\n  <div className=\"detail-item\">\n    <label>{label}</label>\n    <span>{value}</span>\n  </div>\n);\n\nconst formatDate = (value) => {\n  try {\n    return new Date(value).toLocaleDateString();\n  } catch {\n    return value;\n  }\n};\n\nconst formatDateTime = (value) => {\n  try {\n    return new Date(value).toLocaleString();\n  } catch {\n    return value;\n  }\n};\n\nconst formatQueueName = (value) => {\n  if (!value) return '—';\n  return value\n    .replace(/_/g, ' ')\n    .replace(/\\b\\w/g, (c) => c.toUpperCase());\n};\n\nexport default WorkQueuePage;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}