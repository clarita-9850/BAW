{"ast":null,"code":"import _objectSpread from\"/Users/sajeev/Documents/cmips-security/cmipsapplication/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useCallback,useEffect,useMemo,useState}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{apiClient as api,API_ENDPOINTS}from'../config/api';import NotificationCenter from'./NotificationCenter';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CaseWorkerDashboard=()=>{const{user,logout,loading:authLoading}=useAuth();const navigate=useNavigate();const username=user===null||user===void 0?void 0:user.username;const[isInitializing,setIsInitializing]=useState(true);const[loadingStates,setLoadingStates]=useState({tasks:false,queues:false,notifications:false});const[errors,setErrors]=useState({global:'',queues:''});const[taskCounts,setTaskCounts]=useState({open:0,reserved:0,inProgress:0,deferred:0,escalated:0,closed:0});const[assignedTasks,setAssignedTasks]=useState([]);const[reservedTasks,setReservedTasks]=useState([]);const[deferredTasks,setDeferredTasks]=useState([]);const[inboxTasks,setInboxTasks]=useState([]);const[notifications,setNotifications]=useState([]);const[queueSubscriptions,setQueueSubscriptions]=useState([]);const[queueTasks,setQueueTasks]=useState({});const fetchNotifications=useCallback(async()=>{if(!username)return;setLoadingStates(prev=>_objectSpread(_objectSpread({},prev),{},{notifications:true}));try{const response=await api.get(\"/notifications/user/\".concat(username));setNotifications((response.data||[]).slice(0,5));}catch(error){console.error('Failed to load notifications',error);setNotifications([]);}finally{setLoadingStates(prev=>_objectSpread(_objectSpread({},prev),{},{notifications:false}));}},[username]);const fetchTaskData=useCallback(async()=>{if(!username)return;setLoadingStates(prev=>_objectSpread(_objectSpread({},prev),{},{tasks:true}));try{var _counts$open,_counts$reserved,_counts$inProgress,_counts$deferred,_counts$closed;const[allTasksRes,reservedRes,countsRes,inboxRes]=await Promise.all([api.get(API_ENDPOINTS.tasks.list(username)),api.get(API_ENDPOINTS.tasks.reserved(username)),api.get(API_ENDPOINTS.tasks.counts(username)),api.get(API_ENDPOINTS.tasks.inbox(username))]);const allTasks=allTasksRes.data||[];const reserved=reservedRes.data||[];const counts=countsRes.data||{};const inbox=inboxRes.data||[];setAssignedTasks(allTasks.filter(task=>['OPEN','IN_PROGRESS','ESCALATED'].includes(task.status)));setReservedTasks(reserved);setDeferredTasks(allTasks.filter(task=>task.status==='DEFERRED'));setInboxTasks(inbox);setTaskCounts({open:(_counts$open=counts.open)!==null&&_counts$open!==void 0?_counts$open:0,reserved:(_counts$reserved=counts.reserved)!==null&&_counts$reserved!==void 0?_counts$reserved:0,inProgress:(_counts$inProgress=counts.inProgress)!==null&&_counts$inProgress!==void 0?_counts$inProgress:0,deferred:(_counts$deferred=counts.deferred)!==null&&_counts$deferred!==void 0?_counts$deferred:0,escalated:allTasks.filter(task=>task.status==='ESCALATED').length,closed:(_counts$closed=counts.closed)!==null&&_counts$closed!==void 0?_counts$closed:0});}catch(error){console.error('Failed to load tasks',error);setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{global:'Unable to load task data. Please refresh the page.'}));setAssignedTasks([]);setReservedTasks([]);setDeferredTasks([]);setInboxTasks([]);setTaskCounts({open:0,reserved:0,inProgress:0,deferred:0,escalated:0,closed:0});}finally{setLoadingStates(prev=>_objectSpread(_objectSpread({},prev),{},{tasks:false}));}},[username]);const fetchQueueData=useCallback(async()=>{if(!username)return;setLoadingStates(prev=>_objectSpread(_objectSpread({},prev),{},{queues:true}));try{const subscriptionsRes=await api.get(API_ENDPOINTS.workQueues.userSubscriptions(username));const subscriptions=subscriptionsRes.data||[];setQueueSubscriptions(subscriptions);const queueTaskEntries=await Promise.all(subscriptions.map(async sub=>{try{const tasksRes=await api.get(API_ENDPOINTS.workQueues.tasks(sub.queueId));return[sub.queueId,(tasksRes.data||[]).slice(0,10)];}catch(error){console.error('Failed to load tasks for queue',sub.queueId,error);return[sub.queueId,[]];}}));const queueTaskMap=Object.fromEntries(queueTaskEntries);setQueueTasks(queueTaskMap);setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{queues:''}));}catch(error){console.error('Failed to load queue subscriptions',error);setQueueSubscriptions([]);setQueueTasks({});setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{queues:'Unable to load your work queues.'}));}finally{setLoadingStates(prev=>_objectSpread(_objectSpread({},prev),{},{queues:false}));}},[username]);const bootstrap=useCallback(async()=>{try{await Promise.all([fetchTaskData(),fetchQueueData(),fetchNotifications()]);setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{global:''}));}finally{setIsInitializing(false);}},[fetchTaskData,fetchQueueData,fetchNotifications]);useEffect(()=>{if(authLoading){return;}if(!user||user.role!=='CASE_WORKER'){navigate('/login');return;}bootstrap();},[authLoading,user,navigate,bootstrap]);const refreshAfterAction=useCallback(async()=>{await Promise.all([fetchTaskData(),fetchQueueData()]);},[fetchTaskData,fetchQueueData]);const handleLogout=()=>{logout();navigate('/login');};const handleOpenTask=useCallback(task=>{if(task.actionLink){window.location.href=task.actionLink;return;}if(task.relatedEntityId){navigate(\"/cases/\".concat(task.relatedEntityId));}else{alert('This task does not have a direct action link.');}},[navigate]);const handleReserveTask=useCallback(async taskId=>{if(!taskId||!username)return;try{await api.post(API_ENDPOINTS.tasks.reserve(taskId),{username});await refreshAfterAction();}catch(error){console.error('Failed to reserve task',error);alert('Unable to reserve this task.');}},[username,refreshAfterAction]);const handleUnreserveTask=useCallback(async taskId=>{if(!taskId||!username)return;try{await api.post(API_ENDPOINTS.tasks.unreserve(taskId),{username});await refreshAfterAction();}catch(error){console.error('Failed to release task',error);alert('Unable to release this task.');}},[username,refreshAfterAction]);const handleForwardTask=useCallback(async taskId=>{if(!taskId||!username)return;const toUser=window.prompt('Forward task to user (username):');if(!toUser)return;const comments=window.prompt('Comment (optional):','Forwarded from caseworker workspace')||'';try{await api.post(API_ENDPOINTS.tasks.forward(taskId),{fromUser:username,toUser,comments});await refreshAfterAction();}catch(error){console.error('Failed to forward task',error);alert('Unable to forward this task.');}},[username,refreshAfterAction]);const handleCloseTask=useCallback(async taskId=>{if(!taskId||!username)return;const comments=window.prompt('Add comment before closing:','Closed by caseworker.')||'';try{await api.post(API_ENDPOINTS.tasks.close(taskId),{username,comments});await refreshAfterAction();}catch(error){console.error('Failed to close task',error);alert('Unable to close this task.');}},[username,refreshAfterAction]);const handleDeferTask=useCallback(async taskId=>{if(!taskId||!username)return;const dateInput=window.prompt('Defer until (YYYY-MM-DD or leave blank to cancel):');if(!dateInput)return;const reason=window.prompt('Reason for deferral:')||'Deferred by caseworker.';try{const restartAt=new Date(dateInput);if(Number.isNaN(restartAt.getTime())){alert('Invalid date provided.');return;}await api.post(API_ENDPOINTS.tasks.defer(taskId),{username,restartAt:restartAt.toISOString(),reason});await refreshAfterAction();}catch(error){console.error('Failed to defer task',error);alert('Unable to defer this task.');}},[username,refreshAfterAction]);const handleRestartTask=useCallback(async taskId=>{if(!taskId||!username)return;const comments=window.prompt('Add comment before restarting:','Restarted by caseworker.')||'';try{await api.post(API_ENDPOINTS.tasks.restart(taskId),{username,comments});await refreshAfterAction();}catch(error){console.error('Failed to restart task',error);alert('Unable to restart this task.');}},[username,refreshAfterAction]);const handleAddComment=useCallback(async taskId=>{if(!taskId||!username)return;const comments=window.prompt('Enter comment for this task:');if(!comments)return;try{await api.post(API_ENDPOINTS.tasks.comment(taskId),{username,comments});await refreshAfterAction();}catch(error){console.error('Failed to add comment',error);alert('Unable to add comment.');}},[username,refreshAfterAction]);const handleReserveNextFromQueue=useCallback(queueId=>{const tasks=queueTasks[queueId]||[];if(tasks.length===0){alert('No tasks available to reserve from this queue.');return;}handleReserveTask(tasks[0].id);},[queueTasks,handleReserveTask]);const summaryCards=useMemo(()=>[{label:'Open Tasks',value:taskCounts.open},{label:'Reserved',value:taskCounts.reserved},{label:'Deferred',value:taskCounts.deferred},{label:'Escalated',value:taskCounts.escalated}],[taskCounts]);if(isInitializing){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-ca-secondary-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-ca-highlight-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-ca-primary-600\",children:\"Loading Caseworker Workspace\\u2026\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-ca-secondary-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ca-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ca-logo\",children:\"CA\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-ca-primary-900\",children:\"Caseworker Workspace\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-ca-primary-600\",children:\"Manage your tasks, queues, and case workload\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(NotificationCenter,{userId:username}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-ca-primary-700\",children:[\"Welcome, \",/*#__PURE__*/_jsx(\"strong\",{children:username}),\" (Caseworker)\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"btn btn-outline\",children:\"Logout\"})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container py-6 space-y-6\",children:[errors.global&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-red-50 border border-red-200 text-red-700 rounded\",children:errors.global}),/*#__PURE__*/_jsx(\"section\",{className:\"grid lg:grid-cols-4 md:grid-cols-2 gap-4\",children:summaryCards.map(card=>/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center py-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-ca-primary-900\",children:card.value}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-ca-primary-600 uppercase tracking-wide mt-1\",children:card.label})]})},card.label))}),/*#__PURE__*/_jsxs(\"section\",{className:\"grid xl:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card xl:col-span-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-ca-primary-900\",children:\"My Tasks\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-sm\",onClick:fetchTaskData,children:\"Refresh\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body space-y-4\",children:[/*#__PURE__*/_jsx(TaskSection,{title:\"Assigned Tasks\",description:\"Tasks currently assigned to you.\",loading:loadingStates.tasks,tasks:assignedTasks,onOpen:handleOpenTask,onComment:handleAddComment,onClose:handleCloseTask,onForward:handleForwardTask,onDefer:handleDeferTask,showReserve:false,showRelease:false}),/*#__PURE__*/_jsx(TaskSection,{title:\"Reserved Tasks\",description:\"Tasks you have reserved from queues.\",loading:loadingStates.tasks,tasks:reservedTasks,onOpen:handleOpenTask,onComment:handleAddComment,onClose:handleCloseTask,onForward:handleForwardTask,onDefer:handleDeferTask,onRelease:handleUnreserveTask,showReserve:false,showRelease:true}),/*#__PURE__*/_jsx(TaskSection,{title:\"Deferred Tasks\",description:\"Tasks you have postponed for a later date.\",loading:loadingStates.tasks,tasks:deferredTasks,onOpen:handleOpenTask,onComment:handleAddComment,onForward:handleForwardTask,onRestart:handleRestartTask,showReserve:false,showRelease:false})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-ca-primary-900\",children:\"User Inbox\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-ca-primary-600\",children:\"Notifications and task alerts\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-sm\",onClick:fetchNotifications,children:\"Refresh\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body space-y-3\",children:loadingStates.notifications?/*#__PURE__*/_jsx(LoadingIndicator,{label:\"Loading notifications\"}):notifications.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-ca-primary-600\",children:\"No notifications at this time.\"}):notifications.map(note=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 rounded border \".concat(note.readStatus?'bg-ca-secondary-50':'bg-blue-50 border-blue-300'),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold text-ca-primary-900\",children:note.message}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-ca-primary-600 mt-1\",children:new Date(note.createdAt).toLocaleString()})]},note.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-ca-primary-900\",children:\"Quick Actions\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body space-y-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline w-full\",onClick:()=>navigate('/cases'),children:\"Case Search\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline w-full\",onClick:()=>navigate('/timesheets'),children:\"Timesheet Inbox\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline w-full\",onClick:()=>alert('Creating ad-hoc tasks is not yet implemented in this build.'),children:\"Create User Task\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-ca-primary-900\",children:\"Task Inbox\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-ca-primary-600\",children:\"Tasks waiting in your personal inbox.\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:loadingStates.tasks?/*#__PURE__*/_jsx(LoadingIndicator,{label:\"Loading inbox\"}):inboxTasks.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-ca-primary-600\",children:\"No items currently in your inbox.\"}):/*#__PURE__*/_jsx(SimpleTaskList,{tasks:inboxTasks,onOpen:handleOpenTask,onReserve:handleReserveTask})})]})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-ca-primary-900\",children:\"My Work Queues\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-ca-primary-600\",children:\"Queues you are subscribed to and available tasks to reserve.\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-sm\",onClick:fetchQueueData,children:\"Refresh\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body space-y-4\",children:[errors.queues&&/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-yellow-50 border border-yellow-300 text-sm text-yellow-800 rounded\",children:errors.queues}),loadingStates.queues?/*#__PURE__*/_jsx(LoadingIndicator,{label:\"Loading work queues\"}):queueSubscriptions.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-ca-primary-600\",children:\"You are not subscribed to any work queues.\"}):queueSubscriptions.map(subscription=>/*#__PURE__*/_jsx(QueuePanel,{subscription:subscription,tasks:queueTasks[subscription.queueId]||[],onReserveTask:handleReserveTask,onOpenTask:handleOpenTask,onReserveNext:()=>handleReserveNextFromQueue(subscription.queueId)},subscription.queueId))]})]})]})]});};const TaskSection=_ref=>{let{title,description,loading,tasks,onOpen,onReserve,onComment,onClose,onForward,onDefer,onRestart,onRelease,showReserve=true,showRelease=false}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-md font-semibold text-ca-primary-900\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-ca-primary-600\",children:description})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-ca-primary-600\",children:[tasks.length,\" item(s)\"]})]}),loading?/*#__PURE__*/_jsx(LoadingIndicator,{label:\"Loading \".concat(title.toLowerCase())}):tasks.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-ca-primary-600\",children:\"No tasks in this category.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Task\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Priority\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Queue\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Due\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tasks.map(task=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:task.id}),/*#__PURE__*/_jsx(\"td\",{children:task.title}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-primary\",children:task.status})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(badgeForPriority(task.priority)),children:task.priority})}),/*#__PURE__*/_jsx(\"td\",{children:task.workQueue||'—'}),/*#__PURE__*/_jsx(\"td\",{children:task.dueDate?new Date(task.dueDate).toLocaleDateString():'—'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-xs\",onClick:()=>onOpen(task),children:\"Open\"}),showReserve&&onReserve&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-xs\",onClick:()=>onReserve(task.id),children:\"Reserve\"}),showRelease&&onRelease&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-xs\",onClick:()=>onRelease(task.id),children:\"Release\"}),onComment&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-xs\",onClick:()=>onComment(task.id),children:\"Comment\"}),onDefer&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-xs\",onClick:()=>onDefer(task.id),children:\"Defer\"}),onRestart&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-xs\",onClick:()=>onRestart(task.id),children:\"Restart\"}),onForward&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-xs\",onClick:()=>onForward(task.id),children:\"Forward\"}),onClose&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-xs\",onClick:()=>onClose(task.id),children:\"Close\"})]})})]},task.id))})]})})]});};const SimpleTaskList=_ref2=>{let{tasks,onOpen,onReserve}=_ref2;return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:tasks.map(task=>/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-ca-secondary-50 border border-ca-secondary-200 rounded\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold text-ca-primary-900\",children:task.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-ca-primary-600\",children:[task.workQueue||'No queue',\" \\u2022\",' ',task.dueDate?new Date(task.dueDate).toLocaleDateString():'No due date']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-xs\",onClick:()=>onOpen(task),children:\"Open\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-xs\",onClick:()=>onReserve(task.id),children:\"Reserve\"})]})]})},task.id))});};const QueuePanel=_ref3=>{let{subscription,tasks,onReserveNext,onReserveTask,onOpenTask}=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-ca-secondary-200 rounded p-4 space-y-3 bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:items-center md:justify-between gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-md font-semibold text-ca-primary-900\",children:subscription.queueName||\"Queue \".concat(subscription.queueId)}),subscription.queueDescription&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-ca-primary-600\",children:subscription.queueDescription})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-xs\",onClick:onReserveNext,children:\"Reserve Next Task\"})})]}),tasks.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-ca-primary-600\",children:\"No available tasks at the moment.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Task\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Priority\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tasks.map(task=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:task.id}),/*#__PURE__*/_jsx(\"td\",{children:task.title}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(badgeForPriority(task.priority)),children:task.priority})}),/*#__PURE__*/_jsx(\"td\",{children:task.createdAt?new Date(task.createdAt).toLocaleString():'—'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-xs\",onClick:()=>onOpenTask(task),children:\"Details\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-xs\",onClick:()=>onReserveTask(task.id),children:\"Reserve\"})]})})]},task.id))})]})})]});};const LoadingIndicator=_ref4=>{let{label}=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 text-sm text-ca-primary-600\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-5 w-5 border-b-2 border-ca-highlight-600\"}),/*#__PURE__*/_jsxs(\"span\",{children:[label,\"\\u2026\"]})]});};const badgeForPriority=priority=>{switch(priority){case'HIGH':return'badge-danger';case'LOW':return'badge-success';default:return'badge-warning';}};export default CaseWorkerDashboard;","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useState","useNavigate","useAuth","apiClient","api","API_ENDPOINTS","NotificationCenter","jsx","_jsx","jsxs","_jsxs","CaseWorkerDashboard","user","logout","loading","authLoading","navigate","username","isInitializing","setIsInitializing","loadingStates","setLoadingStates","tasks","queues","notifications","errors","setErrors","global","taskCounts","setTaskCounts","open","reserved","inProgress","deferred","escalated","closed","assignedTasks","setAssignedTasks","reservedTasks","setReservedTasks","deferredTasks","setDeferredTasks","inboxTasks","setInboxTasks","setNotifications","queueSubscriptions","setQueueSubscriptions","queueTasks","setQueueTasks","fetchNotifications","prev","_objectSpread","response","get","concat","data","slice","error","console","fetchTaskData","_counts$open","_counts$reserved","_counts$inProgress","_counts$deferred","_counts$closed","allTasksRes","reservedRes","countsRes","inboxRes","Promise","all","list","counts","inbox","allTasks","filter","task","includes","status","length","fetchQueueData","subscriptionsRes","workQueues","userSubscriptions","subscriptions","queueTaskEntries","map","sub","tasksRes","queueId","queueTaskMap","Object","fromEntries","bootstrap","role","refreshAfterAction","handleLogout","handleOpenTask","actionLink","window","location","href","relatedEntityId","alert","handleReserveTask","taskId","post","reserve","handleUnreserveTask","unreserve","handleForwardTask","toUser","prompt","comments","forward","fromUser","handleCloseTask","close","handleDeferTask","dateInput","reason","restartAt","Date","Number","isNaN","getTime","defer","toISOString","handleRestartTask","restart","handleAddComment","comment","handleReserveNextFromQueue","id","summaryCards","label","value","className","children","userId","onClick","card","TaskSection","title","description","onOpen","onComment","onClose","onForward","onDefer","showReserve","showRelease","onRelease","onRestart","LoadingIndicator","note","readStatus","message","createdAt","toLocaleString","SimpleTaskList","onReserve","subscription","QueuePanel","onReserveTask","onOpenTask","onReserveNext","_ref","toLowerCase","badgeForPriority","priority","workQueue","dueDate","toLocaleDateString","_ref2","_ref3","queueName","queueDescription","_ref4"],"sources":["/Users/sajeev/Documents/cmips-security/cmipsapplication/frontend/src/components/CaseWorkerDashboard.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { apiClient as api, API_ENDPOINTS } from '../config/api';\nimport NotificationCenter from './NotificationCenter';\n\nconst CaseWorkerDashboard = () => {\n  const { user, logout, loading: authLoading } = useAuth();\n  const navigate = useNavigate();\n  const username = user?.username;\n\n  const [isInitializing, setIsInitializing] = useState(true);\n  const [loadingStates, setLoadingStates] = useState({\n    tasks: false,\n    queues: false,\n    notifications: false,\n  });\n  const [errors, setErrors] = useState({\n    global: '',\n    queues: '',\n  });\n\n  const [taskCounts, setTaskCounts] = useState({\n    open: 0,\n    reserved: 0,\n    inProgress: 0,\n    deferred: 0,\n    escalated: 0,\n    closed: 0,\n  });\n\n  const [assignedTasks, setAssignedTasks] = useState([]);\n  const [reservedTasks, setReservedTasks] = useState([]);\n  const [deferredTasks, setDeferredTasks] = useState([]);\n  const [inboxTasks, setInboxTasks] = useState([]);\n  const [notifications, setNotifications] = useState([]);\n\n  const [queueSubscriptions, setQueueSubscriptions] = useState([]);\n  const [queueTasks, setQueueTasks] = useState({});\n\n  const fetchNotifications = useCallback(async () => {\n    if (!username) return;\n    setLoadingStates((prev) => ({ ...prev, notifications: true }));\n    try {\n      const response = await api.get(`/notifications/user/${username}`);\n      setNotifications((response.data || []).slice(0, 5));\n    } catch (error) {\n      console.error('Failed to load notifications', error);\n      setNotifications([]);\n    } finally {\n      setLoadingStates((prev) => ({ ...prev, notifications: false }));\n    }\n  }, [username]);\n\n  const fetchTaskData = useCallback(async () => {\n    if (!username) return;\n    setLoadingStates((prev) => ({ ...prev, tasks: true }));\n    try {\n      const [allTasksRes, reservedRes, countsRes, inboxRes] = await Promise.all([\n        api.get(API_ENDPOINTS.tasks.list(username)),\n        api.get(API_ENDPOINTS.tasks.reserved(username)),\n        api.get(API_ENDPOINTS.tasks.counts(username)),\n        api.get(API_ENDPOINTS.tasks.inbox(username)),\n      ]);\n\n      const allTasks = allTasksRes.data || [];\n      const reserved = reservedRes.data || [];\n      const counts = countsRes.data || {};\n      const inbox = inboxRes.data || [];\n\n      setAssignedTasks(\n        allTasks.filter((task) =>\n          ['OPEN', 'IN_PROGRESS', 'ESCALATED'].includes(task.status)\n        )\n      );\n      setReservedTasks(reserved);\n      setDeferredTasks(allTasks.filter((task) => task.status === 'DEFERRED'));\n      setInboxTasks(inbox);\n      setTaskCounts({\n        open: counts.open ?? 0,\n        reserved: counts.reserved ?? 0,\n        inProgress: counts.inProgress ?? 0,\n        deferred: counts.deferred ?? 0,\n        escalated: allTasks.filter((task) => task.status === 'ESCALATED').length,\n        closed: counts.closed ?? 0,\n      });\n    } catch (error) {\n      console.error('Failed to load tasks', error);\n      setErrors((prev) => ({\n        ...prev,\n        global: 'Unable to load task data. Please refresh the page.',\n      }));\n      setAssignedTasks([]);\n      setReservedTasks([]);\n      setDeferredTasks([]);\n      setInboxTasks([]);\n      setTaskCounts({\n        open: 0,\n        reserved: 0,\n        inProgress: 0,\n        deferred: 0,\n        escalated: 0,\n        closed: 0,\n      });\n    } finally {\n      setLoadingStates((prev) => ({ ...prev, tasks: false }));\n    }\n  }, [username]);\n\n  const fetchQueueData = useCallback(async () => {\n    if (!username) return;\n    setLoadingStates((prev) => ({ ...prev, queues: true }));\n    try {\n      const subscriptionsRes = await api.get(\n        API_ENDPOINTS.workQueues.userSubscriptions(username)\n      );\n      const subscriptions = subscriptionsRes.data || [];\n      setQueueSubscriptions(subscriptions);\n\n      const queueTaskEntries = await Promise.all(\n        subscriptions.map(async (sub) => {\n          try {\n            const tasksRes = await api.get(\n              API_ENDPOINTS.workQueues.tasks(sub.queueId)\n            );\n            return [sub.queueId, (tasksRes.data || []).slice(0, 10)];\n          } catch (error) {\n            console.error('Failed to load tasks for queue', sub.queueId, error);\n            return [sub.queueId, []];\n          }\n        })\n      );\n\n      const queueTaskMap = Object.fromEntries(queueTaskEntries);\n      setQueueTasks(queueTaskMap);\n      setErrors((prev) => ({ ...prev, queues: '' }));\n    } catch (error) {\n      console.error('Failed to load queue subscriptions', error);\n      setQueueSubscriptions([]);\n      setQueueTasks({});\n      setErrors((prev) => ({\n        ...prev,\n        queues: 'Unable to load your work queues.',\n      }));\n    } finally {\n      setLoadingStates((prev) => ({ ...prev, queues: false }));\n    }\n  }, [username]);\n\n  const bootstrap = useCallback(async () => {\n    try {\n      await Promise.all([fetchTaskData(), fetchQueueData(), fetchNotifications()]);\n      setErrors((prev) => ({ ...prev, global: '' }));\n    } finally {\n      setIsInitializing(false);\n    }\n  }, [fetchTaskData, fetchQueueData, fetchNotifications]);\n\n  useEffect(() => {\n    if (authLoading) {\n      return;\n    }\n    if (!user || user.role !== 'CASE_WORKER') {\n      navigate('/login');\n      return;\n    }\n    bootstrap();\n  }, [authLoading, user, navigate, bootstrap]);\n\n  const refreshAfterAction = useCallback(async () => {\n    await Promise.all([fetchTaskData(), fetchQueueData()]);\n  }, [fetchTaskData, fetchQueueData]);\n\n  const handleLogout = () => {\n    logout();\n    navigate('/login');\n  };\n\n  const handleOpenTask = useCallback((task) => {\n    if (task.actionLink) {\n      window.location.href = task.actionLink;\n      return;\n    }\n    if (task.relatedEntityId) {\n      navigate(`/cases/${task.relatedEntityId}`);\n    } else {\n      alert('This task does not have a direct action link.');\n    }\n  }, [navigate]);\n\n  const handleReserveTask = useCallback(async (taskId) => {\n    if (!taskId || !username) return;\n    try {\n      await api.post(API_ENDPOINTS.tasks.reserve(taskId), { username });\n      await refreshAfterAction();\n    } catch (error) {\n      console.error('Failed to reserve task', error);\n      alert('Unable to reserve this task.');\n    }\n  }, [username, refreshAfterAction]);\n\n  const handleUnreserveTask = useCallback(async (taskId) => {\n    if (!taskId || !username) return;\n    try {\n      await api.post(API_ENDPOINTS.tasks.unreserve(taskId), { username });\n      await refreshAfterAction();\n    } catch (error) {\n      console.error('Failed to release task', error);\n      alert('Unable to release this task.');\n    }\n  }, [username, refreshAfterAction]);\n\n  const handleForwardTask = useCallback(async (taskId) => {\n    if (!taskId || !username) return;\n    const toUser = window.prompt('Forward task to user (username):');\n    if (!toUser) return;\n    const comments =\n      window.prompt('Comment (optional):', 'Forwarded from caseworker workspace') || '';\n    try {\n      await api.post(API_ENDPOINTS.tasks.forward(taskId), {\n        fromUser: username,\n        toUser,\n        comments,\n      });\n      await refreshAfterAction();\n    } catch (error) {\n      console.error('Failed to forward task', error);\n      alert('Unable to forward this task.');\n    }\n  }, [username, refreshAfterAction]);\n\n  const handleCloseTask = useCallback(async (taskId) => {\n    if (!taskId || !username) return;\n    const comments =\n      window.prompt('Add comment before closing:', 'Closed by caseworker.') || '';\n    try {\n      await api.post(API_ENDPOINTS.tasks.close(taskId), {\n        username,\n        comments,\n      });\n      await refreshAfterAction();\n    } catch (error) {\n      console.error('Failed to close task', error);\n      alert('Unable to close this task.');\n    }\n  }, [username, refreshAfterAction]);\n\n  const handleDeferTask = useCallback(async (taskId) => {\n    if (!taskId || !username) return;\n    const dateInput = window.prompt(\n      'Defer until (YYYY-MM-DD or leave blank to cancel):'\n    );\n    if (!dateInput) return;\n    const reason = window.prompt('Reason for deferral:') || 'Deferred by caseworker.';\n    try {\n      const restartAt = new Date(dateInput);\n      if (Number.isNaN(restartAt.getTime())) {\n        alert('Invalid date provided.');\n        return;\n      }\n      await api.post(API_ENDPOINTS.tasks.defer(taskId), {\n        username,\n        restartAt: restartAt.toISOString(),\n        reason,\n      });\n      await refreshAfterAction();\n    } catch (error) {\n      console.error('Failed to defer task', error);\n      alert('Unable to defer this task.');\n    }\n  }, [username, refreshAfterAction]);\n\n  const handleRestartTask = useCallback(async (taskId) => {\n    if (!taskId || !username) return;\n    const comments =\n      window.prompt('Add comment before restarting:', 'Restarted by caseworker.') || '';\n    try {\n      await api.post(API_ENDPOINTS.tasks.restart(taskId), {\n        username,\n        comments,\n      });\n      await refreshAfterAction();\n    } catch (error) {\n      console.error('Failed to restart task', error);\n      alert('Unable to restart this task.');\n    }\n  }, [username, refreshAfterAction]);\n\n  const handleAddComment = useCallback(async (taskId) => {\n    if (!taskId || !username) return;\n    const comments = window.prompt('Enter comment for this task:');\n    if (!comments) return;\n    try {\n      await api.post(API_ENDPOINTS.tasks.comment(taskId), {\n        username,\n        comments,\n      });\n      await refreshAfterAction();\n    } catch (error) {\n      console.error('Failed to add comment', error);\n      alert('Unable to add comment.');\n    }\n  }, [username, refreshAfterAction]);\n\n  const handleReserveNextFromQueue = useCallback(\n    (queueId) => {\n      const tasks = queueTasks[queueId] || [];\n      if (tasks.length === 0) {\n        alert('No tasks available to reserve from this queue.');\n        return;\n      }\n      handleReserveTask(tasks[0].id);\n    },\n    [queueTasks, handleReserveTask]\n  );\n\n  const summaryCards = useMemo(\n    () => [\n      { label: 'Open Tasks', value: taskCounts.open },\n      { label: 'Reserved', value: taskCounts.reserved },\n      { label: 'Deferred', value: taskCounts.deferred },\n      { label: 'Escalated', value: taskCounts.escalated },\n    ],\n    [taskCounts]\n  );\n\n  if (isInitializing) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-ca-secondary-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-ca-highlight-600 mx-auto\"></div>\n          <p className=\"mt-4 text-ca-primary-600\">Loading Caseworker Workspace…</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-ca-secondary-50\">\n      <div className=\"ca-header\">\n        <div className=\"container\">\n          <div className=\"flex justify-between items-center py-4\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"ca-logo\">CA</div>\n              <div>\n                <h1 className=\"text-xl font-bold text-ca-primary-900\">Caseworker Workspace</h1>\n                <p className=\"text-sm text-ca-primary-600\">\n                  Manage your tasks, queues, and case workload\n                </p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <NotificationCenter userId={username} />\n              <span className=\"text-sm text-ca-primary-700\">\n                Welcome, <strong>{username}</strong> (Caseworker)\n              </span>\n              <button onClick={handleLogout} className=\"btn btn-outline\">\n                Logout\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"container py-6 space-y-6\">\n        {errors.global && (\n          <div className=\"p-4 bg-red-50 border border-red-200 text-red-700 rounded\">\n            {errors.global}\n          </div>\n        )}\n\n        <section className=\"grid lg:grid-cols-4 md:grid-cols-2 gap-4\">\n          {summaryCards.map((card) => (\n            <div key={card.label} className=\"card\">\n              <div className=\"card-body text-center py-6\">\n                <div className=\"text-3xl font-bold text-ca-primary-900\">{card.value}</div>\n                <p className=\"text-sm text-ca-primary-600 uppercase tracking-wide mt-1\">\n                  {card.label}\n                </p>\n              </div>\n            </div>\n          ))}\n        </section>\n\n        <section className=\"grid xl:grid-cols-3 gap-4\">\n          <div className=\"card xl:col-span-2\">\n            <div className=\"card-header flex items-center justify-between\">\n              <h2 className=\"text-lg font-semibold text-ca-primary-900\">My Tasks</h2>\n              <button className=\"btn btn-outline btn-sm\" onClick={fetchTaskData}>\n                Refresh\n              </button>\n            </div>\n            <div className=\"card-body space-y-4\">\n              <TaskSection\n                title=\"Assigned Tasks\"\n                description=\"Tasks currently assigned to you.\"\n                loading={loadingStates.tasks}\n                tasks={assignedTasks}\n                onOpen={handleOpenTask}\n                onComment={handleAddComment}\n                onClose={handleCloseTask}\n                onForward={handleForwardTask}\n                onDefer={handleDeferTask}\n                showReserve={false}\n                showRelease={false}\n              />\n              <TaskSection\n                title=\"Reserved Tasks\"\n                description=\"Tasks you have reserved from queues.\"\n                loading={loadingStates.tasks}\n                tasks={reservedTasks}\n                onOpen={handleOpenTask}\n                onComment={handleAddComment}\n                onClose={handleCloseTask}\n                onForward={handleForwardTask}\n                onDefer={handleDeferTask}\n                onRelease={handleUnreserveTask}\n                showReserve={false}\n                showRelease\n              />\n              <TaskSection\n                title=\"Deferred Tasks\"\n                description=\"Tasks you have postponed for a later date.\"\n                loading={loadingStates.tasks}\n                tasks={deferredTasks}\n                onOpen={handleOpenTask}\n                onComment={handleAddComment}\n                onForward={handleForwardTask}\n                onRestart={handleRestartTask}\n                showReserve={false}\n                showRelease={false}\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-4\">\n            <div className=\"card\">\n              <div className=\"card-header flex items-center justify-between\">\n                <div>\n                  <h2 className=\"text-lg font-semibold text-ca-primary-900\">User Inbox</h2>\n                  <p className=\"text-sm text-ca-primary-600\">\n                    Notifications and task alerts\n                  </p>\n                </div>\n                <button className=\"btn btn-outline btn-sm\" onClick={fetchNotifications}>\n                  Refresh\n                </button>\n              </div>\n              <div className=\"card-body space-y-3\">\n                {loadingStates.notifications ? (\n                  <LoadingIndicator label=\"Loading notifications\" />\n                ) : notifications.length === 0 ? (\n                  <p className=\"text-sm text-ca-primary-600\">\n                    No notifications at this time.\n                  </p>\n                ) : (\n                  notifications.map((note) => (\n                    <div\n                      key={note.id}\n                      className={`p-3 rounded border ${\n                        note.readStatus ? 'bg-ca-secondary-50' : 'bg-blue-50 border-blue-300'\n                      }`}\n                    >\n                      <p className=\"text-sm font-semibold text-ca-primary-900\">\n                        {note.message}\n                      </p>\n                      <p className=\"text-xs text-ca-primary-600 mt-1\">\n                        {new Date(note.createdAt).toLocaleString()}\n                      </p>\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <div className=\"card-header\">\n                <h2 className=\"text-lg font-semibold text-ca-primary-900\">Quick Actions</h2>\n              </div>\n              <div className=\"card-body space-y-2\">\n                <button className=\"btn btn-outline w-full\" onClick={() => navigate('/cases')}>\n                  Case Search\n                </button>\n                <button\n                  className=\"btn btn-outline w-full\"\n                  onClick={() => navigate('/timesheets')}\n                >\n                  Timesheet Inbox\n                </button>\n                <button\n                  className=\"btn btn-outline w-full\"\n                  onClick={() =>\n                    alert('Creating ad-hoc tasks is not yet implemented in this build.')\n                  }\n                >\n                  Create User Task\n                </button>\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <div className=\"card-header flex items-center justify-between\">\n                <div>\n                  <h2 className=\"text-lg font-semibold text-ca-primary-900\">Task Inbox</h2>\n                  <p className=\"text-sm text-ca-primary-600\">\n                    Tasks waiting in your personal inbox.\n                  </p>\n                </div>\n              </div>\n              <div className=\"card-body\">\n                {loadingStates.tasks ? (\n                  <LoadingIndicator label=\"Loading inbox\" />\n                ) : inboxTasks.length === 0 ? (\n                  <p className=\"text-sm text-ca-primary-600\">\n                    No items currently in your inbox.\n                  </p>\n                ) : (\n                  <SimpleTaskList\n                    tasks={inboxTasks}\n                    onOpen={handleOpenTask}\n                    onReserve={handleReserveTask}\n                  />\n                )}\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <section className=\"card\">\n          <div className=\"card-header flex items-center justify-between\">\n            <div>\n              <h2 className=\"text-lg font-semibold text-ca-primary-900\">My Work Queues</h2>\n              <p className=\"text-sm text-ca-primary-600\">\n                Queues you are subscribed to and available tasks to reserve.\n              </p>\n            </div>\n            <button className=\"btn btn-outline btn-sm\" onClick={fetchQueueData}>\n              Refresh\n            </button>\n          </div>\n          <div className=\"card-body space-y-4\">\n            {errors.queues && (\n              <div className=\"p-3 bg-yellow-50 border border-yellow-300 text-sm text-yellow-800 rounded\">\n                {errors.queues}\n              </div>\n            )}\n            {loadingStates.queues ? (\n              <LoadingIndicator label=\"Loading work queues\" />\n            ) : queueSubscriptions.length === 0 ? (\n              <p className=\"text-sm text-ca-primary-600\">\n                You are not subscribed to any work queues.\n              </p>\n            ) : (\n              queueSubscriptions.map((subscription) => (\n                <QueuePanel\n                  key={subscription.queueId}\n                  subscription={subscription}\n                  tasks={queueTasks[subscription.queueId] || []}\n                  onReserveTask={handleReserveTask}\n                  onOpenTask={handleOpenTask}\n                  onReserveNext={() => handleReserveNextFromQueue(subscription.queueId)}\n                />\n              ))\n            )}\n          </div>\n        </section>\n      </div>\n    </div>\n  );\n};\n\nconst TaskSection = ({\n  title,\n  description,\n  loading,\n  tasks,\n  onOpen,\n  onReserve,\n  onComment,\n  onClose,\n  onForward,\n  onDefer,\n  onRestart,\n  onRelease,\n  showReserve = true,\n  showRelease = false,\n}) => (\n  <div className=\"space-y-2\">\n    <div className=\"flex items-center justify-between\">\n      <div>\n        <h3 className=\"text-md font-semibold text-ca-primary-900\">{title}</h3>\n        <p className=\"text-xs text-ca-primary-600\">{description}</p>\n      </div>\n      <span className=\"text-xs text-ca-primary-600\">{tasks.length} item(s)</span>\n    </div>\n    {loading ? (\n      <LoadingIndicator label={`Loading ${title.toLowerCase()}`} />\n    ) : tasks.length === 0 ? (\n      <p className=\"text-sm text-ca-primary-600\">No tasks in this category.</p>\n    ) : (\n      <div className=\"overflow-x-auto\">\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Task</th>\n              <th>Status</th>\n              <th>Priority</th>\n              <th>Queue</th>\n              <th>Due</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {tasks.map((task) => (\n              <tr key={task.id}>\n                <td>{task.id}</td>\n                <td>{task.title}</td>\n                <td>\n                  <span className=\"badge badge-primary\">{task.status}</span>\n                </td>\n                <td>\n                  <span className={`badge ${badgeForPriority(task.priority)}`}>\n                    {task.priority}\n                  </span>\n                </td>\n                <td>{task.workQueue || '—'}</td>\n                <td>\n                  {task.dueDate ? new Date(task.dueDate).toLocaleDateString() : '—'}\n                </td>\n                <td>\n                  <div className=\"flex flex-wrap gap-2\">\n                    <button className=\"btn btn-outline btn-xs\" onClick={() => onOpen(task)}>\n                      Open\n                    </button>\n                    {showReserve && onReserve && (\n                      <button\n                        className=\"btn btn-outline btn-xs\"\n                        onClick={() => onReserve(task.id)}\n                      >\n                        Reserve\n                      </button>\n                    )}\n                    {showRelease && onRelease && (\n                      <button\n                        className=\"btn btn-outline btn-xs\"\n                        onClick={() => onRelease(task.id)}\n                      >\n                        Release\n                      </button>\n                    )}\n                    {onComment && (\n                      <button\n                        className=\"btn btn-outline btn-xs\"\n                        onClick={() => onComment(task.id)}\n                      >\n                        Comment\n                      </button>\n                    )}\n                    {onDefer && (\n                      <button\n                        className=\"btn btn-outline btn-xs\"\n                        onClick={() => onDefer(task.id)}\n                      >\n                        Defer\n                      </button>\n                    )}\n                    {onRestart && (\n                      <button\n                        className=\"btn btn-outline btn-xs\"\n                        onClick={() => onRestart(task.id)}\n                      >\n                        Restart\n                      </button>\n                    )}\n                    {onForward && (\n                      <button\n                        className=\"btn btn-outline btn-xs\"\n                        onClick={() => onForward(task.id)}\n                      >\n                        Forward\n                      </button>\n                    )}\n                    {onClose && (\n                      <button\n                        className=\"btn btn-outline btn-xs\"\n                        onClick={() => onClose(task.id)}\n                      >\n                        Close\n                      </button>\n                    )}\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    )}\n  </div>\n);\n\nconst SimpleTaskList = ({ tasks, onOpen, onReserve }) => (\n  <div className=\"space-y-3\">\n    {tasks.map((task) => (\n      <div\n        key={task.id}\n        className=\"p-3 bg-ca-secondary-50 border border-ca-secondary-200 rounded\"\n      >\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <p className=\"text-sm font-semibold text-ca-primary-900\">{task.title}</p>\n            <p className=\"text-xs text-ca-primary-600\">\n              {task.workQueue || 'No queue'} •{' '}\n              {task.dueDate ? new Date(task.dueDate).toLocaleDateString() : 'No due date'}\n            </p>\n          </div>\n          <div className=\"flex gap-2\">\n            <button className=\"btn btn-outline btn-xs\" onClick={() => onOpen(task)}>\n              Open\n            </button>\n            <button className=\"btn btn-outline btn-xs\" onClick={() => onReserve(task.id)}>\n              Reserve\n            </button>\n          </div>\n        </div>\n      </div>\n    ))}\n  </div>\n);\n\nconst QueuePanel = ({ subscription, tasks, onReserveNext, onReserveTask, onOpenTask }) => (\n  <div className=\"border border-ca-secondary-200 rounded p-4 space-y-3 bg-white\">\n    <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-2\">\n      <div>\n        <h3 className=\"text-md font-semibold text-ca-primary-900\">\n          {subscription.queueName || `Queue ${subscription.queueId}`}\n        </h3>\n        {subscription.queueDescription && (\n          <p className=\"text-xs text-ca-primary-600\">\n            {subscription.queueDescription}\n          </p>\n        )}\n      </div>\n      <div className=\"flex gap-2\">\n        <button className=\"btn btn-outline btn-xs\" onClick={onReserveNext}>\n          Reserve Next Task\n        </button>\n      </div>\n    </div>\n    {tasks.length === 0 ? (\n      <p className=\"text-sm text-ca-primary-600\">No available tasks at the moment.</p>\n    ) : (\n      <div className=\"overflow-x-auto\">\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Task</th>\n              <th>Priority</th>\n              <th>Created</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {tasks.map((task) => (\n              <tr key={task.id}>\n                <td>{task.id}</td>\n                <td>{task.title}</td>\n                <td>\n                  <span className={`badge ${badgeForPriority(task.priority)}`}>\n                    {task.priority}\n                  </span>\n                </td>\n                <td>\n                  {task.createdAt ? new Date(task.createdAt).toLocaleString() : '—'}\n                </td>\n                <td>\n                  <div className=\"flex gap-2\">\n                    <button\n                      className=\"btn btn-outline btn-xs\"\n                      onClick={() => onOpenTask(task)}\n                    >\n                      Details\n                    </button>\n                    <button\n                      className=\"btn btn-outline btn-xs\"\n                      onClick={() => onReserveTask(task.id)}\n                    >\n                      Reserve\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    )}\n  </div>\n);\n\nconst LoadingIndicator = ({ label }) => (\n  <div className=\"flex items-center space-x-3 text-sm text-ca-primary-600\">\n    <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-ca-highlight-600\"></div>\n    <span>{label}…</span>\n  </div>\n);\n\nconst badgeForPriority = (priority) => {\n  switch (priority) {\n    case 'HIGH':\n      return 'badge-danger';\n    case 'LOW':\n      return 'badge-success';\n    default:\n      return 'badge-warning';\n  }\n};\n\nexport default CaseWorkerDashboard;\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}