{"ast":null,"code":"import _objectSpread from\"/Users/sajeev/Documents/cmips-security/cmipsapplication/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useCallback,useEffect,useMemo,useState}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{apiClient as api,API_ENDPOINTS}from'../config/api';import NotificationCenter from'./NotificationCenter';import'./WorkQueuePage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WorkQueuePage=()=>{const{user,loading:authLoading,logout}=useAuth();const navigate=useNavigate();const[viewMode,setViewMode]=useState('queues');const[queues,setQueues]=useState([]);const[queueCounts,setQueueCounts]=useState({});const[selectedQueueId,setSelectedQueueId]=useState(null);const[selectedQueue,setSelectedQueue]=useState(null);const[queueTasks,setQueueTasks]=useState([]);const[queueSubscriptions,setQueueSubscriptions]=useState([]);const[teamUsers,setTeamUsers]=useState([]);const[userSubscriptions,setUserSubscriptions]=useState([]);const[loadingState,setLoadingState]=useState({queues:false,tasks:false,inbox:false});const[queueTab,setQueueTab]=useState('tasks');const[inboxTasks,setInboxTasks]=useState([]);const[reservedTasks,setReservedTasks]=useState([]);const[taskCounts,setTaskCounts]=useState({open:0,reserved:0,inProgress:0,deferred:0,closed:0});const[selectedTask,setSelectedTask]=useState(null);const[selectedTaskHistory,setSelectedTaskHistory]=useState([]);const[historyLoading,setHistoryLoading]=useState(false);const[actionLoading,setActionLoading]=useState(false);const[newSubscriptionUser,setNewSubscriptionUser]=useState('');const hasSupervisorAccess=useMemo(()=>{var _user$roles,_user$roles2;return(user===null||user===void 0?void 0:(_user$roles=user.roles)===null||_user$roles===void 0?void 0:_user$roles.includes('SUPERVISOR'))||(user===null||user===void 0?void 0:(_user$roles2=user.roles)===null||_user$roles2===void 0?void 0:_user$roles2.includes('ADMIN'));},[user]);const isSubscribedToQueue=useMemo(()=>{return userSubscriptions.some(subscription=>subscription.queueId===selectedQueueId);},[userSubscriptions,selectedQueueId]);const activeSubscriptionUsers=useMemo(()=>{const activeSet=new Set();queueSubscriptions.forEach(subscription=>{if(subscription.active&&subscription.userId){activeSet.add(subscription.userId.toLowerCase());}});return activeSet;},[queueSubscriptions]);const availableTeamUsers=useMemo(()=>{return teamUsers.filter(member=>{if(!(member!==null&&member!==void 0&&member.username))return false;return!activeSubscriptionUsers.has(member.username.toLowerCase());});},[teamUsers,activeSubscriptionUsers]);const fetchQueues=useCallback(async()=>{if(!user||!hasSupervisorAccess)return;setLoadingState(prev=>_objectSpread(_objectSpread({},prev),{},{queues:true}));try{var _queuesRes$data;const[queuesRes,countsRes,userSubsRes]=await Promise.all([api.get(API_ENDPOINTS.workQueues.list),api.get(API_ENDPOINTS.workQueues.counts),api.get(API_ENDPOINTS.workQueues.userSubscriptions(user.username))]);setQueues(queuesRes.data||[]);setQueueCounts(countsRes.data||{});setUserSubscriptions(userSubsRes.data||[]);if(!selectedQueueId&&(_queuesRes$data=queuesRes.data)!==null&&_queuesRes$data!==void 0&&_queuesRes$data.length){setSelectedQueueId(queuesRes.data[0].id);}}catch(error){console.error('Error fetching work queues',error);}finally{setLoadingState(prev=>_objectSpread(_objectSpread({},prev),{},{queues:false}));}},[user,selectedQueueId,hasSupervisorAccess]);const fetchTeamUsers=useCallback(async()=>{if(!user||!hasSupervisorAccess)return;try{const response=await api.get(API_ENDPOINTS.supervisor.users);setTeamUsers(response.data||[]);}catch(error){console.error('Error fetching team users',error);}},[user,hasSupervisorAccess]);const fetchQueueDetail=useCallback(async queueId=>{setLoadingState(prev=>_objectSpread(_objectSpread({},prev),{},{tasks:true}));try{const[detailRes,tasksRes,subsRes]=await Promise.all([api.get(API_ENDPOINTS.workQueues.detail(queueId)),api.get(API_ENDPOINTS.workQueues.tasks(queueId)),api.get(API_ENDPOINTS.workQueues.subscriptions(queueId))]);setSelectedQueue(detailRes.data);setQueueTasks(tasksRes.data||[]);const subscriptionData=subsRes.data||[];subscriptionData.sort((a,b)=>{if(a.active===b.active){return(a.userId||'').localeCompare(b.userId||'');}return a.active?-1:1;});setQueueSubscriptions(subscriptionData);}catch(error){console.error('Error fetching queue details',error);}finally{setLoadingState(prev=>_objectSpread(_objectSpread({},prev),{},{tasks:false}));}},[]);const fetchUserWorkspace=useCallback(async()=>{if(!user||!hasSupervisorAccess)return;setLoadingState(prev=>_objectSpread(_objectSpread({},prev),{},{inbox:true}));try{var _countsRes$data$open,_countsRes$data,_countsRes$data$reser,_countsRes$data2,_countsRes$data$inPro,_countsRes$data3,_countsRes$data$defer,_countsRes$data4,_countsRes$data$close,_countsRes$data5;const[inboxRes,reservedRes,countsRes]=await Promise.all([api.get(API_ENDPOINTS.tasks.inbox(user.username)),api.get(API_ENDPOINTS.tasks.reserved(user.username)),api.get(API_ENDPOINTS.tasks.counts(user.username))]);setInboxTasks(inboxRes.data||[]);setReservedTasks(reservedRes.data||[]);setTaskCounts({open:(_countsRes$data$open=(_countsRes$data=countsRes.data)===null||_countsRes$data===void 0?void 0:_countsRes$data.open)!==null&&_countsRes$data$open!==void 0?_countsRes$data$open:0,reserved:(_countsRes$data$reser=(_countsRes$data2=countsRes.data)===null||_countsRes$data2===void 0?void 0:_countsRes$data2.reserved)!==null&&_countsRes$data$reser!==void 0?_countsRes$data$reser:0,inProgress:(_countsRes$data$inPro=(_countsRes$data3=countsRes.data)===null||_countsRes$data3===void 0?void 0:_countsRes$data3.inProgress)!==null&&_countsRes$data$inPro!==void 0?_countsRes$data$inPro:0,deferred:(_countsRes$data$defer=(_countsRes$data4=countsRes.data)===null||_countsRes$data4===void 0?void 0:_countsRes$data4.deferred)!==null&&_countsRes$data$defer!==void 0?_countsRes$data$defer:0,closed:(_countsRes$data$close=(_countsRes$data5=countsRes.data)===null||_countsRes$data5===void 0?void 0:_countsRes$data5.closed)!==null&&_countsRes$data$close!==void 0?_countsRes$data$close:0});}catch(error){console.error('Error fetching user workspace tasks',error);}finally{setLoadingState(prev=>_objectSpread(_objectSpread({},prev),{},{inbox:false}));}},[user,hasSupervisorAccess]);useEffect(()=>{if(authLoading){return;}if(!user){navigate('/login');return;}if(!hasSupervisorAccess){navigate('/');return;}fetchQueues();fetchUserWorkspace();fetchTeamUsers();},[authLoading,user,navigate,fetchQueues,fetchUserWorkspace,fetchTeamUsers,hasSupervisorAccess]);useEffect(()=>{if(selectedQueueId){setQueueTab('tasks');fetchQueueDetail(selectedQueueId);}},[selectedQueueId,fetchQueueDetail]);const handleReserveNext=async count=>{if(!selectedQueueId||!user||!hasSupervisorAccess)return;setActionLoading(true);try{await api.post(API_ENDPOINTS.workQueues.reserve(selectedQueueId),{username:user.username,count});await Promise.all([fetchQueueDetail(selectedQueueId),fetchUserWorkspace()]);}catch(error){console.error('Error reserving next tasks',error);alert('Failed to reserve tasks. Please try again.');}finally{setActionLoading(false);}};const handleReserveTask=async taskId=>{if(!user||!hasSupervisorAccess)return;setActionLoading(true);try{await api.post(API_ENDPOINTS.tasks.reserve(taskId),{username:user.username});await Promise.all([fetchQueueDetail(selectedQueueId),fetchUserWorkspace()]);}catch(error){var _error$response,_error$response$data;console.error('Error reserving task',error);alert(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to reserve task');}finally{setActionLoading(false);}};const handleUnreserveTask=async taskId=>{if(!user||!hasSupervisorAccess)return;setActionLoading(true);try{await api.post(API_ENDPOINTS.tasks.unreserve(taskId),{username:user.username});await Promise.all([fetchQueueDetail(selectedQueueId),fetchUserWorkspace()]);}catch(error){var _error$response2,_error$response2$data;console.error('Error unreserving task',error);alert(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to unreserve task');}finally{setActionLoading(false);}};const subscribeUserToQueue=async targetUserId=>{if(!selectedQueueId||!targetUserId||!hasSupervisorAccess)return;setActionLoading(true);try{await api.post(API_ENDPOINTS.workQueues.subscribe(selectedQueueId),{userId:targetUserId});await Promise.all([fetchQueueDetail(selectedQueueId),fetchQueues(),fetchTeamUsers()]);}catch(error){var _error$response3,_error$response3$data;console.error('Error subscribing user to queue',error);alert(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Failed to add subscription');}finally{setActionLoading(false);}};const unsubscribeUserFromQueue=async targetUserId=>{if(!selectedQueueId||!targetUserId||!hasSupervisorAccess)return;setActionLoading(true);try{await api.delete(API_ENDPOINTS.workQueues.unsubscribe(selectedQueueId,targetUserId));await Promise.all([fetchQueueDetail(selectedQueueId),fetchQueues(),fetchTeamUsers()]);}catch(error){var _error$response4,_error$response4$data;console.error('Error removing subscription from queue',error);alert(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Failed to remove subscription');}finally{setActionLoading(false);}};const handleSelfSubscribe=()=>{if(!user)return;subscribeUserToQueue(user.username);};const handleSelfUnsubscribe=()=>{if(!user)return;unsubscribeUserFromQueue(user.username);};const handleAddSubscriptionFromForm=async()=>{if(!newSubscriptionUser)return;await subscribeUserToQueue(newSubscriptionUser);setNewSubscriptionUser('');};const handleDeactivateSubscription=targetUserId=>{unsubscribeUserFromQueue(targetUserId);};const handleReactivateSubscription=targetUserId=>{subscribeUserToQueue(targetUserId);};const getQueueDisplayName=useCallback(queueKey=>{if(!queueKey)return'—';const match=queues.find(queue=>{const key=queue.code&&queue.code.trim()?queue.code:queue.name;return key===queueKey||queue.name===queueKey;});return match?match.name:formatQueueName(queueKey);},[queues]);const openTaskDetail=async task=>{setSelectedTask(task);setSelectedTaskHistory([]);if(!task)return;setHistoryLoading(true);try{const res=await api.get(API_ENDPOINTS.tasks.history(task.id));setSelectedTaskHistory(res.data||[]);}catch(error){console.error('Error fetching task history',error);}finally{setHistoryLoading(false);}};const handleLogout=()=>{logout();navigate('/login');};const renderQueueList=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"queue-table-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"queue-table-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Work Queues\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline\",onClick:fetchQueues,children:\"Refresh\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"queue-table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table queue-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Action\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Administrator\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User Subscription\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tasks\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[queues.map(queue=>{var _queueCounts;return/*#__PURE__*/_jsxs(\"tr\",{className:queue.id===selectedQueueId?'selected':'',children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>setSelectedQueueId(queue.id),children:\"View\"})}),/*#__PURE__*/_jsx(\"td\",{children:getQueueDisplayName(queue.code||queue.name)}),/*#__PURE__*/_jsx(\"td\",{children:queue.administratorUserId||'—'}),/*#__PURE__*/_jsx(\"td\",{children:queue.allowSubscription?'Yes':'No'}),/*#__PURE__*/_jsx(\"td\",{children:(_queueCounts=queueCounts[queue.code||queue.name])!==null&&_queueCounts!==void 0?_queueCounts:0})]},queue.id);}),queues.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",className:\"text-center py-4 text-muted\",children:\"No work queues configured.\"})})]})]})})]});const renderQueueDetail=()=>{var _selectedQueue$sensit;if(!selectedQueue){return/*#__PURE__*/_jsx(\"div\",{className:\"queue-detail-empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Select a work queue to see details.\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"queue-detail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"queue-detail-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:formatQueueName(selectedQueue.name)}),/*#__PURE__*/_jsx(\"p\",{className:\"queue-description\",children:selectedQueue.description||'No description available.'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"queue-header-actions\",children:selectedQueue.allowSubscription?hasSupervisorAccess?isSubscribedToQueue?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline\",onClick:handleSelfUnsubscribe,disabled:actionLoading,children:\"Unsubscribe\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleSelfSubscribe,disabled:actionLoading,children:\"Subscribe\"}):/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-secondary\",children:\"Managed by Queue Admin\"}):/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-secondary\",children:\"Subscriptions Disabled\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"queue-metadata\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Administrator\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedQueue.administratorUserId||'—'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Sensitivity\"}),/*#__PURE__*/_jsx(\"span\",{children:(_selectedQueue$sensit=selectedQueue.sensitivityLevel)!==null&&_selectedQueue$sensit!==void 0?_selectedQueue$sensit:'—'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Subscriptions Allowed\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedQueue.allowSubscription?'Yes':'No'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"My Subscription\"}),/*#__PURE__*/_jsx(\"span\",{children:isSubscribedToQueue?'Active':'Not subscribed'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"queue-toolbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>handleReserveNext(1),disabled:!isSubscribedToQueue||actionLoading,children:\"Reserve Next Task\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>handleReserveNext(5),disabled:!isSubscribedToQueue||actionLoading,children:\"Reserve Next 5 Tasks\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>handleReserveNext(20),disabled:!isSubscribedToQueue||actionLoading,children:\"Reserve Next 20 Tasks\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-right\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Total Tasks: \",queueTasks.length]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"queue-content-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"queue-tab \".concat(queueTab==='tasks'?'active':''),onClick:()=>setQueueTab('tasks'),children:\"Work Queue Tasks\"}),/*#__PURE__*/_jsx(\"button\",{className:\"queue-tab \".concat(queueTab==='subscriptions'?'active':''),onClick:()=>setQueueTab('subscriptions'),children:\"Queue Subscriptions\"}),/*#__PURE__*/_jsx(\"button\",{className:\"queue-tab \".concat(queueTab==='comments'?'active':''),onClick:()=>setQueueTab('comments'),children:\"Comments\"})]}),queueTab==='tasks'&&renderQueueTaskTable(),queueTab==='subscriptions'&&renderQueueSubscriptionTable(),queueTab==='comments'&&renderQueueComments()]});};const renderQueueTaskTable=()=>/*#__PURE__*/_jsx(\"div\",{className:\"queue-tasks-table\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Action\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Task ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subject\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Priority\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reserved By\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Deadline\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[queueTasks.map(task=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:task.reservedBy?/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-secondary\",children:\"Reserved\"}):/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>handleReserveTask(task.id),disabled:!isSubscribedToQueue||actionLoading,children:\"Reserve\\u2026\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>openTaskDetail(task),children:task.id})}),/*#__PURE__*/_jsx(\"td\",{children:task.title}),/*#__PURE__*/_jsx(\"td\",{children:task.priority}),/*#__PURE__*/_jsx(\"td\",{children:task.status}),/*#__PURE__*/_jsx(\"td\",{children:task.reservedBy||'—'}),/*#__PURE__*/_jsx(\"td\",{children:task.dueDate?formatDate(task.dueDate):'—'})]},task.id)),queueTasks.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"text-center py-4 text-muted\",children:\"No tasks available in this queue.\"})})]})]})});const renderQueueSubscriptionTable=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"queue-subscriptions-table\",children:[hasSupervisorAccess&&/*#__PURE__*/_jsx(\"div\",{className:\"subscription-toolbar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-form\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"subscriptionUser\",children:\"Add Subscription\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-form-controls\",children:[/*#__PURE__*/_jsxs(\"select\",{id:\"subscriptionUser\",value:newSubscriptionUser,onChange:event=>setNewSubscriptionUser(event.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select caseworker\\u2026\"}),availableTeamUsers.map(teamMember=>/*#__PURE__*/_jsxs(\"option\",{value:teamMember.username,children:[teamMember.username,\" \",teamMember.openTasks?\"(Open: \".concat(teamMember.openTasks,\")\"):'']},teamMember.username))]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleAddSubscriptionFromForm,disabled:!newSubscriptionUser||actionLoading,children:\"Add Subscription\"})]})]})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subscribed At\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Unsubscribed At\"}),hasSupervisorAccess&&/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[queueSubscriptions.map(sub=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:sub.userId}),/*#__PURE__*/_jsx(\"td\",{children:sub.active?'Active':'Inactive'}),/*#__PURE__*/_jsx(\"td\",{children:sub.subscribedAt?formatDateTime(sub.subscribedAt):'—'}),/*#__PURE__*/_jsx(\"td\",{children:sub.unsubscribedAt?formatDateTime(sub.unsubscribedAt):'—'}),hasSupervisorAccess&&/*#__PURE__*/_jsx(\"td\",{children:sub.active?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-xs\",onClick:()=>handleDeactivateSubscription(sub.userId),disabled:actionLoading,children:\"Remove\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link btn-xs\",onClick:()=>handleReactivateSubscription(sub.userId),disabled:actionLoading,children:\"Reactivate\"})})]},sub.id)),queueSubscriptions.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:hasSupervisorAccess?5:4,className:\"text-center py-4 text-muted\",children:\"No subscriptions for this queue.\"})})]})]})]});const renderQueueComments=()=>/*#__PURE__*/_jsx(\"div\",{className:\"queue-comments\",children:/*#__PURE__*/_jsx(\"p\",{children:(selectedQueue===null||selectedQueue===void 0?void 0:selectedQueue.comments)||'No comments documented for this queue.'})});const renderInbox=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"queue-inbox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"queue-inbox-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Inbox\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline\",onClick:fetchUserWorkspace,children:\"Refresh\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inbox-counts\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"count-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"count-value\",children:taskCounts.open}),/*#__PURE__*/_jsx(\"span\",{className:\"count-label\",children:\"Open\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"count-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"count-value\",children:taskCounts.reserved}),/*#__PURE__*/_jsx(\"span\",{className:\"count-label\",children:\"Reserved\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"count-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"count-value\",children:taskCounts.inProgress}),/*#__PURE__*/_jsx(\"span\",{className:\"count-label\",children:\"In Progress\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"count-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"count-value\",children:taskCounts.deferred}),/*#__PURE__*/_jsx(\"span\",{className:\"count-label\",children:\"Deferred\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"count-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"count-value\",children:taskCounts.closed}),/*#__PURE__*/_jsx(\"span\",{className:\"count-label\",children:\"Closed\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"queue-inbox-table\",children:/*#__PURE__*/_jsx(TaskTable,{tasks:inboxTasks,onOpenTask:openTaskDetail,getQueueDisplayName:getQueueDisplayName})})]});const renderReserved=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"queue-inbox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"queue-inbox-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reserved Tasks\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline\",onClick:fetchUserWorkspace,children:\"Refresh\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"queue-inbox-table\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Action\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Task ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subject\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Priority\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Queue\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Due\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[reservedTasks.map(task=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>handleUnreserveTask(task.id),disabled:actionLoading,children:\"Unreserve\\u2026\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>openTaskDetail(task),children:task.id})}),/*#__PURE__*/_jsx(\"td\",{children:task.title}),/*#__PURE__*/_jsx(\"td\",{children:task.priority}),/*#__PURE__*/_jsx(\"td\",{children:task.status}),/*#__PURE__*/_jsx(\"td\",{children:getQueueDisplayName(task.workQueue)}),/*#__PURE__*/_jsx(\"td\",{children:task.dueDate?formatDate(task.dueDate):'—'})]},task.id)),reservedTasks.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"text-center py-4 text-muted\",children:\"You do not have any reserved tasks.\"})})]})]})})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"workqueue-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ca-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ca-logo\",children:\"CA\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-ca-primary-900\",children:\"CMIPS Work Queue Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-ca-primary-600\",children:\"Manage tasks, subscriptions, and inbox\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(NotificationCenter,{userId:user===null||user===void 0?void 0:user.username}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-ca-primary-700\",children:[\"Welcome, \",/*#__PURE__*/_jsx(\"strong\",{children:user===null||user===void 0?void 0:user.username})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"btn btn-outline\",children:\"Logout\"})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"workqueue-container\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"workqueue-sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shortcuts\"}),/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-link \".concat(viewMode==='queues'?'active':''),onClick:()=>setViewMode('queues'),children:\"Work Queues\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-link \".concat(viewMode==='inbox'?'active':''),onClick:()=>setViewMode('inbox'),children:\"Inbox\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-link \".concat(viewMode==='reserved'?'active':''),onClick:()=>setViewMode('reserved'),children:\"Reserved Tasks\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"My Subscriptions\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[userSubscriptions.map(subscription=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-link \".concat(subscription.queueId===selectedQueueId?'active':''),onClick:()=>{setSelectedQueueId(subscription.queueId);setViewMode('queues');},children:subscription.queueName||getQueueDisplayName(subscription.queueCode||subscription.queueId)})},subscription.id)),userSubscriptions.length===0&&/*#__PURE__*/_jsx(\"li\",{className:\"text-muted small\",children:\"No subscriptions yet.\"})]})]})]}),/*#__PURE__*/_jsx(\"main\",{className:\"workqueue-main\",children:loadingState.queues&&queues.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"loading-state\",children:\"Loading queues...\"}):viewMode==='inbox'?renderInbox():viewMode==='reserved'?renderReserved():/*#__PURE__*/_jsxs(\"div\",{className:\"queue-content\",children:[renderQueueList(),loadingState.tasks&&!queueTasks.length?/*#__PURE__*/_jsx(\"div\",{className:\"loading-state\",children:\"Loading queue details...\"}):renderQueueDetail()]})})]}),selectedTask&&/*#__PURE__*/_jsx(TaskDrawer,{task:selectedTask,history:selectedTaskHistory,onClose:()=>setSelectedTask(null),loading:historyLoading,getQueueDisplayName:getQueueDisplayName})]});};const TaskTable=_ref=>{let{tasks,onOpenTask,getQueueDisplayName}=_ref;return/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Task ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subject\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Priority\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Queue\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Due\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[tasks.map(task=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>onOpenTask(task),children:task.id})}),/*#__PURE__*/_jsx(\"td\",{children:task.title}),/*#__PURE__*/_jsx(\"td\",{children:task.priority}),/*#__PURE__*/_jsx(\"td\",{children:task.status}),/*#__PURE__*/_jsx(\"td\",{children:getQueueDisplayName(task.workQueue)}),/*#__PURE__*/_jsx(\"td\",{children:task.dueDate?formatDate(task.dueDate):'—'})]},task.id)),tasks.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",className:\"text-center py-4 text-muted\",children:\"No tasks to display.\"})})]})]});};const TaskDrawer=_ref2=>{let{task,history,onClose,loading,getQueueDisplayName}=_ref2;return/*#__PURE__*/_jsx(\"div\",{className:\"task-drawer-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"task-drawer\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"task-drawer-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:task.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"task-drawer-subtitle\",children:[\"Task ID: \",task.id]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:onClose,children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"task-drawer-body\",children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-grid\",children:[/*#__PURE__*/_jsx(DetailItem,{label:\"Status\",value:task.status}),/*#__PURE__*/_jsx(DetailItem,{label:\"Priority\",value:task.priority}),/*#__PURE__*/_jsx(DetailItem,{label:\"Assigned To\",value:task.assignedTo}),/*#__PURE__*/_jsx(DetailItem,{label:\"Reserved By\",value:task.reservedBy||'—'}),/*#__PURE__*/_jsx(DetailItem,{label:\"Work Queue\",value:getQueueDisplayName(task.workQueue)}),/*#__PURE__*/_jsx(DetailItem,{label:\"Due Date\",value:task.dueDate?formatDateTime(task.dueDate):'—'}),/*#__PURE__*/_jsx(DetailItem,{label:\"Last Action\",value:task.lastActionAt?formatDateTime(task.lastActionAt):'—'})]})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{children:task.description||'No description provided.'})]}),task.actionLink&&/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Primary Action\"}),/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-primary\",href:task.actionLink,target:\"_blank\",rel:\"noreferrer\",children:\"Open Related Entity\"})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Timeline\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading history\\u2026\"}):history.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No history recorded.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"history-list\",children:history.map(event=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"history-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"history-event\",children:event.eventType}),/*#__PURE__*/_jsx(\"span\",{className:\"history-time\",children:formatDateTime(event.eventTime)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"history-details\",children:[/*#__PURE__*/_jsx(DetailItem,{label:\"From\",value:event.fromUser||'—'}),/*#__PURE__*/_jsx(DetailItem,{label:\"To\",value:event.toUser||'—'})]}),event.comments&&/*#__PURE__*/_jsx(\"p\",{className:\"history-comment\",children:event.comments})]},event.id))})]})]})]})});};const DetailItem=_ref3=>{let{label,value}=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:label}),/*#__PURE__*/_jsx(\"span\",{children:value})]});};const formatDate=value=>{try{return new Date(value).toLocaleDateString();}catch(_unused){return value;}};const formatDateTime=value=>{try{return new Date(value).toLocaleString();}catch(_unused2){return value;}};const formatQueueName=value=>{if(!value)return'—';return value.replace(/_/g,' ').replace(/\\b\\w/g,c=>c.toUpperCase());};export default WorkQueuePage;","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useState","useNavigate","useAuth","apiClient","api","API_ENDPOINTS","NotificationCenter","jsx","_jsx","jsxs","_jsxs","WorkQueuePage","user","loading","authLoading","logout","navigate","viewMode","setViewMode","queues","setQueues","queueCounts","setQueueCounts","selectedQueueId","setSelectedQueueId","selectedQueue","setSelectedQueue","queueTasks","setQueueTasks","queueSubscriptions","setQueueSubscriptions","teamUsers","setTeamUsers","userSubscriptions","setUserSubscriptions","loadingState","setLoadingState","tasks","inbox","queueTab","setQueueTab","inboxTasks","setInboxTasks","reservedTasks","setReservedTasks","taskCounts","setTaskCounts","open","reserved","inProgress","deferred","closed","selectedTask","setSelectedTask","selectedTaskHistory","setSelectedTaskHistory","historyLoading","setHistoryLoading","actionLoading","setActionLoading","newSubscriptionUser","setNewSubscriptionUser","hasSupervisorAccess","_user$roles","_user$roles2","roles","includes","isSubscribedToQueue","some","subscription","queueId","activeSubscriptionUsers","activeSet","Set","forEach","active","userId","add","toLowerCase","availableTeamUsers","filter","member","username","has","fetchQueues","prev","_objectSpread","_queuesRes$data","queuesRes","countsRes","userSubsRes","Promise","all","get","workQueues","list","counts","data","length","id","error","console","fetchTeamUsers","response","supervisor","users","fetchQueueDetail","detailRes","tasksRes","subsRes","detail","subscriptions","subscriptionData","sort","a","b","localeCompare","fetchUserWorkspace","_countsRes$data$open","_countsRes$data","_countsRes$data$reser","_countsRes$data2","_countsRes$data$inPro","_countsRes$data3","_countsRes$data$defer","_countsRes$data4","_countsRes$data$close","_countsRes$data5","inboxRes","reservedRes","handleReserveNext","count","post","reserve","alert","handleReserveTask","taskId","_error$response","_error$response$data","message","handleUnreserveTask","unreserve","_error$response2","_error$response2$data","subscribeUserToQueue","targetUserId","subscribe","_error$response3","_error$response3$data","unsubscribeUserFromQueue","delete","unsubscribe","_error$response4","_error$response4$data","handleSelfSubscribe","handleSelfUnsubscribe","handleAddSubscriptionFromForm","handleDeactivateSubscription","handleReactivateSubscription","getQueueDisplayName","queueKey","match","find","queue","key","code","trim","name","formatQueueName","openTaskDetail","task","res","history","handleLogout","renderQueueList","className","children","onClick","map","_queueCounts","administratorUserId","allowSubscription","colSpan","renderQueueDetail","_selectedQueue$sensit","description","disabled","sensitivityLevel","concat","renderQueueTaskTable","renderQueueSubscriptionTable","renderQueueComments","reservedBy","title","priority","status","dueDate","formatDate","htmlFor","value","onChange","event","target","teamMember","openTasks","sub","subscribedAt","formatDateTime","unsubscribedAt","comments","renderInbox","TaskTable","onOpenTask","renderReserved","workQueue","queueName","queueCode","TaskDrawer","onClose","_ref","_ref2","e","stopPropagation","DetailItem","label","assignedTo","lastActionAt","actionLink","href","rel","eventType","eventTime","fromUser","toUser","_ref3","Date","toLocaleDateString","_unused","toLocaleString","_unused2","replace","c","toUpperCase"],"sources":["/Users/sajeev/Documents/cmips-security/cmipsapplication/frontend/src/components/WorkQueuePage.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { apiClient as api, API_ENDPOINTS } from '../config/api';\nimport NotificationCenter from './NotificationCenter';\nimport './WorkQueuePage.css';\n\nconst WorkQueuePage = () => {\n  const { user, loading: authLoading, logout } = useAuth();\n  const navigate = useNavigate();\n\n  const [viewMode, setViewMode] = useState('queues');\n  const [queues, setQueues] = useState([]);\n  const [queueCounts, setQueueCounts] = useState({});\n  const [selectedQueueId, setSelectedQueueId] = useState(null);\n  const [selectedQueue, setSelectedQueue] = useState(null);\n  const [queueTasks, setQueueTasks] = useState([]);\n  const [queueSubscriptions, setQueueSubscriptions] = useState([]);\n  const [teamUsers, setTeamUsers] = useState([]);\n  const [userSubscriptions, setUserSubscriptions] = useState([]);\n  const [loadingState, setLoadingState] = useState({ queues: false, tasks: false, inbox: false });\n  const [queueTab, setQueueTab] = useState('tasks');\n  const [inboxTasks, setInboxTasks] = useState([]);\n  const [reservedTasks, setReservedTasks] = useState([]);\n  const [taskCounts, setTaskCounts] = useState({ open: 0, reserved: 0, inProgress: 0, deferred: 0, closed: 0 });\n  const [selectedTask, setSelectedTask] = useState(null);\n  const [selectedTaskHistory, setSelectedTaskHistory] = useState([]);\n  const [historyLoading, setHistoryLoading] = useState(false);\n  const [actionLoading, setActionLoading] = useState(false);\n  const [newSubscriptionUser, setNewSubscriptionUser] = useState('');\n\n  const hasSupervisorAccess = useMemo(() => {\n    return user?.roles?.includes('SUPERVISOR') || user?.roles?.includes('ADMIN');\n  }, [user]);\n\n  const isSubscribedToQueue = useMemo(() => {\n    return userSubscriptions.some((subscription) => subscription.queueId === selectedQueueId);\n  }, [userSubscriptions, selectedQueueId]);\n\n  const activeSubscriptionUsers = useMemo(() => {\n    const activeSet = new Set();\n    queueSubscriptions.forEach((subscription) => {\n      if (subscription.active && subscription.userId) {\n        activeSet.add(subscription.userId.toLowerCase());\n      }\n    });\n    return activeSet;\n  }, [queueSubscriptions]);\n\n  const availableTeamUsers = useMemo(() => {\n    return teamUsers.filter((member) => {\n      if (!member?.username) return false;\n      return !activeSubscriptionUsers.has(member.username.toLowerCase());\n    });\n  }, [teamUsers, activeSubscriptionUsers]);\n\n  const fetchQueues = useCallback(async () => {\n    if (!user || !hasSupervisorAccess) return;\n    setLoadingState((prev) => ({ ...prev, queues: true }));\n    try {\n      const [queuesRes, countsRes, userSubsRes] = await Promise.all([\n        api.get(API_ENDPOINTS.workQueues.list),\n        api.get(API_ENDPOINTS.workQueues.counts),\n        api.get(API_ENDPOINTS.workQueues.userSubscriptions(user.username)),\n      ]);\n      setQueues(queuesRes.data || []);\n      setQueueCounts(countsRes.data || {});\n      setUserSubscriptions(userSubsRes.data || []);\n      if (!selectedQueueId && queuesRes.data?.length) {\n        setSelectedQueueId(queuesRes.data[0].id);\n      }\n    } catch (error) {\n      console.error('Error fetching work queues', error);\n    } finally {\n      setLoadingState((prev) => ({ ...prev, queues: false }));\n    }\n  }, [user, selectedQueueId, hasSupervisorAccess]);\n\n  const fetchTeamUsers = useCallback(async () => {\n    if (!user || !hasSupervisorAccess) return;\n    try {\n      const response = await api.get(API_ENDPOINTS.supervisor.users);\n      setTeamUsers(response.data || []);\n    } catch (error) {\n      console.error('Error fetching team users', error);\n    }\n  }, [user, hasSupervisorAccess]);\n\n  const fetchQueueDetail = useCallback(async (queueId) => {\n    setLoadingState((prev) => ({ ...prev, tasks: true }));\n    try {\n      const [detailRes, tasksRes, subsRes] = await Promise.all([\n        api.get(API_ENDPOINTS.workQueues.detail(queueId)),\n        api.get(API_ENDPOINTS.workQueues.tasks(queueId)),\n        api.get(API_ENDPOINTS.workQueues.subscriptions(queueId)),\n      ]);\n      setSelectedQueue(detailRes.data);\n      setQueueTasks(tasksRes.data || []);\n      const subscriptionData = subsRes.data || [];\n      subscriptionData.sort((a, b) => {\n        if (a.active === b.active) {\n          return (a.userId || '').localeCompare(b.userId || '');\n        }\n        return a.active ? -1 : 1;\n      });\n      setQueueSubscriptions(subscriptionData);\n    } catch (error) {\n      console.error('Error fetching queue details', error);\n    } finally {\n      setLoadingState((prev) => ({ ...prev, tasks: false }));\n    }\n  }, []);\n\n  const fetchUserWorkspace = useCallback(async () => {\n    if (!user || !hasSupervisorAccess) return;\n    setLoadingState((prev) => ({ ...prev, inbox: true }));\n    try {\n      const [inboxRes, reservedRes, countsRes] = await Promise.all([\n        api.get(API_ENDPOINTS.tasks.inbox(user.username)),\n        api.get(API_ENDPOINTS.tasks.reserved(user.username)),\n        api.get(API_ENDPOINTS.tasks.counts(user.username)),\n      ]);\n      setInboxTasks(inboxRes.data || []);\n      setReservedTasks(reservedRes.data || []);\n      setTaskCounts({\n        open: countsRes.data?.open ?? 0,\n        reserved: countsRes.data?.reserved ?? 0,\n        inProgress: countsRes.data?.inProgress ?? 0,\n        deferred: countsRes.data?.deferred ?? 0,\n        closed: countsRes.data?.closed ?? 0,\n      });\n    } catch (error) {\n      console.error('Error fetching user workspace tasks', error);\n    } finally {\n      setLoadingState((prev) => ({ ...prev, inbox: false }));\n    }\n  }, [user, hasSupervisorAccess]);\n\n  useEffect(() => {\n    if (authLoading) {\n      return;\n    }\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n    if (!hasSupervisorAccess) {\n      navigate('/');\n      return;\n    }\n    fetchQueues();\n    fetchUserWorkspace();\n    fetchTeamUsers();\n  }, [authLoading, user, navigate, fetchQueues, fetchUserWorkspace, fetchTeamUsers, hasSupervisorAccess]);\n\n  useEffect(() => {\n    if (selectedQueueId) {\n      setQueueTab('tasks');\n      fetchQueueDetail(selectedQueueId);\n    }\n  }, [selectedQueueId, fetchQueueDetail]);\n\n  const handleReserveNext = async (count) => {\n    if (!selectedQueueId || !user || !hasSupervisorAccess) return;\n    setActionLoading(true);\n    try {\n      await api.post(API_ENDPOINTS.workQueues.reserve(selectedQueueId), {\n        username: user.username,\n        count,\n      });\n      await Promise.all([fetchQueueDetail(selectedQueueId), fetchUserWorkspace()]);\n    } catch (error) {\n      console.error('Error reserving next tasks', error);\n      alert('Failed to reserve tasks. Please try again.');\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleReserveTask = async (taskId) => {\n    if (!user || !hasSupervisorAccess) return;\n    setActionLoading(true);\n    try {\n      await api.post(API_ENDPOINTS.tasks.reserve(taskId), { username: user.username });\n      await Promise.all([fetchQueueDetail(selectedQueueId), fetchUserWorkspace()]);\n    } catch (error) {\n      console.error('Error reserving task', error);\n      alert(error.response?.data?.message || 'Failed to reserve task');\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleUnreserveTask = async (taskId) => {\n    if (!user || !hasSupervisorAccess) return;\n    setActionLoading(true);\n    try {\n      await api.post(API_ENDPOINTS.tasks.unreserve(taskId), { username: user.username });\n      await Promise.all([fetchQueueDetail(selectedQueueId), fetchUserWorkspace()]);\n    } catch (error) {\n      console.error('Error unreserving task', error);\n      alert(error.response?.data?.message || 'Failed to unreserve task');\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const subscribeUserToQueue = async (targetUserId) => {\n    if (!selectedQueueId || !targetUserId || !hasSupervisorAccess) return;\n    setActionLoading(true);\n    try {\n      await api.post(API_ENDPOINTS.workQueues.subscribe(selectedQueueId), { userId: targetUserId });\n      await Promise.all([\n        fetchQueueDetail(selectedQueueId),\n        fetchQueues(),\n        fetchTeamUsers(),\n      ]);\n    } catch (error) {\n      console.error('Error subscribing user to queue', error);\n      alert(error.response?.data?.message || 'Failed to add subscription');\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const unsubscribeUserFromQueue = async (targetUserId) => {\n    if (!selectedQueueId || !targetUserId || !hasSupervisorAccess) return;\n    setActionLoading(true);\n    try {\n      await api.delete(API_ENDPOINTS.workQueues.unsubscribe(selectedQueueId, targetUserId));\n      await Promise.all([\n        fetchQueueDetail(selectedQueueId),\n        fetchQueues(),\n        fetchTeamUsers(),\n      ]);\n    } catch (error) {\n      console.error('Error removing subscription from queue', error);\n      alert(error.response?.data?.message || 'Failed to remove subscription');\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleSelfSubscribe = () => {\n    if (!user) return;\n    subscribeUserToQueue(user.username);\n  };\n\n  const handleSelfUnsubscribe = () => {\n    if (!user) return;\n    unsubscribeUserFromQueue(user.username);\n  };\n\n  const handleAddSubscriptionFromForm = async () => {\n    if (!newSubscriptionUser) return;\n    await subscribeUserToQueue(newSubscriptionUser);\n    setNewSubscriptionUser('');\n  };\n\n  const handleDeactivateSubscription = (targetUserId) => {\n    unsubscribeUserFromQueue(targetUserId);\n  };\n\n  const handleReactivateSubscription = (targetUserId) => {\n    subscribeUserToQueue(targetUserId);\n  };\n\n  const getQueueDisplayName = useCallback((queueKey) => {\n    if (!queueKey) return '—';\n    const match = queues.find((queue) => {\n      const key = (queue.code && queue.code.trim()) ? queue.code : queue.name;\n      return key === queueKey || queue.name === queueKey;\n    });\n    return match ? match.name : formatQueueName(queueKey);\n  }, [queues]);\n\n  const openTaskDetail = async (task) => {\n    setSelectedTask(task);\n    setSelectedTaskHistory([]);\n    if (!task) return;\n    setHistoryLoading(true);\n    try {\n      const res = await api.get(API_ENDPOINTS.tasks.history(task.id));\n      setSelectedTaskHistory(res.data || []);\n    } catch (error) {\n      console.error('Error fetching task history', error);\n    } finally {\n      setHistoryLoading(false);\n    }\n  };\n\n  const handleLogout = () => {\n    logout();\n    navigate('/login');\n  };\n\n  const renderQueueList = () => (\n    <div className=\"queue-table-card\">\n      <div className=\"queue-table-header\">\n        <h2>Work Queues</h2>\n        <button className=\"btn btn-outline\" onClick={fetchQueues}>Refresh</button>\n      </div>\n      <div className=\"queue-table-wrapper\">\n        <table className=\"table queue-table\">\n          <thead>\n            <tr>\n              <th>Action</th>\n              <th>Name</th>\n              <th>Administrator</th>\n              <th>User Subscription</th>\n              <th>Tasks</th>\n            </tr>\n          </thead>\n          <tbody>\n            {queues.map((queue) => (\n              <tr key={queue.id} className={queue.id === selectedQueueId ? 'selected' : ''}>\n                <td>\n                  <button className=\"link-btn\" onClick={() => setSelectedQueueId(queue.id)}>View</button>\n                </td>\n                <td>{getQueueDisplayName(queue.code || queue.name)}</td>\n                <td>{queue.administratorUserId || '—'}</td>\n                <td>{queue.allowSubscription ? 'Yes' : 'No'}</td>\n                <td>{queueCounts[queue.code || queue.name] ?? 0}</td>\n              </tr>\n            ))}\n            {queues.length === 0 && (\n              <tr>\n                <td colSpan=\"5\" className=\"text-center py-4 text-muted\">No work queues configured.</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n\n  const renderQueueDetail = () => {\n    if (!selectedQueue) {\n      return (\n        <div className=\"queue-detail-empty\">\n          <p>Select a work queue to see details.</p>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"queue-detail\">\n        <div className=\"queue-detail-header\">\n          <div>\n            <h2>{formatQueueName(selectedQueue.name)}</h2>\n            <p className=\"queue-description\">{selectedQueue.description || 'No description available.'}</p>\n          </div>\n          <div className=\"queue-header-actions\">\n            {selectedQueue.allowSubscription ? (\n              hasSupervisorAccess ? (\n                isSubscribedToQueue ? (\n                  <button className=\"btn btn-outline\" onClick={handleSelfUnsubscribe} disabled={actionLoading}>\n                    Unsubscribe\n                  </button>\n                ) : (\n                  <button className=\"btn btn-primary\" onClick={handleSelfSubscribe} disabled={actionLoading}>\n                    Subscribe\n                  </button>\n                )\n              ) : (\n                <span className=\"badge badge-secondary\">Managed by Queue Admin</span>\n              )\n            ) : (\n              <span className=\"badge badge-secondary\">Subscriptions Disabled</span>\n            )}\n          </div>\n        </div>\n\n        <div className=\"queue-metadata\">\n          <div>\n            <label>Administrator</label>\n            <span>{selectedQueue.administratorUserId || '—'}</span>\n          </div>\n          <div>\n            <label>Sensitivity</label>\n            <span>{selectedQueue.sensitivityLevel ?? '—'}</span>\n          </div>\n          <div>\n            <label>Subscriptions Allowed</label>\n            <span>{selectedQueue.allowSubscription ? 'Yes' : 'No'}</span>\n          </div>\n          <div>\n            <label>My Subscription</label>\n            <span>{isSubscribedToQueue ? 'Active' : 'Not subscribed'}</span>\n          </div>\n        </div>\n\n        <div className=\"queue-toolbar\">\n          <div className=\"toolbar-left\">\n            <button className=\"btn btn-primary\" onClick={() => handleReserveNext(1)} disabled={!isSubscribedToQueue || actionLoading}>\n              Reserve Next Task\n            </button>\n            <button className=\"btn btn-primary\" onClick={() => handleReserveNext(5)} disabled={!isSubscribedToQueue || actionLoading}>\n              Reserve Next 5 Tasks\n            </button>\n            <button className=\"btn btn-primary\" onClick={() => handleReserveNext(20)} disabled={!isSubscribedToQueue || actionLoading}>\n              Reserve Next 20 Tasks\n            </button>\n          </div>\n          <div className=\"toolbar-right\">\n            <span>Total Tasks: {queueTasks.length}</span>\n          </div>\n        </div>\n\n        <div className=\"queue-content-tabs\">\n          <button\n            className={`queue-tab ${queueTab === 'tasks' ? 'active' : ''}`}\n            onClick={() => setQueueTab('tasks')}\n          >\n            Work Queue Tasks\n          </button>\n          <button\n            className={`queue-tab ${queueTab === 'subscriptions' ? 'active' : ''}`}\n            onClick={() => setQueueTab('subscriptions')}\n          >\n            Queue Subscriptions\n          </button>\n          <button\n            className={`queue-tab ${queueTab === 'comments' ? 'active' : ''}`}\n            onClick={() => setQueueTab('comments')}\n          >\n            Comments\n          </button>\n        </div>\n\n        {queueTab === 'tasks' && renderQueueTaskTable()}\n        {queueTab === 'subscriptions' && renderQueueSubscriptionTable()}\n        {queueTab === 'comments' && renderQueueComments()}\n      </div>\n    );\n  };\n\n  const renderQueueTaskTable = () => (\n    <div className=\"queue-tasks-table\">\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>Action</th>\n            <th>Task ID</th>\n            <th>Subject</th>\n            <th>Priority</th>\n            <th>Status</th>\n            <th>Reserved By</th>\n            <th>Deadline</th>\n          </tr>\n        </thead>\n          <tbody>\n            {queueTasks.map((task) => (\n            <tr key={task.id}>\n              <td>\n                {task.reservedBy ? (\n                  <span className=\"badge badge-secondary\">Reserved</span>\n                ) : (\n                  <button\n                    className=\"link-btn\"\n                    onClick={() => handleReserveTask(task.id)}\n                    disabled={!isSubscribedToQueue || actionLoading}\n                  >\n                    Reserve…\n                  </button>\n                )}\n              </td>\n              <td>\n                <button className=\"link-btn\" onClick={() => openTaskDetail(task)}>\n                  {task.id}\n                </button>\n              </td>\n              <td>{task.title}</td>\n              <td>{task.priority}</td>\n                  <td>{task.status}</td>\n                  <td>{task.reservedBy || '—'}</td>\n                  <td>{task.dueDate ? formatDate(task.dueDate) : '—'}</td>\n            </tr>\n          ))}\n          {queueTasks.length === 0 && (\n            <tr>\n              <td colSpan=\"7\" className=\"text-center py-4 text-muted\">\n                No tasks available in this queue.\n              </td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n\n  const renderQueueSubscriptionTable = () => (\n    <div className=\"queue-subscriptions-table\">\n      {hasSupervisorAccess && (\n        <div className=\"subscription-toolbar\">\n          <div className=\"subscription-form\">\n            <label htmlFor=\"subscriptionUser\">Add Subscription</label>\n            <div className=\"subscription-form-controls\">\n              <select\n                id=\"subscriptionUser\"\n                value={newSubscriptionUser}\n                onChange={(event) => setNewSubscriptionUser(event.target.value)}\n              >\n                <option value=\"\">Select caseworker…</option>\n                {availableTeamUsers.map((teamMember) => (\n                  <option key={teamMember.username} value={teamMember.username}>\n                    {teamMember.username} {teamMember.openTasks ? `(Open: ${teamMember.openTasks})` : ''}\n                  </option>\n                ))}\n              </select>\n              <button\n                className=\"btn btn-primary\"\n                onClick={handleAddSubscriptionFromForm}\n                disabled={!newSubscriptionUser || actionLoading}\n              >\n                Add Subscription\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>User</th>\n            <th>Status</th>\n            <th>Subscribed At</th>\n            <th>Unsubscribed At</th>\n            {hasSupervisorAccess && <th>Action</th>}\n          </tr>\n        </thead>\n        <tbody>\n          {queueSubscriptions.map((sub) => (\n            <tr key={sub.id}>\n              <td>{sub.userId}</td>\n              <td>{sub.active ? 'Active' : 'Inactive'}</td>\n              <td>{sub.subscribedAt ? formatDateTime(sub.subscribedAt) : '—'}</td>\n              <td>{sub.unsubscribedAt ? formatDateTime(sub.unsubscribedAt) : '—'}</td>\n              {hasSupervisorAccess && (\n                <td>\n                  {sub.active ? (\n                    <button\n                      className=\"btn btn-outline btn-xs\"\n                      onClick={() => handleDeactivateSubscription(sub.userId)}\n                      disabled={actionLoading}\n                    >\n                      Remove\n                    </button>\n                  ) : (\n                    <button\n                      className=\"btn btn-link btn-xs\"\n                      onClick={() => handleReactivateSubscription(sub.userId)}\n                      disabled={actionLoading}\n                    >\n                      Reactivate\n                    </button>\n                  )}\n                </td>\n              )}\n            </tr>\n          ))}\n          {queueSubscriptions.length === 0 && (\n            <tr>\n              <td colSpan={hasSupervisorAccess ? 5 : 4} className=\"text-center py-4 text-muted\">\n                No subscriptions for this queue.\n              </td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n\n  const renderQueueComments = () => (\n    <div className=\"queue-comments\">\n      <p>{selectedQueue?.comments || 'No comments documented for this queue.'}</p>\n    </div>\n  );\n\n  const renderInbox = () => (\n    <div className=\"queue-inbox\">\n      <div className=\"queue-inbox-header\">\n        <h2>My Inbox</h2>\n        <button className=\"btn btn-outline\" onClick={fetchUserWorkspace}>Refresh</button>\n      </div>\n      <div className=\"inbox-counts\">\n        <div className=\"count-card\">\n          <span className=\"count-value\">{taskCounts.open}</span>\n          <span className=\"count-label\">Open</span>\n        </div>\n        <div className=\"count-card\">\n          <span className=\"count-value\">{taskCounts.reserved}</span>\n          <span className=\"count-label\">Reserved</span>\n        </div>\n        <div className=\"count-card\">\n          <span className=\"count-value\">{taskCounts.inProgress}</span>\n          <span className=\"count-label\">In Progress</span>\n        </div>\n        <div className=\"count-card\">\n          <span className=\"count-value\">{taskCounts.deferred}</span>\n          <span className=\"count-label\">Deferred</span>\n        </div>\n        <div className=\"count-card\">\n          <span className=\"count-value\">{taskCounts.closed}</span>\n          <span className=\"count-label\">Closed</span>\n        </div>\n      </div>\n      <div className=\"queue-inbox-table\">\n        <TaskTable tasks={inboxTasks} onOpenTask={openTaskDetail} getQueueDisplayName={getQueueDisplayName} />\n      </div>\n    </div>\n  );\n\n  const renderReserved = () => (\n    <div className=\"queue-inbox\">\n      <div className=\"queue-inbox-header\">\n        <h2>Reserved Tasks</h2>\n        <button className=\"btn btn-outline\" onClick={fetchUserWorkspace}>Refresh</button>\n      </div>\n      <div className=\"queue-inbox-table\">\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>Action</th>\n              <th>Task ID</th>\n              <th>Subject</th>\n              <th>Priority</th>\n              <th>Status</th>\n              <th>Queue</th>\n              <th>Due</th>\n            </tr>\n          </thead>\n          <tbody>\n            {reservedTasks.map((task) => (\n              <tr key={task.id}>\n                <td>\n                  <button className=\"link-btn\" onClick={() => handleUnreserveTask(task.id)} disabled={actionLoading}>\n                    Unreserve…\n                  </button>\n                </td>\n                <td>\n                  <button className=\"link-btn\" onClick={() => openTaskDetail(task)}>\n                    {task.id}\n                  </button>\n                </td>\n                <td>{task.title}</td>\n                <td>{task.priority}</td>\n                <td>{task.status}</td>\n                <td>{getQueueDisplayName(task.workQueue)}</td>\n                <td>{task.dueDate ? formatDate(task.dueDate) : '—'}</td>\n              </tr>\n            ))}\n            {reservedTasks.length === 0 && (\n              <tr>\n                <td colSpan=\"7\" className=\"text-center py-4 text-muted\">\n                  You do not have any reserved tasks.\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"workqueue-page\">\n      <div className=\"ca-header\">\n        <div className=\"container\">\n          <div className=\"flex justify-between items-center py-4\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"ca-logo\">CA</div>\n              <div>\n                <h1 className=\"text-xl font-bold text-ca-primary-900\">CMIPS Work Queue Management</h1>\n                <p className=\"text-sm text-ca-primary-600\">Manage tasks, subscriptions, and inbox</p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <NotificationCenter userId={user?.username} />\n              <span className=\"text-sm text-ca-primary-700\">\n                Welcome, <strong>{user?.username}</strong>\n              </span>\n              <button onClick={handleLogout} className=\"btn btn-outline\">\n                Logout\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"workqueue-container\">\n        <aside className=\"workqueue-sidebar\">\n          <div className=\"sidebar-section\">\n            <h3>Shortcuts</h3>\n            <nav>\n              <button className={`sidebar-link ${viewMode === 'queues' ? 'active' : ''}`} onClick={() => setViewMode('queues')}>\n                Work Queues\n              </button>\n              <button className={`sidebar-link ${viewMode === 'inbox' ? 'active' : ''}`} onClick={() => setViewMode('inbox')}>\n                Inbox\n              </button>\n              <button className={`sidebar-link ${viewMode === 'reserved' ? 'active' : ''}`} onClick={() => setViewMode('reserved')}>\n                Reserved Tasks\n              </button>\n            </nav>\n          </div>\n          <div className=\"sidebar-section\">\n            <h3>My Subscriptions</h3>\n            <ul>\n              {userSubscriptions.map((subscription) => (\n                <li key={subscription.id}>\n                  <button\n                    className={`sidebar-link ${subscription.queueId === selectedQueueId ? 'active' : ''}`}\n                    onClick={() => {\n                      setSelectedQueueId(subscription.queueId);\n                      setViewMode('queues');\n                    }}\n                  >\n                    {subscription.queueName || getQueueDisplayName(subscription.queueCode || subscription.queueId)}\n                  </button>\n                </li>\n              ))}\n              {userSubscriptions.length === 0 && (\n                <li className=\"text-muted small\">No subscriptions yet.</li>\n              )}\n            </ul>\n          </div>\n        </aside>\n\n        <main className=\"workqueue-main\">\n          {loadingState.queues && queues.length === 0 ? (\n            <div className=\"loading-state\">Loading queues...</div>\n          ) : viewMode === 'inbox' ? (\n            renderInbox()\n          ) : viewMode === 'reserved' ? (\n            renderReserved()\n          ) : (\n            <div className=\"queue-content\">\n              {renderQueueList()}\n              {loadingState.tasks && !queueTasks.length ? (\n                <div className=\"loading-state\">Loading queue details...</div>\n              ) : (\n                renderQueueDetail()\n              )}\n            </div>\n          )}\n        </main>\n      </div>\n\n      {selectedTask && (\n        <TaskDrawer\n          task={selectedTask}\n          history={selectedTaskHistory}\n          onClose={() => setSelectedTask(null)}\n          loading={historyLoading}\n          getQueueDisplayName={getQueueDisplayName}\n        />\n      )}\n    </div>\n  );\n};\n\nconst TaskTable = ({ tasks, onOpenTask, getQueueDisplayName }) => (\n  <table className=\"table\">\n    <thead>\n      <tr>\n        <th>Task ID</th>\n        <th>Subject</th>\n        <th>Priority</th>\n        <th>Status</th>\n        <th>Queue</th>\n        <th>Due</th>\n      </tr>\n    </thead>\n    <tbody>\n      {tasks.map((task) => (\n        <tr key={task.id}>\n          <td>\n            <button className=\"link-btn\" onClick={() => onOpenTask(task)}>\n              {task.id}\n            </button>\n          </td>\n          <td>{task.title}</td>\n          <td>{task.priority}</td>\n          <td>{task.status}</td>\n          <td>{getQueueDisplayName(task.workQueue)}</td>\n          <td>{task.dueDate ? formatDate(task.dueDate) : '—'}</td>\n        </tr>\n      ))}\n      {tasks.length === 0 && (\n        <tr>\n          <td colSpan=\"6\" className=\"text-center py-4 text-muted\">\n            No tasks to display.\n          </td>\n        </tr>\n      )}\n    </tbody>\n  </table>\n);\n\nconst TaskDrawer = ({ task, history, onClose, loading, getQueueDisplayName }) => (\n  <div className=\"task-drawer-overlay\" onClick={onClose}>\n    <div className=\"task-drawer\" onClick={(e) => e.stopPropagation()}>\n      <div className=\"task-drawer-header\">\n        <div>\n          <h2>{task.title}</h2>\n          <p className=\"task-drawer-subtitle\">Task ID: {task.id}</p>\n        </div>\n        <button className=\"close-btn\" onClick={onClose}>✕</button>\n      </div>\n      <div className=\"task-drawer-body\">\n        <section>\n          <h3>Details</h3>\n          <div className=\"detail-grid\">\n            <DetailItem label=\"Status\" value={task.status} />\n            <DetailItem label=\"Priority\" value={task.priority} />\n            <DetailItem label=\"Assigned To\" value={task.assignedTo} />\n            <DetailItem label=\"Reserved By\" value={task.reservedBy || '—'} />\n            <DetailItem label=\"Work Queue\" value={getQueueDisplayName(task.workQueue)} />\n            <DetailItem label=\"Due Date\" value={task.dueDate ? formatDateTime(task.dueDate) : '—'} />\n            <DetailItem label=\"Last Action\" value={task.lastActionAt ? formatDateTime(task.lastActionAt) : '—'} />\n          </div>\n        </section>\n        <section>\n          <h3>Description</h3>\n          <p>{task.description || 'No description provided.'}</p>\n        </section>\n        {task.actionLink && (\n          <section>\n            <h3>Primary Action</h3>\n            <a className=\"btn btn-primary\" href={task.actionLink} target=\"_blank\" rel=\"noreferrer\">\n              Open Related Entity\n            </a>\n          </section>\n        )}\n        <section>\n          <h3>Timeline</h3>\n          {loading ? (\n            <p>Loading history…</p>\n          ) : history.length === 0 ? (\n            <p className=\"text-muted\">No history recorded.</p>\n          ) : (\n            <ul className=\"history-list\">\n              {history.map((event) => (\n                <li key={event.id}>\n                  <div className=\"history-item\">\n                    <span className=\"history-event\">{event.eventType}</span>\n                    <span className=\"history-time\">{formatDateTime(event.eventTime)}</span>\n                  </div>\n                  <div className=\"history-details\">\n                    <DetailItem label=\"From\" value={event.fromUser || '—'} />\n                    <DetailItem label=\"To\" value={event.toUser || '—'} />\n                  </div>\n                  {event.comments && <p className=\"history-comment\">{event.comments}</p>}\n                </li>\n              ))}\n            </ul>\n          )}\n        </section>\n      </div>\n    </div>\n  </div>\n);\n\nconst DetailItem = ({ label, value }) => (\n  <div className=\"detail-item\">\n    <label>{label}</label>\n    <span>{value}</span>\n  </div>\n);\n\nconst formatDate = (value) => {\n  try {\n    return new Date(value).toLocaleDateString();\n  } catch {\n    return value;\n  }\n};\n\nconst formatDateTime = (value) => {\n  try {\n    return new Date(value).toLocaleString();\n  } catch {\n    return value;\n  }\n};\n\nconst formatQueueName = (value) => {\n  if (!value) return '—';\n  return value\n    .replace(/_/g, ' ')\n    .replace(/\\b\\w/g, (c) => c.toUpperCase());\n};\n\nexport default WorkQueuePage;\n\n\n"],"mappings":"qJAAA,MAAO,CAAAA,KAAK,EAAIC,WAAW,CAAEC,SAAS,CAAEC,OAAO,CAAEC,QAAQ,KAAQ,OAAO,CACxE,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,OAAO,KAAQ,yBAAyB,CACjD,OAASC,SAAS,GAAI,CAAAC,GAAG,CAAEC,aAAa,KAAQ,eAAe,CAC/D,MAAO,CAAAC,kBAAkB,KAAM,sBAAsB,CACrD,MAAO,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7B,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAEC,IAAI,CAAEC,OAAO,CAAEC,WAAW,CAAEC,MAAO,CAAC,CAAGb,OAAO,CAAC,CAAC,CACxD,KAAM,CAAAc,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAE9B,KAAM,CAACgB,QAAQ,CAAEC,WAAW,CAAC,CAAGlB,QAAQ,CAAC,QAAQ,CAAC,CAClD,KAAM,CAACmB,MAAM,CAAEC,SAAS,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACqB,WAAW,CAAEC,cAAc,CAAC,CAAGtB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAClD,KAAM,CAACuB,eAAe,CAAEC,kBAAkB,CAAC,CAAGxB,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAACyB,aAAa,CAAEC,gBAAgB,CAAC,CAAG1B,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAAC2B,UAAU,CAAEC,aAAa,CAAC,CAAG5B,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAC6B,kBAAkB,CAAEC,qBAAqB,CAAC,CAAG9B,QAAQ,CAAC,EAAE,CAAC,CAChE,KAAM,CAAC+B,SAAS,CAAEC,YAAY,CAAC,CAAGhC,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACiC,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGlC,QAAQ,CAAC,EAAE,CAAC,CAC9D,KAAM,CAACmC,YAAY,CAAEC,eAAe,CAAC,CAAGpC,QAAQ,CAAC,CAAEmB,MAAM,CAAE,KAAK,CAAEkB,KAAK,CAAE,KAAK,CAAEC,KAAK,CAAE,KAAM,CAAC,CAAC,CAC/F,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGxC,QAAQ,CAAC,OAAO,CAAC,CACjD,KAAM,CAACyC,UAAU,CAAEC,aAAa,CAAC,CAAG1C,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAC2C,aAAa,CAAEC,gBAAgB,CAAC,CAAG5C,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAAC6C,UAAU,CAAEC,aAAa,CAAC,CAAG9C,QAAQ,CAAC,CAAE+C,IAAI,CAAE,CAAC,CAAEC,QAAQ,CAAE,CAAC,CAAEC,UAAU,CAAE,CAAC,CAAEC,QAAQ,CAAE,CAAC,CAAEC,MAAM,CAAE,CAAE,CAAC,CAAC,CAC7G,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGrD,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACsD,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGvD,QAAQ,CAAC,EAAE,CAAC,CAClE,KAAM,CAACwD,cAAc,CAAEC,iBAAiB,CAAC,CAAGzD,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAAC0D,aAAa,CAAEC,gBAAgB,CAAC,CAAG3D,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAAC4D,mBAAmB,CAAEC,sBAAsB,CAAC,CAAG7D,QAAQ,CAAC,EAAE,CAAC,CAElE,KAAM,CAAA8D,mBAAmB,CAAG/D,OAAO,CAAC,IAAM,KAAAgE,WAAA,CAAAC,YAAA,CACxC,MAAO,CAAApD,IAAI,SAAJA,IAAI,kBAAAmD,WAAA,CAAJnD,IAAI,CAAEqD,KAAK,UAAAF,WAAA,iBAAXA,WAAA,CAAaG,QAAQ,CAAC,YAAY,CAAC,IAAItD,IAAI,SAAJA,IAAI,kBAAAoD,YAAA,CAAJpD,IAAI,CAAEqD,KAAK,UAAAD,YAAA,iBAAXA,YAAA,CAAaE,QAAQ,CAAC,OAAO,CAAC,EAC9E,CAAC,CAAE,CAACtD,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAuD,mBAAmB,CAAGpE,OAAO,CAAC,IAAM,CACxC,MAAO,CAAAkC,iBAAiB,CAACmC,IAAI,CAAEC,YAAY,EAAKA,YAAY,CAACC,OAAO,GAAK/C,eAAe,CAAC,CAC3F,CAAC,CAAE,CAACU,iBAAiB,CAAEV,eAAe,CAAC,CAAC,CAExC,KAAM,CAAAgD,uBAAuB,CAAGxE,OAAO,CAAC,IAAM,CAC5C,KAAM,CAAAyE,SAAS,CAAG,GAAI,CAAAC,GAAG,CAAC,CAAC,CAC3B5C,kBAAkB,CAAC6C,OAAO,CAAEL,YAAY,EAAK,CAC3C,GAAIA,YAAY,CAACM,MAAM,EAAIN,YAAY,CAACO,MAAM,CAAE,CAC9CJ,SAAS,CAACK,GAAG,CAACR,YAAY,CAACO,MAAM,CAACE,WAAW,CAAC,CAAC,CAAC,CAClD,CACF,CAAC,CAAC,CACF,MAAO,CAAAN,SAAS,CAClB,CAAC,CAAE,CAAC3C,kBAAkB,CAAC,CAAC,CAExB,KAAM,CAAAkD,kBAAkB,CAAGhF,OAAO,CAAC,IAAM,CACvC,MAAO,CAAAgC,SAAS,CAACiD,MAAM,CAAEC,MAAM,EAAK,CAClC,GAAI,EAACA,MAAM,SAANA,MAAM,WAANA,MAAM,CAAEC,QAAQ,EAAE,MAAO,MAAK,CACnC,MAAO,CAACX,uBAAuB,CAACY,GAAG,CAACF,MAAM,CAACC,QAAQ,CAACJ,WAAW,CAAC,CAAC,CAAC,CACpE,CAAC,CAAC,CACJ,CAAC,CAAE,CAAC/C,SAAS,CAAEwC,uBAAuB,CAAC,CAAC,CAExC,KAAM,CAAAa,WAAW,CAAGvF,WAAW,CAAC,SAAY,CAC1C,GAAI,CAACe,IAAI,EAAI,CAACkD,mBAAmB,CAAE,OACnC1B,eAAe,CAAEiD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAWD,IAAI,MAAElE,MAAM,CAAE,IAAI,EAAG,CAAC,CACtD,GAAI,KAAAoE,eAAA,CACF,KAAM,CAACC,SAAS,CAAEC,SAAS,CAAEC,WAAW,CAAC,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAAC,CAC5DxF,GAAG,CAACyF,GAAG,CAACxF,aAAa,CAACyF,UAAU,CAACC,IAAI,CAAC,CACtC3F,GAAG,CAACyF,GAAG,CAACxF,aAAa,CAACyF,UAAU,CAACE,MAAM,CAAC,CACxC5F,GAAG,CAACyF,GAAG,CAACxF,aAAa,CAACyF,UAAU,CAAC7D,iBAAiB,CAACrB,IAAI,CAACsE,QAAQ,CAAC,CAAC,CACnE,CAAC,CACF9D,SAAS,CAACoE,SAAS,CAACS,IAAI,EAAI,EAAE,CAAC,CAC/B3E,cAAc,CAACmE,SAAS,CAACQ,IAAI,EAAI,CAAC,CAAC,CAAC,CACpC/D,oBAAoB,CAACwD,WAAW,CAACO,IAAI,EAAI,EAAE,CAAC,CAC5C,GAAI,CAAC1E,eAAe,GAAAgE,eAAA,CAAIC,SAAS,CAACS,IAAI,UAAAV,eAAA,WAAdA,eAAA,CAAgBW,MAAM,CAAE,CAC9C1E,kBAAkB,CAACgE,SAAS,CAACS,IAAI,CAAC,CAAC,CAAC,CAACE,EAAE,CAAC,CAC1C,CACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACpD,CAAC,OAAS,CACRhE,eAAe,CAAEiD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAWD,IAAI,MAAElE,MAAM,CAAE,KAAK,EAAG,CAAC,CACzD,CACF,CAAC,CAAE,CAACP,IAAI,CAAEW,eAAe,CAAEuC,mBAAmB,CAAC,CAAC,CAEhD,KAAM,CAAAwC,cAAc,CAAGzG,WAAW,CAAC,SAAY,CAC7C,GAAI,CAACe,IAAI,EAAI,CAACkD,mBAAmB,CAAE,OACnC,GAAI,CACF,KAAM,CAAAyC,QAAQ,CAAG,KAAM,CAAAnG,GAAG,CAACyF,GAAG,CAACxF,aAAa,CAACmG,UAAU,CAACC,KAAK,CAAC,CAC9DzE,YAAY,CAACuE,QAAQ,CAACN,IAAI,EAAI,EAAE,CAAC,CACnC,CAAE,MAAOG,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACnD,CACF,CAAC,CAAE,CAACxF,IAAI,CAAEkD,mBAAmB,CAAC,CAAC,CAE/B,KAAM,CAAA4C,gBAAgB,CAAG7G,WAAW,CAAC,KAAO,CAAAyE,OAAO,EAAK,CACtDlC,eAAe,CAAEiD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAWD,IAAI,MAAEhD,KAAK,CAAE,IAAI,EAAG,CAAC,CACrD,GAAI,CACF,KAAM,CAACsE,SAAS,CAAEC,QAAQ,CAAEC,OAAO,CAAC,CAAG,KAAM,CAAAlB,OAAO,CAACC,GAAG,CAAC,CACvDxF,GAAG,CAACyF,GAAG,CAACxF,aAAa,CAACyF,UAAU,CAACgB,MAAM,CAACxC,OAAO,CAAC,CAAC,CACjDlE,GAAG,CAACyF,GAAG,CAACxF,aAAa,CAACyF,UAAU,CAACzD,KAAK,CAACiC,OAAO,CAAC,CAAC,CAChDlE,GAAG,CAACyF,GAAG,CAACxF,aAAa,CAACyF,UAAU,CAACiB,aAAa,CAACzC,OAAO,CAAC,CAAC,CACzD,CAAC,CACF5C,gBAAgB,CAACiF,SAAS,CAACV,IAAI,CAAC,CAChCrE,aAAa,CAACgF,QAAQ,CAACX,IAAI,EAAI,EAAE,CAAC,CAClC,KAAM,CAAAe,gBAAgB,CAAGH,OAAO,CAACZ,IAAI,EAAI,EAAE,CAC3Ce,gBAAgB,CAACC,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,CAC9B,GAAID,CAAC,CAACvC,MAAM,GAAKwC,CAAC,CAACxC,MAAM,CAAE,CACzB,MAAO,CAACuC,CAAC,CAACtC,MAAM,EAAI,EAAE,EAAEwC,aAAa,CAACD,CAAC,CAACvC,MAAM,EAAI,EAAE,CAAC,CACvD,CACA,MAAO,CAAAsC,CAAC,CAACvC,MAAM,CAAG,CAAC,CAAC,CAAG,CAAC,CAC1B,CAAC,CAAC,CACF7C,qBAAqB,CAACkF,gBAAgB,CAAC,CACzC,CAAE,MAAOZ,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACtD,CAAC,OAAS,CACRhE,eAAe,CAAEiD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAWD,IAAI,MAAEhD,KAAK,CAAE,KAAK,EAAG,CAAC,CACxD,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAgF,kBAAkB,CAAGxH,WAAW,CAAC,SAAY,CACjD,GAAI,CAACe,IAAI,EAAI,CAACkD,mBAAmB,CAAE,OACnC1B,eAAe,CAAEiD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAWD,IAAI,MAAE/C,KAAK,CAAE,IAAI,EAAG,CAAC,CACrD,GAAI,KAAAgF,oBAAA,CAAAC,eAAA,CAAAC,qBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CAAAC,gBAAA,CACF,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAExC,SAAS,CAAC,CAAG,KAAM,CAAAE,OAAO,CAACC,GAAG,CAAC,CAC3DxF,GAAG,CAACyF,GAAG,CAACxF,aAAa,CAACgC,KAAK,CAACC,KAAK,CAAC1B,IAAI,CAACsE,QAAQ,CAAC,CAAC,CACjD9E,GAAG,CAACyF,GAAG,CAACxF,aAAa,CAACgC,KAAK,CAACW,QAAQ,CAACpC,IAAI,CAACsE,QAAQ,CAAC,CAAC,CACpD9E,GAAG,CAACyF,GAAG,CAACxF,aAAa,CAACgC,KAAK,CAAC2D,MAAM,CAACpF,IAAI,CAACsE,QAAQ,CAAC,CAAC,CACnD,CAAC,CACFxC,aAAa,CAACsF,QAAQ,CAAC/B,IAAI,EAAI,EAAE,CAAC,CAClCrD,gBAAgB,CAACqF,WAAW,CAAChC,IAAI,EAAI,EAAE,CAAC,CACxCnD,aAAa,CAAC,CACZC,IAAI,EAAAuE,oBAAA,EAAAC,eAAA,CAAE9B,SAAS,CAACQ,IAAI,UAAAsB,eAAA,iBAAdA,eAAA,CAAgBxE,IAAI,UAAAuE,oBAAA,UAAAA,oBAAA,CAAI,CAAC,CAC/BtE,QAAQ,EAAAwE,qBAAA,EAAAC,gBAAA,CAAEhC,SAAS,CAACQ,IAAI,UAAAwB,gBAAA,iBAAdA,gBAAA,CAAgBzE,QAAQ,UAAAwE,qBAAA,UAAAA,qBAAA,CAAI,CAAC,CACvCvE,UAAU,EAAAyE,qBAAA,EAAAC,gBAAA,CAAElC,SAAS,CAACQ,IAAI,UAAA0B,gBAAA,iBAAdA,gBAAA,CAAgB1E,UAAU,UAAAyE,qBAAA,UAAAA,qBAAA,CAAI,CAAC,CAC3CxE,QAAQ,EAAA0E,qBAAA,EAAAC,gBAAA,CAAEpC,SAAS,CAACQ,IAAI,UAAA4B,gBAAA,iBAAdA,gBAAA,CAAgB3E,QAAQ,UAAA0E,qBAAA,UAAAA,qBAAA,CAAI,CAAC,CACvCzE,MAAM,EAAA2E,qBAAA,EAAAC,gBAAA,CAAEtC,SAAS,CAACQ,IAAI,UAAA8B,gBAAA,iBAAdA,gBAAA,CAAgB5E,MAAM,UAAA2E,qBAAA,UAAAA,qBAAA,CAAI,CACpC,CAAC,CAAC,CACJ,CAAE,MAAO1B,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,qCAAqC,CAAEA,KAAK,CAAC,CAC7D,CAAC,OAAS,CACRhE,eAAe,CAAEiD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAWD,IAAI,MAAE/C,KAAK,CAAE,KAAK,EAAG,CAAC,CACxD,CACF,CAAC,CAAE,CAAC1B,IAAI,CAAEkD,mBAAmB,CAAC,CAAC,CAE/BhE,SAAS,CAAC,IAAM,CACd,GAAIgB,WAAW,CAAE,CACf,OACF,CACA,GAAI,CAACF,IAAI,CAAE,CACTI,QAAQ,CAAC,QAAQ,CAAC,CAClB,OACF,CACA,GAAI,CAAC8C,mBAAmB,CAAE,CACxB9C,QAAQ,CAAC,GAAG,CAAC,CACb,OACF,CACAoE,WAAW,CAAC,CAAC,CACbiC,kBAAkB,CAAC,CAAC,CACpBf,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,CAACxF,WAAW,CAAEF,IAAI,CAAEI,QAAQ,CAAEoE,WAAW,CAAEiC,kBAAkB,CAAEf,cAAc,CAAExC,mBAAmB,CAAC,CAAC,CAEvGhE,SAAS,CAAC,IAAM,CACd,GAAIyB,eAAe,CAAE,CACnBiB,WAAW,CAAC,OAAO,CAAC,CACpBkE,gBAAgB,CAACnF,eAAe,CAAC,CACnC,CACF,CAAC,CAAE,CAACA,eAAe,CAAEmF,gBAAgB,CAAC,CAAC,CAEvC,KAAM,CAAAwB,iBAAiB,CAAG,KAAO,CAAAC,KAAK,EAAK,CACzC,GAAI,CAAC5G,eAAe,EAAI,CAACX,IAAI,EAAI,CAACkD,mBAAmB,CAAE,OACvDH,gBAAgB,CAAC,IAAI,CAAC,CACtB,GAAI,CACF,KAAM,CAAAvD,GAAG,CAACgI,IAAI,CAAC/H,aAAa,CAACyF,UAAU,CAACuC,OAAO,CAAC9G,eAAe,CAAC,CAAE,CAChE2D,QAAQ,CAAEtE,IAAI,CAACsE,QAAQ,CACvBiD,KACF,CAAC,CAAC,CACF,KAAM,CAAAxC,OAAO,CAACC,GAAG,CAAC,CAACc,gBAAgB,CAACnF,eAAe,CAAC,CAAE8F,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAC9E,CAAE,MAAOjB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CAClDkC,KAAK,CAAC,4CAA4C,CAAC,CACrD,CAAC,OAAS,CACR3E,gBAAgB,CAAC,KAAK,CAAC,CACzB,CACF,CAAC,CAED,KAAM,CAAA4E,iBAAiB,CAAG,KAAO,CAAAC,MAAM,EAAK,CAC1C,GAAI,CAAC5H,IAAI,EAAI,CAACkD,mBAAmB,CAAE,OACnCH,gBAAgB,CAAC,IAAI,CAAC,CACtB,GAAI,CACF,KAAM,CAAAvD,GAAG,CAACgI,IAAI,CAAC/H,aAAa,CAACgC,KAAK,CAACgG,OAAO,CAACG,MAAM,CAAC,CAAE,CAAEtD,QAAQ,CAAEtE,IAAI,CAACsE,QAAS,CAAC,CAAC,CAChF,KAAM,CAAAS,OAAO,CAACC,GAAG,CAAC,CAACc,gBAAgB,CAACnF,eAAe,CAAC,CAAE8F,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAC9E,CAAE,MAAOjB,KAAK,CAAE,KAAAqC,eAAA,CAAAC,oBAAA,CACdrC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC5CkC,KAAK,CAAC,EAAAG,eAAA,CAAArC,KAAK,CAACG,QAAQ,UAAAkC,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBxC,IAAI,UAAAyC,oBAAA,iBAApBA,oBAAA,CAAsBC,OAAO,GAAI,wBAAwB,CAAC,CAClE,CAAC,OAAS,CACRhF,gBAAgB,CAAC,KAAK,CAAC,CACzB,CACF,CAAC,CAED,KAAM,CAAAiF,mBAAmB,CAAG,KAAO,CAAAJ,MAAM,EAAK,CAC5C,GAAI,CAAC5H,IAAI,EAAI,CAACkD,mBAAmB,CAAE,OACnCH,gBAAgB,CAAC,IAAI,CAAC,CACtB,GAAI,CACF,KAAM,CAAAvD,GAAG,CAACgI,IAAI,CAAC/H,aAAa,CAACgC,KAAK,CAACwG,SAAS,CAACL,MAAM,CAAC,CAAE,CAAEtD,QAAQ,CAAEtE,IAAI,CAACsE,QAAS,CAAC,CAAC,CAClF,KAAM,CAAAS,OAAO,CAACC,GAAG,CAAC,CAACc,gBAAgB,CAACnF,eAAe,CAAC,CAAE8F,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAC9E,CAAE,MAAOjB,KAAK,CAAE,KAAA0C,gBAAA,CAAAC,qBAAA,CACd1C,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CkC,KAAK,CAAC,EAAAQ,gBAAA,CAAA1C,KAAK,CAACG,QAAQ,UAAAuC,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgB7C,IAAI,UAAA8C,qBAAA,iBAApBA,qBAAA,CAAsBJ,OAAO,GAAI,0BAA0B,CAAC,CACpE,CAAC,OAAS,CACRhF,gBAAgB,CAAC,KAAK,CAAC,CACzB,CACF,CAAC,CAED,KAAM,CAAAqF,oBAAoB,CAAG,KAAO,CAAAC,YAAY,EAAK,CACnD,GAAI,CAAC1H,eAAe,EAAI,CAAC0H,YAAY,EAAI,CAACnF,mBAAmB,CAAE,OAC/DH,gBAAgB,CAAC,IAAI,CAAC,CACtB,GAAI,CACF,KAAM,CAAAvD,GAAG,CAACgI,IAAI,CAAC/H,aAAa,CAACyF,UAAU,CAACoD,SAAS,CAAC3H,eAAe,CAAC,CAAE,CAAEqD,MAAM,CAAEqE,YAAa,CAAC,CAAC,CAC7F,KAAM,CAAAtD,OAAO,CAACC,GAAG,CAAC,CAChBc,gBAAgB,CAACnF,eAAe,CAAC,CACjC6D,WAAW,CAAC,CAAC,CACbkB,cAAc,CAAC,CAAC,CACjB,CAAC,CACJ,CAAE,MAAOF,KAAK,CAAE,KAAA+C,gBAAA,CAAAC,qBAAA,CACd/C,OAAO,CAACD,KAAK,CAAC,iCAAiC,CAAEA,KAAK,CAAC,CACvDkC,KAAK,CAAC,EAAAa,gBAAA,CAAA/C,KAAK,CAACG,QAAQ,UAAA4C,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBlD,IAAI,UAAAmD,qBAAA,iBAApBA,qBAAA,CAAsBT,OAAO,GAAI,4BAA4B,CAAC,CACtE,CAAC,OAAS,CACRhF,gBAAgB,CAAC,KAAK,CAAC,CACzB,CACF,CAAC,CAED,KAAM,CAAA0F,wBAAwB,CAAG,KAAO,CAAAJ,YAAY,EAAK,CACvD,GAAI,CAAC1H,eAAe,EAAI,CAAC0H,YAAY,EAAI,CAACnF,mBAAmB,CAAE,OAC/DH,gBAAgB,CAAC,IAAI,CAAC,CACtB,GAAI,CACF,KAAM,CAAAvD,GAAG,CAACkJ,MAAM,CAACjJ,aAAa,CAACyF,UAAU,CAACyD,WAAW,CAAChI,eAAe,CAAE0H,YAAY,CAAC,CAAC,CACrF,KAAM,CAAAtD,OAAO,CAACC,GAAG,CAAC,CAChBc,gBAAgB,CAACnF,eAAe,CAAC,CACjC6D,WAAW,CAAC,CAAC,CACbkB,cAAc,CAAC,CAAC,CACjB,CAAC,CACJ,CAAE,MAAOF,KAAK,CAAE,KAAAoD,gBAAA,CAAAC,qBAAA,CACdpD,OAAO,CAACD,KAAK,CAAC,wCAAwC,CAAEA,KAAK,CAAC,CAC9DkC,KAAK,CAAC,EAAAkB,gBAAA,CAAApD,KAAK,CAACG,QAAQ,UAAAiD,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBvD,IAAI,UAAAwD,qBAAA,iBAApBA,qBAAA,CAAsBd,OAAO,GAAI,+BAA+B,CAAC,CACzE,CAAC,OAAS,CACRhF,gBAAgB,CAAC,KAAK,CAAC,CACzB,CACF,CAAC,CAED,KAAM,CAAA+F,mBAAmB,CAAGA,CAAA,GAAM,CAChC,GAAI,CAAC9I,IAAI,CAAE,OACXoI,oBAAoB,CAACpI,IAAI,CAACsE,QAAQ,CAAC,CACrC,CAAC,CAED,KAAM,CAAAyE,qBAAqB,CAAGA,CAAA,GAAM,CAClC,GAAI,CAAC/I,IAAI,CAAE,OACXyI,wBAAwB,CAACzI,IAAI,CAACsE,QAAQ,CAAC,CACzC,CAAC,CAED,KAAM,CAAA0E,6BAA6B,CAAG,KAAAA,CAAA,GAAY,CAChD,GAAI,CAAChG,mBAAmB,CAAE,OAC1B,KAAM,CAAAoF,oBAAoB,CAACpF,mBAAmB,CAAC,CAC/CC,sBAAsB,CAAC,EAAE,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAgG,4BAA4B,CAAIZ,YAAY,EAAK,CACrDI,wBAAwB,CAACJ,YAAY,CAAC,CACxC,CAAC,CAED,KAAM,CAAAa,4BAA4B,CAAIb,YAAY,EAAK,CACrDD,oBAAoB,CAACC,YAAY,CAAC,CACpC,CAAC,CAED,KAAM,CAAAc,mBAAmB,CAAGlK,WAAW,CAAEmK,QAAQ,EAAK,CACpD,GAAI,CAACA,QAAQ,CAAE,MAAO,GAAG,CACzB,KAAM,CAAAC,KAAK,CAAG9I,MAAM,CAAC+I,IAAI,CAAEC,KAAK,EAAK,CACnC,KAAM,CAAAC,GAAG,CAAID,KAAK,CAACE,IAAI,EAAIF,KAAK,CAACE,IAAI,CAACC,IAAI,CAAC,CAAC,CAAIH,KAAK,CAACE,IAAI,CAAGF,KAAK,CAACI,IAAI,CACvE,MAAO,CAAAH,GAAG,GAAKJ,QAAQ,EAAIG,KAAK,CAACI,IAAI,GAAKP,QAAQ,CACpD,CAAC,CAAC,CACF,MAAO,CAAAC,KAAK,CAAGA,KAAK,CAACM,IAAI,CAAGC,eAAe,CAACR,QAAQ,CAAC,CACvD,CAAC,CAAE,CAAC7I,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAsJ,cAAc,CAAG,KAAO,CAAAC,IAAI,EAAK,CACrCrH,eAAe,CAACqH,IAAI,CAAC,CACrBnH,sBAAsB,CAAC,EAAE,CAAC,CAC1B,GAAI,CAACmH,IAAI,CAAE,OACXjH,iBAAiB,CAAC,IAAI,CAAC,CACvB,GAAI,CACF,KAAM,CAAAkH,GAAG,CAAG,KAAM,CAAAvK,GAAG,CAACyF,GAAG,CAACxF,aAAa,CAACgC,KAAK,CAACuI,OAAO,CAACF,IAAI,CAACvE,EAAE,CAAC,CAAC,CAC/D5C,sBAAsB,CAACoH,GAAG,CAAC1E,IAAI,EAAI,EAAE,CAAC,CACxC,CAAE,MAAOG,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACrD,CAAC,OAAS,CACR3C,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CACF,CAAC,CAED,KAAM,CAAAoH,YAAY,CAAGA,CAAA,GAAM,CACzB9J,MAAM,CAAC,CAAC,CACRC,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,CAED,KAAM,CAAA8J,eAAe,CAAGA,CAAA,gBACtBpK,KAAA,QAAKqK,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BtK,KAAA,QAAKqK,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCxK,IAAA,OAAAwK,QAAA,CAAI,aAAW,CAAI,CAAC,cACpBxK,IAAA,WAAQuK,SAAS,CAAC,iBAAiB,CAACE,OAAO,CAAE7F,WAAY,CAAA4F,QAAA,CAAC,SAAO,CAAQ,CAAC,EACvE,CAAC,cACNxK,IAAA,QAAKuK,SAAS,CAAC,qBAAqB,CAAAC,QAAA,cAClCtK,KAAA,UAAOqK,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAClCxK,IAAA,UAAAwK,QAAA,cACEtK,KAAA,OAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,CAAI,QAAM,CAAI,CAAC,cACfxK,IAAA,OAAAwK,QAAA,CAAI,MAAI,CAAI,CAAC,cACbxK,IAAA,OAAAwK,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBxK,IAAA,OAAAwK,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1BxK,IAAA,OAAAwK,QAAA,CAAI,OAAK,CAAI,CAAC,EACZ,CAAC,CACA,CAAC,cACRtK,KAAA,UAAAsK,QAAA,EACG7J,MAAM,CAAC+J,GAAG,CAAEf,KAAK,OAAAgB,YAAA,oBAChBzK,KAAA,OAAmBqK,SAAS,CAAEZ,KAAK,CAAChE,EAAE,GAAK5E,eAAe,CAAG,UAAU,CAAG,EAAG,CAAAyJ,QAAA,eAC3ExK,IAAA,OAAAwK,QAAA,cACExK,IAAA,WAAQuK,SAAS,CAAC,UAAU,CAACE,OAAO,CAAEA,CAAA,GAAMzJ,kBAAkB,CAAC2I,KAAK,CAAChE,EAAE,CAAE,CAAA6E,QAAA,CAAC,MAAI,CAAQ,CAAC,CACrF,CAAC,cACLxK,IAAA,OAAAwK,QAAA,CAAKjB,mBAAmB,CAACI,KAAK,CAACE,IAAI,EAAIF,KAAK,CAACI,IAAI,CAAC,CAAK,CAAC,cACxD/J,IAAA,OAAAwK,QAAA,CAAKb,KAAK,CAACiB,mBAAmB,EAAI,GAAG,CAAK,CAAC,cAC3C5K,IAAA,OAAAwK,QAAA,CAAKb,KAAK,CAACkB,iBAAiB,CAAG,KAAK,CAAG,IAAI,CAAK,CAAC,cACjD7K,IAAA,OAAAwK,QAAA,EAAAG,YAAA,CAAK9J,WAAW,CAAC8I,KAAK,CAACE,IAAI,EAAIF,KAAK,CAACI,IAAI,CAAC,UAAAY,YAAA,UAAAA,YAAA,CAAI,CAAC,CAAK,CAAC,GAP9ChB,KAAK,CAAChE,EAQX,CAAC,EACN,CAAC,CACDhF,MAAM,CAAC+E,MAAM,GAAK,CAAC,eAClB1F,IAAA,OAAAwK,QAAA,cACExK,IAAA,OAAI8K,OAAO,CAAC,GAAG,CAACP,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,4BAA0B,CAAI,CAAC,CACrF,CACL,EACI,CAAC,EACH,CAAC,CACL,CAAC,EACH,CACN,CAED,KAAM,CAAAO,iBAAiB,CAAGA,CAAA,GAAM,KAAAC,qBAAA,CAC9B,GAAI,CAAC/J,aAAa,CAAE,CAClB,mBACEjB,IAAA,QAAKuK,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACjCxK,IAAA,MAAAwK,QAAA,CAAG,qCAAmC,CAAG,CAAC,CACvC,CAAC,CAEV,CAEA,mBACEtK,KAAA,QAAKqK,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BtK,KAAA,QAAKqK,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClCtK,KAAA,QAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,CAAKR,eAAe,CAAC/I,aAAa,CAAC8I,IAAI,CAAC,CAAK,CAAC,cAC9C/J,IAAA,MAAGuK,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAEvJ,aAAa,CAACgK,WAAW,EAAI,2BAA2B,CAAI,CAAC,EAC5F,CAAC,cACNjL,IAAA,QAAKuK,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAClCvJ,aAAa,CAAC4J,iBAAiB,CAC9BvH,mBAAmB,CACjBK,mBAAmB,cACjB3D,IAAA,WAAQuK,SAAS,CAAC,iBAAiB,CAACE,OAAO,CAAEtB,qBAAsB,CAAC+B,QAAQ,CAAEhI,aAAc,CAAAsH,QAAA,CAAC,aAE7F,CAAQ,CAAC,cAETxK,IAAA,WAAQuK,SAAS,CAAC,iBAAiB,CAACE,OAAO,CAAEvB,mBAAoB,CAACgC,QAAQ,CAAEhI,aAAc,CAAAsH,QAAA,CAAC,WAE3F,CAAQ,CACT,cAEDxK,IAAA,SAAMuK,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,wBAAsB,CAAM,CACrE,cAEDxK,IAAA,SAAMuK,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,wBAAsB,CAAM,CACrE,CACE,CAAC,EACH,CAAC,cAENtK,KAAA,QAAKqK,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BtK,KAAA,QAAAsK,QAAA,eACExK,IAAA,UAAAwK,QAAA,CAAO,eAAa,CAAO,CAAC,cAC5BxK,IAAA,SAAAwK,QAAA,CAAOvJ,aAAa,CAAC2J,mBAAmB,EAAI,GAAG,CAAO,CAAC,EACpD,CAAC,cACN1K,KAAA,QAAAsK,QAAA,eACExK,IAAA,UAAAwK,QAAA,CAAO,aAAW,CAAO,CAAC,cAC1BxK,IAAA,SAAAwK,QAAA,EAAAQ,qBAAA,CAAO/J,aAAa,CAACkK,gBAAgB,UAAAH,qBAAA,UAAAA,qBAAA,CAAI,GAAG,CAAO,CAAC,EACjD,CAAC,cACN9K,KAAA,QAAAsK,QAAA,eACExK,IAAA,UAAAwK,QAAA,CAAO,uBAAqB,CAAO,CAAC,cACpCxK,IAAA,SAAAwK,QAAA,CAAOvJ,aAAa,CAAC4J,iBAAiB,CAAG,KAAK,CAAG,IAAI,CAAO,CAAC,EAC1D,CAAC,cACN3K,KAAA,QAAAsK,QAAA,eACExK,IAAA,UAAAwK,QAAA,CAAO,iBAAe,CAAO,CAAC,cAC9BxK,IAAA,SAAAwK,QAAA,CAAO7G,mBAAmB,CAAG,QAAQ,CAAG,gBAAgB,CAAO,CAAC,EAC7D,CAAC,EACH,CAAC,cAENzD,KAAA,QAAKqK,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BtK,KAAA,QAAKqK,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BxK,IAAA,WAAQuK,SAAS,CAAC,iBAAiB,CAACE,OAAO,CAAEA,CAAA,GAAM/C,iBAAiB,CAAC,CAAC,CAAE,CAACwD,QAAQ,CAAE,CAACvH,mBAAmB,EAAIT,aAAc,CAAAsH,QAAA,CAAC,mBAE1H,CAAQ,CAAC,cACTxK,IAAA,WAAQuK,SAAS,CAAC,iBAAiB,CAACE,OAAO,CAAEA,CAAA,GAAM/C,iBAAiB,CAAC,CAAC,CAAE,CAACwD,QAAQ,CAAE,CAACvH,mBAAmB,EAAIT,aAAc,CAAAsH,QAAA,CAAC,sBAE1H,CAAQ,CAAC,cACTxK,IAAA,WAAQuK,SAAS,CAAC,iBAAiB,CAACE,OAAO,CAAEA,CAAA,GAAM/C,iBAAiB,CAAC,EAAE,CAAE,CAACwD,QAAQ,CAAE,CAACvH,mBAAmB,EAAIT,aAAc,CAAAsH,QAAA,CAAC,uBAE3H,CAAQ,CAAC,EACN,CAAC,cACNxK,IAAA,QAAKuK,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BtK,KAAA,SAAAsK,QAAA,EAAM,eAAa,CAACrJ,UAAU,CAACuE,MAAM,EAAO,CAAC,CAC1C,CAAC,EACH,CAAC,cAENxF,KAAA,QAAKqK,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCxK,IAAA,WACEuK,SAAS,cAAAa,MAAA,CAAerJ,QAAQ,GAAK,OAAO,CAAG,QAAQ,CAAG,EAAE,CAAG,CAC/D0I,OAAO,CAAEA,CAAA,GAAMzI,WAAW,CAAC,OAAO,CAAE,CAAAwI,QAAA,CACrC,kBAED,CAAQ,CAAC,cACTxK,IAAA,WACEuK,SAAS,cAAAa,MAAA,CAAerJ,QAAQ,GAAK,eAAe,CAAG,QAAQ,CAAG,EAAE,CAAG,CACvE0I,OAAO,CAAEA,CAAA,GAAMzI,WAAW,CAAC,eAAe,CAAE,CAAAwI,QAAA,CAC7C,qBAED,CAAQ,CAAC,cACTxK,IAAA,WACEuK,SAAS,cAAAa,MAAA,CAAerJ,QAAQ,GAAK,UAAU,CAAG,QAAQ,CAAG,EAAE,CAAG,CAClE0I,OAAO,CAAEA,CAAA,GAAMzI,WAAW,CAAC,UAAU,CAAE,CAAAwI,QAAA,CACxC,UAED,CAAQ,CAAC,EACN,CAAC,CAELzI,QAAQ,GAAK,OAAO,EAAIsJ,oBAAoB,CAAC,CAAC,CAC9CtJ,QAAQ,GAAK,eAAe,EAAIuJ,4BAA4B,CAAC,CAAC,CAC9DvJ,QAAQ,GAAK,UAAU,EAAIwJ,mBAAmB,CAAC,CAAC,EAC9C,CAAC,CAEV,CAAC,CAED,KAAM,CAAAF,oBAAoB,CAAGA,CAAA,gBAC3BrL,IAAA,QAAKuK,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChCtK,KAAA,UAAOqK,SAAS,CAAC,OAAO,CAAAC,QAAA,eACtBxK,IAAA,UAAAwK,QAAA,cACEtK,KAAA,OAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,CAAI,QAAM,CAAI,CAAC,cACfxK,IAAA,OAAAwK,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBxK,IAAA,OAAAwK,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBxK,IAAA,OAAAwK,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBxK,IAAA,OAAAwK,QAAA,CAAI,QAAM,CAAI,CAAC,cACfxK,IAAA,OAAAwK,QAAA,CAAI,aAAW,CAAI,CAAC,cACpBxK,IAAA,OAAAwK,QAAA,CAAI,UAAQ,CAAI,CAAC,EACf,CAAC,CACA,CAAC,cACNtK,KAAA,UAAAsK,QAAA,EACGrJ,UAAU,CAACuJ,GAAG,CAAER,IAAI,eACrBhK,KAAA,OAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,CACGN,IAAI,CAACsB,UAAU,cACdxL,IAAA,SAAMuK,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,UAAQ,CAAM,CAAC,cAEvDxK,IAAA,WACEuK,SAAS,CAAC,UAAU,CACpBE,OAAO,CAAEA,CAAA,GAAM1C,iBAAiB,CAACmC,IAAI,CAACvE,EAAE,CAAE,CAC1CuF,QAAQ,CAAE,CAACvH,mBAAmB,EAAIT,aAAc,CAAAsH,QAAA,CACjD,eAED,CAAQ,CACT,CACC,CAAC,cACLxK,IAAA,OAAAwK,QAAA,cACExK,IAAA,WAAQuK,SAAS,CAAC,UAAU,CAACE,OAAO,CAAEA,CAAA,GAAMR,cAAc,CAACC,IAAI,CAAE,CAAAM,QAAA,CAC9DN,IAAI,CAACvE,EAAE,CACF,CAAC,CACP,CAAC,cACL3F,IAAA,OAAAwK,QAAA,CAAKN,IAAI,CAACuB,KAAK,CAAK,CAAC,cACrBzL,IAAA,OAAAwK,QAAA,CAAKN,IAAI,CAACwB,QAAQ,CAAK,CAAC,cACpB1L,IAAA,OAAAwK,QAAA,CAAKN,IAAI,CAACyB,MAAM,CAAK,CAAC,cACtB3L,IAAA,OAAAwK,QAAA,CAAKN,IAAI,CAACsB,UAAU,EAAI,GAAG,CAAK,CAAC,cACjCxL,IAAA,OAAAwK,QAAA,CAAKN,IAAI,CAAC0B,OAAO,CAAGC,UAAU,CAAC3B,IAAI,CAAC0B,OAAO,CAAC,CAAG,GAAG,CAAK,CAAC,GAvBrD1B,IAAI,CAACvE,EAwBV,CACL,CAAC,CACDxE,UAAU,CAACuE,MAAM,GAAK,CAAC,eACtB1F,IAAA,OAAAwK,QAAA,cACExK,IAAA,OAAI8K,OAAO,CAAC,GAAG,CAACP,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,mCAExD,CAAI,CAAC,CACH,CACL,EACI,CAAC,EACH,CAAC,CACL,CACN,CAED,KAAM,CAAAc,4BAA4B,CAAGA,CAAA,gBACnCpL,KAAA,QAAKqK,SAAS,CAAC,2BAA2B,CAAAC,QAAA,EACvClH,mBAAmB,eAClBtD,IAAA,QAAKuK,SAAS,CAAC,sBAAsB,CAAAC,QAAA,cACnCtK,KAAA,QAAKqK,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCxK,IAAA,UAAO8L,OAAO,CAAC,kBAAkB,CAAAtB,QAAA,CAAC,kBAAgB,CAAO,CAAC,cAC1DtK,KAAA,QAAKqK,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzCtK,KAAA,WACEyF,EAAE,CAAC,kBAAkB,CACrBoG,KAAK,CAAE3I,mBAAoB,CAC3B4I,QAAQ,CAAGC,KAAK,EAAK5I,sBAAsB,CAAC4I,KAAK,CAACC,MAAM,CAACH,KAAK,CAAE,CAAAvB,QAAA,eAEhExK,IAAA,WAAQ+L,KAAK,CAAC,EAAE,CAAAvB,QAAA,CAAC,yBAAkB,CAAQ,CAAC,CAC3CjG,kBAAkB,CAACmG,GAAG,CAAEyB,UAAU,eACjCjM,KAAA,WAAkC6L,KAAK,CAAEI,UAAU,CAACzH,QAAS,CAAA8F,QAAA,EAC1D2B,UAAU,CAACzH,QAAQ,CAAC,GAAC,CAACyH,UAAU,CAACC,SAAS,WAAAhB,MAAA,CAAae,UAAU,CAACC,SAAS,MAAM,EAAE,GADzED,UAAU,CAACzH,QAEhB,CACT,CAAC,EACI,CAAC,cACT1E,IAAA,WACEuK,SAAS,CAAC,iBAAiB,CAC3BE,OAAO,CAAErB,6BAA8B,CACvC8B,QAAQ,CAAE,CAAC9H,mBAAmB,EAAIF,aAAc,CAAAsH,QAAA,CACjD,kBAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CACN,cAEDtK,KAAA,UAAOqK,SAAS,CAAC,OAAO,CAAAC,QAAA,eACtBxK,IAAA,UAAAwK,QAAA,cACEtK,KAAA,OAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,CAAI,MAAI,CAAI,CAAC,cACbxK,IAAA,OAAAwK,QAAA,CAAI,QAAM,CAAI,CAAC,cACfxK,IAAA,OAAAwK,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBxK,IAAA,OAAAwK,QAAA,CAAI,iBAAe,CAAI,CAAC,CACvBlH,mBAAmB,eAAItD,IAAA,OAAAwK,QAAA,CAAI,QAAM,CAAI,CAAC,EACrC,CAAC,CACA,CAAC,cACRtK,KAAA,UAAAsK,QAAA,EACGnJ,kBAAkB,CAACqJ,GAAG,CAAE2B,GAAG,eAC1BnM,KAAA,OAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,CAAK6B,GAAG,CAACjI,MAAM,CAAK,CAAC,cACrBpE,IAAA,OAAAwK,QAAA,CAAK6B,GAAG,CAAClI,MAAM,CAAG,QAAQ,CAAG,UAAU,CAAK,CAAC,cAC7CnE,IAAA,OAAAwK,QAAA,CAAK6B,GAAG,CAACC,YAAY,CAAGC,cAAc,CAACF,GAAG,CAACC,YAAY,CAAC,CAAG,GAAG,CAAK,CAAC,cACpEtM,IAAA,OAAAwK,QAAA,CAAK6B,GAAG,CAACG,cAAc,CAAGD,cAAc,CAACF,GAAG,CAACG,cAAc,CAAC,CAAG,GAAG,CAAK,CAAC,CACvElJ,mBAAmB,eAClBtD,IAAA,OAAAwK,QAAA,CACG6B,GAAG,CAAClI,MAAM,cACTnE,IAAA,WACEuK,SAAS,CAAC,wBAAwB,CAClCE,OAAO,CAAEA,CAAA,GAAMpB,4BAA4B,CAACgD,GAAG,CAACjI,MAAM,CAAE,CACxD8G,QAAQ,CAAEhI,aAAc,CAAAsH,QAAA,CACzB,QAED,CAAQ,CAAC,cAETxK,IAAA,WACEuK,SAAS,CAAC,qBAAqB,CAC/BE,OAAO,CAAEA,CAAA,GAAMnB,4BAA4B,CAAC+C,GAAG,CAACjI,MAAM,CAAE,CACxD8G,QAAQ,CAAEhI,aAAc,CAAAsH,QAAA,CACzB,YAED,CAAQ,CACT,CACC,CACL,GAzBM6B,GAAG,CAAC1G,EA0BT,CACL,CAAC,CACDtE,kBAAkB,CAACqE,MAAM,GAAK,CAAC,eAC9B1F,IAAA,OAAAwK,QAAA,cACExK,IAAA,OAAI8K,OAAO,CAAExH,mBAAmB,CAAG,CAAC,CAAG,CAAE,CAACiH,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,kCAElF,CAAI,CAAC,CACH,CACL,EACI,CAAC,EACH,CAAC,EACL,CACN,CAED,KAAM,CAAAe,mBAAmB,CAAGA,CAAA,gBAC1BvL,IAAA,QAAKuK,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7BxK,IAAA,MAAAwK,QAAA,CAAI,CAAAvJ,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEwL,QAAQ,GAAI,wCAAwC,CAAI,CAAC,CACzE,CACN,CAED,KAAM,CAAAC,WAAW,CAAGA,CAAA,gBAClBxM,KAAA,QAAKqK,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BtK,KAAA,QAAKqK,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCxK,IAAA,OAAAwK,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBxK,IAAA,WAAQuK,SAAS,CAAC,iBAAiB,CAACE,OAAO,CAAE5D,kBAAmB,CAAA2D,QAAA,CAAC,SAAO,CAAQ,CAAC,EAC9E,CAAC,cACNtK,KAAA,QAAKqK,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BtK,KAAA,QAAKqK,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBxK,IAAA,SAAMuK,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEnI,UAAU,CAACE,IAAI,CAAO,CAAC,cACtDvC,IAAA,SAAMuK,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,MAAI,CAAM,CAAC,EACtC,CAAC,cACNtK,KAAA,QAAKqK,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBxK,IAAA,SAAMuK,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEnI,UAAU,CAACG,QAAQ,CAAO,CAAC,cAC1DxC,IAAA,SAAMuK,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,UAAQ,CAAM,CAAC,EAC1C,CAAC,cACNtK,KAAA,QAAKqK,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBxK,IAAA,SAAMuK,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEnI,UAAU,CAACI,UAAU,CAAO,CAAC,cAC5DzC,IAAA,SAAMuK,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,aAAW,CAAM,CAAC,EAC7C,CAAC,cACNtK,KAAA,QAAKqK,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBxK,IAAA,SAAMuK,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEnI,UAAU,CAACK,QAAQ,CAAO,CAAC,cAC1D1C,IAAA,SAAMuK,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,UAAQ,CAAM,CAAC,EAC1C,CAAC,cACNtK,KAAA,QAAKqK,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBxK,IAAA,SAAMuK,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEnI,UAAU,CAACM,MAAM,CAAO,CAAC,cACxD3C,IAAA,SAAMuK,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,QAAM,CAAM,CAAC,EACxC,CAAC,EACH,CAAC,cACNxK,IAAA,QAAKuK,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChCxK,IAAA,CAAC2M,SAAS,EAAC9K,KAAK,CAAEI,UAAW,CAAC2K,UAAU,CAAE3C,cAAe,CAACV,mBAAmB,CAAEA,mBAAoB,CAAE,CAAC,CACnG,CAAC,EACH,CACN,CAED,KAAM,CAAAsD,cAAc,CAAGA,CAAA,gBACrB3M,KAAA,QAAKqK,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BtK,KAAA,QAAKqK,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCxK,IAAA,OAAAwK,QAAA,CAAI,gBAAc,CAAI,CAAC,cACvBxK,IAAA,WAAQuK,SAAS,CAAC,iBAAiB,CAACE,OAAO,CAAE5D,kBAAmB,CAAA2D,QAAA,CAAC,SAAO,CAAQ,CAAC,EAC9E,CAAC,cACNxK,IAAA,QAAKuK,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChCtK,KAAA,UAAOqK,SAAS,CAAC,OAAO,CAAAC,QAAA,eACtBxK,IAAA,UAAAwK,QAAA,cACEtK,KAAA,OAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,CAAI,QAAM,CAAI,CAAC,cACfxK,IAAA,OAAAwK,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBxK,IAAA,OAAAwK,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBxK,IAAA,OAAAwK,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBxK,IAAA,OAAAwK,QAAA,CAAI,QAAM,CAAI,CAAC,cACfxK,IAAA,OAAAwK,QAAA,CAAI,OAAK,CAAI,CAAC,cACdxK,IAAA,OAAAwK,QAAA,CAAI,KAAG,CAAI,CAAC,EACV,CAAC,CACA,CAAC,cACRtK,KAAA,UAAAsK,QAAA,EACGrI,aAAa,CAACuI,GAAG,CAAER,IAAI,eACtBhK,KAAA,OAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,cACExK,IAAA,WAAQuK,SAAS,CAAC,UAAU,CAACE,OAAO,CAAEA,CAAA,GAAMrC,mBAAmB,CAAC8B,IAAI,CAACvE,EAAE,CAAE,CAACuF,QAAQ,CAAEhI,aAAc,CAAAsH,QAAA,CAAC,iBAEnG,CAAQ,CAAC,CACP,CAAC,cACLxK,IAAA,OAAAwK,QAAA,cACExK,IAAA,WAAQuK,SAAS,CAAC,UAAU,CAACE,OAAO,CAAEA,CAAA,GAAMR,cAAc,CAACC,IAAI,CAAE,CAAAM,QAAA,CAC9DN,IAAI,CAACvE,EAAE,CACF,CAAC,CACP,CAAC,cACL3F,IAAA,OAAAwK,QAAA,CAAKN,IAAI,CAACuB,KAAK,CAAK,CAAC,cACrBzL,IAAA,OAAAwK,QAAA,CAAKN,IAAI,CAACwB,QAAQ,CAAK,CAAC,cACxB1L,IAAA,OAAAwK,QAAA,CAAKN,IAAI,CAACyB,MAAM,CAAK,CAAC,cACtB3L,IAAA,OAAAwK,QAAA,CAAKjB,mBAAmB,CAACW,IAAI,CAAC4C,SAAS,CAAC,CAAK,CAAC,cAC9C9M,IAAA,OAAAwK,QAAA,CAAKN,IAAI,CAAC0B,OAAO,CAAGC,UAAU,CAAC3B,IAAI,CAAC0B,OAAO,CAAC,CAAG,GAAG,CAAK,CAAC,GAfjD1B,IAAI,CAACvE,EAgBV,CACL,CAAC,CACDxD,aAAa,CAACuD,MAAM,GAAK,CAAC,eACzB1F,IAAA,OAAAwK,QAAA,cACExK,IAAA,OAAI8K,OAAO,CAAC,GAAG,CAACP,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,qCAExD,CAAI,CAAC,CACH,CACL,EACI,CAAC,EACH,CAAC,CACL,CAAC,EACH,CACN,CAED,mBACEtK,KAAA,QAAKqK,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BxK,IAAA,QAAKuK,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBxK,IAAA,QAAKuK,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBtK,KAAA,QAAKqK,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDtK,KAAA,QAAKqK,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CxK,IAAA,QAAKuK,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,IAAE,CAAK,CAAC,cACjCtK,KAAA,QAAAsK,QAAA,eACExK,IAAA,OAAIuK,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,6BAA2B,CAAI,CAAC,cACtFxK,IAAA,MAAGuK,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,wCAAsC,CAAG,CAAC,EAClF,CAAC,EACH,CAAC,cACNtK,KAAA,QAAKqK,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CxK,IAAA,CAACF,kBAAkB,EAACsE,MAAM,CAAEhE,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEsE,QAAS,CAAE,CAAC,cAC9CxE,KAAA,SAAMqK,SAAS,CAAC,6BAA6B,CAAAC,QAAA,EAAC,WACnC,cAAAxK,IAAA,WAAAwK,QAAA,CAASpK,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEsE,QAAQ,CAAS,CAAC,EACtC,CAAC,cACP1E,IAAA,WAAQyK,OAAO,CAAEJ,YAAa,CAACE,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,QAE3D,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CACH,CAAC,cAENtK,KAAA,QAAKqK,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClCtK,KAAA,UAAOqK,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAClCtK,KAAA,QAAKqK,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BxK,IAAA,OAAAwK,QAAA,CAAI,WAAS,CAAI,CAAC,cAClBtK,KAAA,QAAAsK,QAAA,eACExK,IAAA,WAAQuK,SAAS,iBAAAa,MAAA,CAAkB3K,QAAQ,GAAK,QAAQ,CAAG,QAAQ,CAAG,EAAE,CAAG,CAACgK,OAAO,CAAEA,CAAA,GAAM/J,WAAW,CAAC,QAAQ,CAAE,CAAA8J,QAAA,CAAC,aAElH,CAAQ,CAAC,cACTxK,IAAA,WAAQuK,SAAS,iBAAAa,MAAA,CAAkB3K,QAAQ,GAAK,OAAO,CAAG,QAAQ,CAAG,EAAE,CAAG,CAACgK,OAAO,CAAEA,CAAA,GAAM/J,WAAW,CAAC,OAAO,CAAE,CAAA8J,QAAA,CAAC,OAEhH,CAAQ,CAAC,cACTxK,IAAA,WAAQuK,SAAS,iBAAAa,MAAA,CAAkB3K,QAAQ,GAAK,UAAU,CAAG,QAAQ,CAAG,EAAE,CAAG,CAACgK,OAAO,CAAEA,CAAA,GAAM/J,WAAW,CAAC,UAAU,CAAE,CAAA8J,QAAA,CAAC,gBAEtH,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cACNtK,KAAA,QAAKqK,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BxK,IAAA,OAAAwK,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBtK,KAAA,OAAAsK,QAAA,EACG/I,iBAAiB,CAACiJ,GAAG,CAAE7G,YAAY,eAClC7D,IAAA,OAAAwK,QAAA,cACExK,IAAA,WACEuK,SAAS,iBAAAa,MAAA,CAAkBvH,YAAY,CAACC,OAAO,GAAK/C,eAAe,CAAG,QAAQ,CAAG,EAAE,CAAG,CACtF0J,OAAO,CAAEA,CAAA,GAAM,CACbzJ,kBAAkB,CAAC6C,YAAY,CAACC,OAAO,CAAC,CACxCpD,WAAW,CAAC,QAAQ,CAAC,CACvB,CAAE,CAAA8J,QAAA,CAED3G,YAAY,CAACkJ,SAAS,EAAIxD,mBAAmB,CAAC1F,YAAY,CAACmJ,SAAS,EAAInJ,YAAY,CAACC,OAAO,CAAC,CACxF,CAAC,EATFD,YAAY,CAAC8B,EAUlB,CACL,CAAC,CACDlE,iBAAiB,CAACiE,MAAM,GAAK,CAAC,eAC7B1F,IAAA,OAAIuK,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,uBAAqB,CAAI,CAC3D,EACC,CAAC,EACF,CAAC,EACD,CAAC,cAERxK,IAAA,SAAMuK,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC7B7I,YAAY,CAAChB,MAAM,EAAIA,MAAM,CAAC+E,MAAM,GAAK,CAAC,cACzC1F,IAAA,QAAKuK,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,mBAAiB,CAAK,CAAC,CACpD/J,QAAQ,GAAK,OAAO,CACtBiM,WAAW,CAAC,CAAC,CACXjM,QAAQ,GAAK,UAAU,CACzBoM,cAAc,CAAC,CAAC,cAEhB3M,KAAA,QAAKqK,SAAS,CAAC,eAAe,CAAAC,QAAA,EAC3BF,eAAe,CAAC,CAAC,CACjB3I,YAAY,CAACE,KAAK,EAAI,CAACV,UAAU,CAACuE,MAAM,cACvC1F,IAAA,QAAKuK,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,0BAAwB,CAAK,CAAC,CAE7DO,iBAAiB,CAAC,CACnB,EACE,CACN,CACG,CAAC,EACJ,CAAC,CAELnI,YAAY,eACX5C,IAAA,CAACiN,UAAU,EACT/C,IAAI,CAAEtH,YAAa,CACnBwH,OAAO,CAAEtH,mBAAoB,CAC7BoK,OAAO,CAAEA,CAAA,GAAMrK,eAAe,CAAC,IAAI,CAAE,CACrCxC,OAAO,CAAE2C,cAAe,CACxBuG,mBAAmB,CAAEA,mBAAoB,CAC1C,CACF,EACE,CAAC,CAEV,CAAC,CAED,KAAM,CAAAoD,SAAS,CAAGQ,IAAA,MAAC,CAAEtL,KAAK,CAAE+K,UAAU,CAAErD,mBAAoB,CAAC,CAAA4D,IAAA,oBAC3DjN,KAAA,UAAOqK,SAAS,CAAC,OAAO,CAAAC,QAAA,eACtBxK,IAAA,UAAAwK,QAAA,cACEtK,KAAA,OAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBxK,IAAA,OAAAwK,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBxK,IAAA,OAAAwK,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBxK,IAAA,OAAAwK,QAAA,CAAI,QAAM,CAAI,CAAC,cACfxK,IAAA,OAAAwK,QAAA,CAAI,OAAK,CAAI,CAAC,cACdxK,IAAA,OAAAwK,QAAA,CAAI,KAAG,CAAI,CAAC,EACV,CAAC,CACA,CAAC,cACRtK,KAAA,UAAAsK,QAAA,EACG3I,KAAK,CAAC6I,GAAG,CAAER,IAAI,eACdhK,KAAA,OAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,cACExK,IAAA,WAAQuK,SAAS,CAAC,UAAU,CAACE,OAAO,CAAEA,CAAA,GAAMmC,UAAU,CAAC1C,IAAI,CAAE,CAAAM,QAAA,CAC1DN,IAAI,CAACvE,EAAE,CACF,CAAC,CACP,CAAC,cACL3F,IAAA,OAAAwK,QAAA,CAAKN,IAAI,CAACuB,KAAK,CAAK,CAAC,cACrBzL,IAAA,OAAAwK,QAAA,CAAKN,IAAI,CAACwB,QAAQ,CAAK,CAAC,cACxB1L,IAAA,OAAAwK,QAAA,CAAKN,IAAI,CAACyB,MAAM,CAAK,CAAC,cACtB3L,IAAA,OAAAwK,QAAA,CAAKjB,mBAAmB,CAACW,IAAI,CAAC4C,SAAS,CAAC,CAAK,CAAC,cAC9C9M,IAAA,OAAAwK,QAAA,CAAKN,IAAI,CAAC0B,OAAO,CAAGC,UAAU,CAAC3B,IAAI,CAAC0B,OAAO,CAAC,CAAG,GAAG,CAAK,CAAC,GAVjD1B,IAAI,CAACvE,EAWV,CACL,CAAC,CACD9D,KAAK,CAAC6D,MAAM,GAAK,CAAC,eACjB1F,IAAA,OAAAwK,QAAA,cACExK,IAAA,OAAI8K,OAAO,CAAC,GAAG,CAACP,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,sBAExD,CAAI,CAAC,CACH,CACL,EACI,CAAC,EACH,CAAC,EACT,CAED,KAAM,CAAAyC,UAAU,CAAGG,KAAA,MAAC,CAAElD,IAAI,CAAEE,OAAO,CAAE8C,OAAO,CAAE7M,OAAO,CAAEkJ,mBAAoB,CAAC,CAAA6D,KAAA,oBAC1EpN,IAAA,QAAKuK,SAAS,CAAC,qBAAqB,CAACE,OAAO,CAAEyC,OAAQ,CAAA1C,QAAA,cACpDtK,KAAA,QAAKqK,SAAS,CAAC,aAAa,CAACE,OAAO,CAAG4C,CAAC,EAAKA,CAAC,CAACC,eAAe,CAAC,CAAE,CAAA9C,QAAA,eAC/DtK,KAAA,QAAKqK,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCtK,KAAA,QAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,CAAKN,IAAI,CAACuB,KAAK,CAAK,CAAC,cACrBvL,KAAA,MAAGqK,SAAS,CAAC,sBAAsB,CAAAC,QAAA,EAAC,WAAS,CAACN,IAAI,CAACvE,EAAE,EAAI,CAAC,EACvD,CAAC,cACN3F,IAAA,WAAQuK,SAAS,CAAC,WAAW,CAACE,OAAO,CAAEyC,OAAQ,CAAA1C,QAAA,CAAC,QAAC,CAAQ,CAAC,EACvD,CAAC,cACNtK,KAAA,QAAKqK,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BtK,KAAA,YAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBtK,KAAA,QAAKqK,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BxK,IAAA,CAACuN,UAAU,EAACC,KAAK,CAAC,QAAQ,CAACzB,KAAK,CAAE7B,IAAI,CAACyB,MAAO,CAAE,CAAC,cACjD3L,IAAA,CAACuN,UAAU,EAACC,KAAK,CAAC,UAAU,CAACzB,KAAK,CAAE7B,IAAI,CAACwB,QAAS,CAAE,CAAC,cACrD1L,IAAA,CAACuN,UAAU,EAACC,KAAK,CAAC,aAAa,CAACzB,KAAK,CAAE7B,IAAI,CAACuD,UAAW,CAAE,CAAC,cAC1DzN,IAAA,CAACuN,UAAU,EAACC,KAAK,CAAC,aAAa,CAACzB,KAAK,CAAE7B,IAAI,CAACsB,UAAU,EAAI,GAAI,CAAE,CAAC,cACjExL,IAAA,CAACuN,UAAU,EAACC,KAAK,CAAC,YAAY,CAACzB,KAAK,CAAExC,mBAAmB,CAACW,IAAI,CAAC4C,SAAS,CAAE,CAAE,CAAC,cAC7E9M,IAAA,CAACuN,UAAU,EAACC,KAAK,CAAC,UAAU,CAACzB,KAAK,CAAE7B,IAAI,CAAC0B,OAAO,CAAGW,cAAc,CAACrC,IAAI,CAAC0B,OAAO,CAAC,CAAG,GAAI,CAAE,CAAC,cACzF5L,IAAA,CAACuN,UAAU,EAACC,KAAK,CAAC,aAAa,CAACzB,KAAK,CAAE7B,IAAI,CAACwD,YAAY,CAAGnB,cAAc,CAACrC,IAAI,CAACwD,YAAY,CAAC,CAAG,GAAI,CAAE,CAAC,EACnG,CAAC,EACC,CAAC,cACVxN,KAAA,YAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,CAAI,aAAW,CAAI,CAAC,cACpBxK,IAAA,MAAAwK,QAAA,CAAIN,IAAI,CAACe,WAAW,EAAI,0BAA0B,CAAI,CAAC,EAChD,CAAC,CACTf,IAAI,CAACyD,UAAU,eACdzN,KAAA,YAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,CAAI,gBAAc,CAAI,CAAC,cACvBxK,IAAA,MAAGuK,SAAS,CAAC,iBAAiB,CAACqD,IAAI,CAAE1D,IAAI,CAACyD,UAAW,CAACzB,MAAM,CAAC,QAAQ,CAAC2B,GAAG,CAAC,YAAY,CAAArD,QAAA,CAAC,qBAEvF,CAAG,CAAC,EACG,CACV,cACDtK,KAAA,YAAAsK,QAAA,eACExK,IAAA,OAAAwK,QAAA,CAAI,UAAQ,CAAI,CAAC,CAChBnK,OAAO,cACNL,IAAA,MAAAwK,QAAA,CAAG,uBAAgB,CAAG,CAAC,CACrBJ,OAAO,CAAC1E,MAAM,GAAK,CAAC,cACtB1F,IAAA,MAAGuK,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,sBAAoB,CAAG,CAAC,cAElDxK,IAAA,OAAIuK,SAAS,CAAC,cAAc,CAAAC,QAAA,CACzBJ,OAAO,CAACM,GAAG,CAAEuB,KAAK,eACjB/L,KAAA,OAAAsK,QAAA,eACEtK,KAAA,QAAKqK,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BxK,IAAA,SAAMuK,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEyB,KAAK,CAAC6B,SAAS,CAAO,CAAC,cACxD9N,IAAA,SAAMuK,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAE+B,cAAc,CAACN,KAAK,CAAC8B,SAAS,CAAC,CAAO,CAAC,EACpE,CAAC,cACN7N,KAAA,QAAKqK,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BxK,IAAA,CAACuN,UAAU,EAACC,KAAK,CAAC,MAAM,CAACzB,KAAK,CAAEE,KAAK,CAAC+B,QAAQ,EAAI,GAAI,CAAE,CAAC,cACzDhO,IAAA,CAACuN,UAAU,EAACC,KAAK,CAAC,IAAI,CAACzB,KAAK,CAAEE,KAAK,CAACgC,MAAM,EAAI,GAAI,CAAE,CAAC,EAClD,CAAC,CACLhC,KAAK,CAACQ,QAAQ,eAAIzM,IAAA,MAAGuK,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAEyB,KAAK,CAACQ,QAAQ,CAAI,CAAC,GAT/DR,KAAK,CAACtG,EAUX,CACL,CAAC,CACA,CACL,EACM,CAAC,EACP,CAAC,EACH,CAAC,CACH,CAAC,EACP,CAED,KAAM,CAAA4H,UAAU,CAAGW,KAAA,MAAC,CAAEV,KAAK,CAAEzB,KAAM,CAAC,CAAAmC,KAAA,oBAClChO,KAAA,QAAKqK,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BxK,IAAA,UAAAwK,QAAA,CAAQgD,KAAK,CAAQ,CAAC,cACtBxN,IAAA,SAAAwK,QAAA,CAAOuB,KAAK,CAAO,CAAC,EACjB,CAAC,EACP,CAED,KAAM,CAAAF,UAAU,CAAIE,KAAK,EAAK,CAC5B,GAAI,CACF,MAAO,IAAI,CAAAoC,IAAI,CAACpC,KAAK,CAAC,CAACqC,kBAAkB,CAAC,CAAC,CAC7C,CAAE,MAAAC,OAAA,CAAM,CACN,MAAO,CAAAtC,KAAK,CACd,CACF,CAAC,CAED,KAAM,CAAAQ,cAAc,CAAIR,KAAK,EAAK,CAChC,GAAI,CACF,MAAO,IAAI,CAAAoC,IAAI,CAACpC,KAAK,CAAC,CAACuC,cAAc,CAAC,CAAC,CACzC,CAAE,MAAAC,QAAA,CAAM,CACN,MAAO,CAAAxC,KAAK,CACd,CACF,CAAC,CAED,KAAM,CAAA/B,eAAe,CAAI+B,KAAK,EAAK,CACjC,GAAI,CAACA,KAAK,CAAE,MAAO,GAAG,CACtB,MAAO,CAAAA,KAAK,CACTyC,OAAO,CAAC,IAAI,CAAE,GAAG,CAAC,CAClBA,OAAO,CAAC,OAAO,CAAGC,CAAC,EAAKA,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC,CAC7C,CAAC,CAED,cAAe,CAAAvO,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}