<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="1200" viewBox="0 0 1400 1200">
  <!-- Title -->
  <text x="700" y="30" font-size="28" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    CMIPS Design Patterns &amp; Keycloak Integration
  </text>
  
  <!-- KEYCLOAK ADMIN PATTERN -->
  <rect x="50" y="80" width="400" height="280" fill="#f8f9fa" stroke="#bdc3c7" stroke-width="2" rx="10"/>
  <text x="250" y="110" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Keycloak Admin Pattern
  </text>
  
  <rect x="70" y="130" width="360" height="40" fill="#3498db" rx="5"/>
  <text x="250" y="155" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Users Management
  </text>
  
  <rect x="70" y="180" width="360" height="40" fill="#9b59b6" rx="5"/>
  <text x="250" y="205" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Roles Management
  </text>
  
  <rect x="70" y="230" width="360" height="40" fill="#e67e22" rx="5"/>
  <text x="250" y="255" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Policies Management
  </text>
  
  <rect x="70" y="280" width="360" height="40" fill="#27ae60" rx="5"/>
  <text x="250" y="305" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Permissions Management
  </text>
  
  <!-- EVENT-DRIVEN PATTERN -->
  <rect x="500" y="80" width="400" height="280" fill="#f8f9fa" stroke="#bdc3c7" stroke-width="2" rx="10"/>
  <text x="700" y="110" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Event-Driven Pattern
  </text>
  
  <rect x="520" y="130" width="360" height="40" fill="#3498db" rx="5"/>
  <text x="700" y="155" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Producer → Kafka Topic
  </text>
  
  <rect x="520" y="180" width="360" height="40" fill="#9b59b6" rx="5"/>
  <text x="700" y="205" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Consumer → Event Processor
  </text>
  
  <rect x="520" y="230" width="360" height="40" fill="#e67e22" rx="5"/>
  <text x="700" y="255" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Task &amp; Notification Creation
  </text>
  
  <rect x="520" y="280" width="360" height="40" fill="#27ae60" rx="5"/>
  <text x="700" y="305" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Work Queue Assignment
  </text>
  
  <!-- FIELD-LEVEL AUTHORIZATION PATTERN -->
  <rect x="950" y="80" width="400" height="280" fill="#f8f9fa" stroke="#bdc3c7" stroke-width="2" rx="10"/>
  <text x="1150" y="110" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Field-Level Authorization
  </text>
  
  <rect x="970" y="130" width="360" height="40" fill="#3498db" rx="5"/>
  <text x="1150" y="155" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Resource Attributes
  </text>
  
  <rect x="970" y="180" width="360" height="40" fill="#9b59b6" rx="5"/>
  <text x="1150" y="205" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Permission Policies
  </text>
  
  <rect x="970" y="230" width="360" height="40" fill="#e67e22" rx="5"/>
  <text x="1150" y="255" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Dynamic Field Filtering
  </text>
  
  <rect x="970" y="280" width="360" height="40" fill="#27ae60" rx="5"/>
  <text x="1150" y="305" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Role-Based Access Control
  </text>
  
  <!-- DATA FLOW SECTION -->
  <rect x="50" y="400" width="1300" height="600" fill="#f8f9fa" stroke="#bdc3c7" stroke-width="2" rx="10"/>
  <text x="700" y="430" font-size="20" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Complete Data Flow Architecture
  </text>
  
  <!-- User Login Flow -->
  <rect x="100" y="460" width="250" height="180" fill="#ecf0f1" stroke="#95a5a6" stroke-width="2" rx="5"/>
  <text x="225" y="485" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    User Login Flow
  </text>
  <circle cx="150" cy="520" r="8" fill="#e74c3c"/>
  <text x="170" y="525" font-size="12" fill="#2c3e50">1. User enters credentials</text>
  <circle cx="150" cy="560" r="8" fill="#e74c3c"/>
  <text x="170" y="565" font-size="12" fill="#2c3e50">2. Backend calls Keycloak token endpoint</text>
  <circle cx="150" cy="600" r="8" fill="#e74c3c"/>
  <text x="170" y="605" font-size="12" fill="#2c3e50">3. Keycloak validates credentials</text>
  <circle cx="150" cy="640" r="8" fill="#e74c3c"/>
  <text x="170" y="645" font-size="12" fill="#2c3e50">4. Returns JWT with roles</text>
  
  <!-- Admin Operations Flow -->
  <rect x="400" y="460" width="250" height="180" fill="#ebdef0" stroke="#c39bd3" stroke-width="2" rx="5"/>
  <text x="525" y="485" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Admin Operations Flow
  </text>
  <circle cx="450" cy="520" r="8" fill="#9b59b6"/>
  <text x="470" y="525" font-size="12" fill="#2c3e50">1. Admin creates user via UI</text>
  <circle cx="450" cy="560" r="8" fill="#9b59b6"/>
  <text x="470" y="565" font-size="12" fill="#2c3e50">2. Backend calls Keycloak Admin API</text>
  <circle cx="450" cy="600" r="8" fill="#9b59b6"/>
  <text x="470" y="605" font-size="12" fill="#2c3e50">3. Keycloak creates user/role</text>
  <circle cx="450" cy="640" r="8" fill="#9b59b6"/>
  <text x="470" y="645" font-size="12" fill="#2c3e50">4. Changes persist in Keycloak</text>
  
  <!-- Event Processing Flow -->
  <rect x="700" y="460" width="250" height="180" fill="#d0ecf4" stroke="#85c1e2" stroke-width="2" rx="5"/>
  <text x="825" y="485" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Event Processing Flow
  </text>
  <circle cx="750" cy="520" r="8" fill="#3498db"/>
  <text x="770" y="525" font-size="12" fill="#2c3e50">1. Application event occurs</text>
  <circle cx="750" cy="560" r="8" fill="#3498db"/>
  <text x="770" y="565" font-size="12" fill="#2c3e50">2. Producer publishes to Kafka</text>
  <circle cx="750" cy="600" r="8" fill="#3498db"/>
  <text x="770" y="605" font-size="12" fill="#2c3e50">3. Consumer reads event</text>
  <circle cx="750" cy="640" r="8" fill="#3498db"/>
  <text x="770" y="645" font-size="12" fill="#2c3e50">4. Task created in database</text>
  
  <!-- Work Queue Flow -->
  <rect x="1000" y="460" width="250" height="180" fill="#fef5e7" stroke="#f7dc6f" stroke-width="2" rx="5"/>
  <text x="1125" y="485" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Work Queue Flow
  </text>
  <circle cx="1050" cy="520" r="8" fill="#f39c12"/>
  <text x="1070" y="525" font-size="12" fill="#2c3e50">1. Task assigned to work queue</text>
  <circle cx="1050" cy="560" r="8" fill="#f39c12"/>
  <text x="1070" y="565" font-size="12" fill="#2c3e50">2. Based on role or user</text>
  <circle cx="1050" cy="600" r="8" fill="#f39c12"/>
  <text x="1070" y="605" font-size="12" fill="#2c3e50">3. User views in WorkView</text>
  <circle cx="1050" cy="640" r="8" fill="#f39c12"/>
  <text x="1070" y="645" font-size="12" fill="#2c3e50">4. Notification shown to user</text>
  
  <!-- Role-Based Security -->
  <rect x="50" y="680" width="350" height="280" fill="#d5f4e6" stroke="#52be80" stroke-width="2" rx="10"/>
  <text x="225" y="710" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Role-Based Security Layers
  </text>
  
  <rect x="70" y="730" width="310" height="50" fill="#27ae60" rx="5"/>
  <text x="225" y="755" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Layer 1: Keycloak Authentication
  </text>
  <text x="80" y="775" font-size="11" fill="white">
    JWT tokens with realm &amp; client roles
  </text>
  
  <rect x="70" y="800" width="310" height="50" fill="#229954" rx="5"/>
  <text x="225" y="825" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Layer 2: RBAC Authorization
  </text>
  <text x="80" y="845" font-size="11" fill="white">
    Role-based access control policies
  </text>
  
  <rect x="70" y="870" width="310" height="50" fill="#196f3d" rx="5"/>
  <text x="225" y="895" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Layer 3: Field-Level Access Control
  </text>
  <text x="80" y="915" font-size="11" fill="white">
    Resource attributes restrict field access
  </text>
  
  <rect x="70" y="940" width="310" height="50" fill="#135a28" rx="5"/>
  <text x="225" y="965" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Layer 4: Work Queue Filtering
  </text>
  <text x="80" y="985" font-size="11" fill="white">
    Tasks filtered by user role and permissions
  </text>
  
  <!-- Technology Stack -->
  <rect x="450" y="680" width="350" height="280" fill="#ede8f5" stroke="#a569bd" stroke-width="2" rx="10"/>
  <text x="625" y="710" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Technology Stack
  </text>
  
  <rect x="470" y="730" width="310" height="40" fill="#9b59b6" rx="5"/>
  <text x="625" y="755" font-size="13" text-anchor="middle" fill="white">
    Frontend: React + Keycloak-js
  </text>
  
  <rect x="470" y="780" width="310" height="40" fill="#8e44ad" rx="5"/>
  <text x="625" y="805" font-size="13" text-anchor="middle" fill="white">
    Backend: Spring Boot + Keycloak Admin API
  </text>
  
  <rect x="470" y="830" width="310" height="40" fill="#7d3c98" rx="5"/>
  <text x="625" y="855" font-size="13" text-anchor="middle" fill="white">
    Event Streaming: Apache Kafka + Zookeeper
  </text>
  
  <rect x="470" y="880" width="310" height="40" fill="#6c3483" rx="5"/>
  <text x="625" y="905" font-size="13" text-anchor="middle" fill="white">
    Database: PostgreSQL
  </text>
  
  <rect x="470" y="930" width="310" height="40" fill="#512e5f" rx="5"/>
  <text x="625" y="955" font-size="13" text-anchor="middle" fill="white">
    Identity: Keycloak Server
  </text>
  
  <!-- Key Features -->
  <rect x="850" y="680" width="500" height="280" fill="#fff4e6" stroke="#f7dc6f" stroke-width="2" rx="10"/>
  <text x="1100" y="710" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Key Features
  </text>
  
  <rect x="870" y="730" width="480" height="35" fill="#f39c12" rx="5"/>
  <text x="1110" y="752" font-size="13" text-anchor="middle" fill="white">
    ✓ Keycloak Admin Dashboard - Manage users, roles, policies without console
  </text>
  
  <rect x="870" y="775" width="480" height="35" fill="#e67e22" rx="5"/>
  <text x="1110" y="797" font-size="13" text-anchor="middle" fill="white">
    ✓ Event-Driven Tasks - Automatic task generation from application events
  </text>
  
  <rect x="870" y="820" width="480" height="35" fill="#d35400" rx="5"/>
  <text x="1110" y="842" font-size="13" text-anchor="middle" fill="white">
    ✓ Role-Based Work Queues - Tasks filtered by user roles and permissions
  </text>
  
  <rect x="870" y="865" width="480" height="35" fill="#c0392b" rx="5"/>
  <text x="1110" y="887" font-size="13" text-anchor="middle" fill="white">
    ✓ Real-Time Notifications - User gets notified of new tasks
  </text>
  
  <rect x="870" y="910" width="480" height="35" fill="#a93226" rx="5"/>
  <text x="1110" y="932" font-size="13" text-anchor="middle" fill="white">
    ✓ Field-Level Authorization - Fine-grained access control per field
  </text>
  
  <rect x="870" y="955" width="480" height="35" fill="#922b21" rx="5"/>
  <text x="1110" y="977" font-size="13" text-anchor="middle" fill="white">
    ✓ WorkView Dashboard - Personalized task management interface
  </text>
  
  <!-- FOOTER -->
  <text x="700" y="1150" font-size="14" text-anchor="middle" fill="#7f8c8d">
    CMIPS - Event-Driven Architecture with Keycloak Integration
  </text>
  <text x="700" y="1170" font-size="12" text-anchor="middle" fill="#95a5a6">
    Spring Boot + React + Kafka + Keycloak + PostgreSQL
  </text>
</svg>

